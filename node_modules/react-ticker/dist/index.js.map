{"version":3,"file":"index.js","sources":["../src/utils/debounce.js","../src/utils/guidGenerator.js","../src/utils/getHighest.js","../src/utils/shouldNextTriggerOnMount.js","../src/utils/getPosition.js","../src/utils/getNextOffset.js","../src/utils/getStartOffset.js","../src/Element.js","../src/utils/getDefaultState.js","../src/index.js"],"sourcesContent":["const debounce = (fn, time) => {\n  let timeout\n\n  return function () {\n    const functionCall = () => fn.apply(this, arguments)\n\n    clearTimeout(timeout)\n    timeout = setTimeout(functionCall, time)\n  }\n}\n\nexport default debounce\n","// https://stackoverflow.com/questions/6860853/generate-random-string-for-div-id#6860916\n\nexport default () => {\n  const S4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1)\n  return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4())\n}\n","export default function getHighest(elements) {\n  let highest = 0\n  elements.forEach(el => {\n    if (el.rect.height > highest) {\n      highest = el.rect.height\n    }\n  })\n  return highest\n}\n","export default function nextTriggerOnMount({ rect, mode, prevOffset, position, direction, width }) {\n  if (mode !== 'chain') return false\n  switch (direction) {\n    case 'toRight':\n      return position.from > 0\n    case 'toLeft':\n    default:\n      return rect.width + position.from <= width\n  }\n}\n","function getFromOffset({ rect, offset, direction }) {\n  switch (direction) {\n    case 'toRight':\n      return offset - rect.width\n    case 'toLeft':\n    default:\n      return offset\n  }\n}\n\nfunction getFrom({ index, rect, offset, width, direction }) {\n  if (index === 0) return offset\n\n  if (typeof offset === 'number') {\n    return getFromOffset({ rect, offset, direction })\n  }\n\n  switch (direction) {\n    case 'toRight':\n      return -rect.width\n    case 'toLeft':\n    default:\n      return width\n  }\n}\n\nfunction getTo({ rect, width, direction }) {\n  switch (direction) {\n    case 'toRight':\n      return width\n    case 'toLeft':\n    default:\n      return -rect.width\n  }\n}\n\nfunction getNext({ mode, from, direction, rect, width }) {\n  const start = from || 0\n\n  switch (mode) {\n    case 'await':\n      switch (direction) {\n        case 'toRight':\n          return width\n        case 'toLeft':\n        default:\n          return -rect.width\n      }\n    case 'smooth':\n      switch (direction) {\n        case 'toRight':\n          return rect.width > width\n            ? 0\n            : width - rect.width\n        case 'toLeft':\n        default:\n          return rect.width > width\n            ? width - rect.width\n            : 0\n      }\n    case 'chain':\n    default:\n      switch (direction) {\n        case 'toRight':\n          return 0\n        case 'toLeft':\n        default:\n          return rect.width + start > width\n            ? width - rect.width\n            : width - rect.left - rect.width\n      }\n  }\n}\n\nexport default ({ mode, index, rect, offset, width, direction }) => {\n  const from = getFrom({ index, rect, offset, width, direction })\n  const to = getTo({ rect, width, direction })\n  return {\n    from,\n    to,\n    next: getNext({ mode, from, direction, rect, width })\n  }\n}\n","export default function getNextOffset({ from, rect, direction }) {\n  switch (direction) {\n    case 'toRight': {\n      return from\n    }\n    case 'toLeft':\n    default: {\n      return from + rect.width\n    }\n  }\n}\n","export default function getStartOffset({ offset, rect, direction, width }) {\n  if (offset === 'run-in') {\n    switch (direction) {\n      case 'toRight':\n        return -rect.width\n      case 'toLeft':\n      default:\n        return width\n    }\n  }\n  if (typeof offset === 'string') {\n    const offsetRelative = Number(offset.replace('%', ''))\n    if (offsetRelative) return (width / 100) * offsetRelative\n  }\n  return offset\n}\n","import React from 'react'\nimport { bool, func, node, number, object, oneOfType, string } from 'prop-types'\n\nimport shouldNextTriggerOnMount from './utils/shouldNextTriggerOnMount'\nimport getPosition from './utils/getPosition'\nimport getNextOffset from './utils/getNextOffset'\nimport getStartOffset from './utils/getStartOffset'\n\nclass TickerElement extends React.Component {\n  static propTypes = {\n    children: oneOfType([node, func]).isRequired,\n    direction: string.isRequired,\n    speed: number.isRequired,\n    id: string.isRequired,\n    index: number.isRequired,\n    mode: string.isRequired,\n    move: bool.isRequired,\n    onNext: func.isRequired,\n    onFinish: func.isRequired,\n    setRect: func.isRequired,\n    start: bool.isRequired,\n\n    offset: oneOfType([number, string]),\n    prevRect: object,\n    width: number\n  }\n\n  static defaultProps = {\n    offset: undefined,\n    width: undefined,\n    prevRect: null\n  }\n\n  state = {\n    children: this.props.children({\n      index: this.props.index\n    }),\n    move: this.props.move,\n    position: { from: undefined, to: undefined, next: undefined },\n    offset: this.props.offset,\n    rect: null\n  }\n  x = 0\n  isMoving = false\n  nextTriggered = false\n  elementRef = React.createRef()\n\n  componentDidMount = () => {\n    this.setPosition(true)\n    this.observer = new MutationObserver(this.onMutation)\n    this.observer.observe(this.elementRef.current, { characterData: true, childList: true, subtree: true })\n  }\n\n  componentWillUnmount = () => {\n    this.observer.disconnect()\n  }\n\n  onMutation = () => {\n    this.setPosition()\n  }\n\n  componentDidUpdate = (prevProps, prevState) => {\n    if (!this.x && prevState.position.from !== this.state.position.from) {\n      this.x = this.state.position.from\n      this.elementRef.current.style.transform = `translate3d(${this.x}px, 0, 0)`\n    }\n    if (this.x !== this.state.position.from &&\n      prevProps.prevRect &&\n      this.props.prevRect &&\n      prevProps.prevRect.width !== this.props.prevRect.width) {\n      if (this.props.offset) {\n        this.x = this.x + (this.props.offset - prevProps.offset)\n      } else {\n        this.x = this.x + (this.props.prevRect.width - prevProps.prevRect.width)\n      }\n      this.elementRef.current.style.transform = `translate3d(${this.x}px, 0, 0)`\n    }\n    if (this.props.move && !prevProps.start && this.props.start) {\n      this.animate()\n    }\n    if (this.props.start && !prevProps.move && this.props.move) {\n      this.animate()\n    }\n    if (prevProps.move && !this.props.move) {\n      this.isMoving = false\n    }\n  }\n\n  setPosition = (isMount) => {\n    const {\n      mode,\n      width,\n      id,\n      onNext,\n      direction,\n      index,\n      setRect\n    } = this.props\n\n    const rect = this.elementRef.current.getBoundingClientRect()\n    if (rect.width === 0) return\n\n    const offset = this.props.index === 0\n      ? getStartOffset({ offset: this.props.offset, rect, direction, width })\n      : this.props.offset\n\n    const position = getPosition({ mode, rect, index, offset, width, direction })\n\n    setRect({\n      index: this.props.index,\n      rect,\n      offset,\n      nextOffset: getNextOffset({ from: position.from, rect, direction })\n    })\n\n    if (isMount) {\n      const nextTriggerOnMount = shouldNextTriggerOnMount({ mode, rect, position, offset, direction, width })\n      if (nextTriggerOnMount) {\n        onNext({\n          id,\n          index,\n          rect,\n          nextOffset: getNextOffset({ from: position.from, rect, direction })\n        })\n      }\n      if (!nextTriggerOnMount && (offset || index === 0)) {\n        onNext({ id, index, rect })\n      }\n      this.nextTriggered = nextTriggerOnMount\n    }\n\n    this.setState({\n      rect,\n      offset,\n      position\n    })\n  }\n\n  shouldTriggerNext = () => {\n    if (this.nextTriggered) return false\n    return this.props.direction === 'toLeft'\n      ? this.x <= this.state.position.next\n      : this.x >= this.state.position.next\n  }\n\n  triggerNext = () => {\n    if (this.shouldTriggerNext()) {\n      // if (this.props.index === 5) console.log(this.x)\n      this.nextTriggered = true\n      this.props.onNext({\n        id: this.props.id,\n        index: this.props.index,\n        rect: this.state.rect\n      })\n    }\n  }\n\n  shouldFinish = () => {\n    switch (this.props.direction) {\n      case 'toRight':\n        return this.x >= this.state.position.to\n      case 'toLeft':\n      default:\n        return this.x <= this.state.position.to\n    }\n  }\n\n  animate = () => {\n    if (this.isMoving) return\n    this.isMoving = true\n\n    let prevTimestamp = null\n\n    const step = (timestamp) => {\n      if (!this.isMoving) return\n      if (!this.elementRef.current) return\n\n      const progress = prevTimestamp\n        ? timestamp - prevTimestamp\n        : 0\n\n      this.x = this.props.direction === 'toLeft'\n        ? this.x - (progress / 100 * this.props.speed)\n        : this.x + (progress / 100 * this.props.speed)\n      this.elementRef.current.style.transform = `translate3d(${this.x}px, 0, 0)`\n      this.triggerNext()\n\n      if (this.shouldFinish()) {\n        this.isMoving = false\n        prevTimestamp = null\n        this.props.onFinish(this.props.id)\n      } else {\n        prevTimestamp = timestamp\n        window.requestAnimationFrame(step)\n      }\n    }\n    window.requestAnimationFrame(step)\n  }\n\n  render = () => (\n    <div\n      className='ticker__element'\n      style={{\n        willChange: 'transform',\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        transform: `translate3d(${this.x}px, 0, 0)`\n      }}\n      ref={this.elementRef}\n    >\n      {this.state.children}\n    </div>\n  )\n}\n\nexport default TickerElement\n","\nimport guidGenerator from './guidGenerator'\n\nconst getDefaultState = (offset, width) => ({\n  elements: [{\n    id: guidGenerator(),\n    index: 0,\n    height: 0,\n    start: false,\n    offset: offset,\n    rect: null,\n    prevRect: null\n  }],\n  width,\n  height: 0\n})\n\nexport default getDefaultState\n","import React from 'react'\nimport { bool, func, node, number, oneOfType, string } from 'prop-types'\nimport debounce from './utils/debounce'\nimport guidGenerator from './utils/guidGenerator'\nimport getHighest from './utils/getHighest'\nimport TickerElement from './Element'\nimport getDefaultState from './utils/getDefaultState'\n\nexport default class Ticker extends React.Component {\n  static propTypes = {\n    children: oneOfType([node, func]).isRequired,\n\n    direction: string,\n    mode: string,\n    move: bool,\n    offset: oneOfType([number, string]),\n    speed: number,\n    height: oneOfType([number, string])\n  }\n\n  static defaultProps = {\n    offset: 0,\n    speed: 5,\n    direction: 'toLeft',\n    mode: 'chain',\n    move: true,\n    height: undefined\n  }\n  next = null\n  state = getDefaultState(this.props.offset)\n  tickerRef = React.createRef()\n\n  dOnResize = debounce(() => this.onResize(), 150)\n\n  componentDidMount = () => {\n    this.setState({\n      width: this.tickerRef.current.offsetWidth,\n      height: this.props.height\n    })\n    window.addEventListener('resize', this.dOnResize)\n  }\n\n  componentWillUnmount = () => {\n    window.removeEventListener('resize', this.dOnResize)\n  }\n\n  setRect = ({ index, rect, offset, nextOffset }) => {\n    this.setState(prevState => {\n      const elements = prevState.elements.map(el => {\n        const newEl = el\n        if (el.index === index) newEl.rect = rect\n        // next element\n        if (el.index === index + 1) {\n          newEl.prevRect = rect\n          if (newEl.offset) {\n            newEl.offset = nextOffset\n          }\n        }\n        return newEl\n      })\n      return {\n        elements,\n        height: this.props.height\n          ? prevState.height\n          : getHighest(elements)\n      }\n    })\n  }\n\n  onResize = () => {\n    if (!this.tickerRef.current || this.tickerRef.current.offsetWidth === this.state.width) return\n    this.setState({\n      ...getDefaultState(this.props.offset, this.tickerRef.current.offsetWidth),\n      height: this.props.height\n    })\n  }\n\n  onFinish = (id) => {\n    this.setState(prevState => ({\n      elements: prevState.elements.filter(el => el.id !== id)\n    }))\n  }\n\n  onNext = ({ id, index, rect, nextOffset }) => {\n    this.setState(prevState => ({\n      elements: [\n        // start next element\n        ...prevState.elements.map(el => {\n          const newEl = el\n          if (el.index === index) newEl.rect = rect\n          if (el.index === 0 || el.offset || newEl.index === index + 1) {\n            newEl.start = true\n          }\n          return newEl\n          // create new element\n        }), {\n          id: guidGenerator(),\n          index: prevState.elements[prevState.elements.length - 1].index + 1,\n          height: 0,\n          start: false,\n          offset: nextOffset,\n          rect: null,\n          prevRect: rect\n        }\n      ]\n    }))\n  }\n\n  render() {\n    return (\n      <div\n        className='ticker'\n        ref={this.tickerRef}\n        style={{\n          position: 'relative',\n          overflow: 'hidden',\n          height: this.state.height && `${this.state.height}px`\n        }}\n      >\n        {\n          this.state.width && this.state.elements.map(el => {\n            return (\n              <TickerElement\n                key={el.id}\n                id={el.id}\n                index={el.index}\n                start={el.start}\n                offset={el.offset}\n                prevRect={el.prevRect}\n\n                direction={this.props.direction}\n                mode={this.props.mode}\n                move={this.props.move}\n                speed={this.props.speed}\n\n                onFinish={this.onFinish}\n                onNext={this.onNext}\n                setRect={this.setRect}\n                width={this.state.width}\n              >\n                {this.props.children}\n              </TickerElement>\n            )\n          })\n        }\n      </div>\n    )\n  }\n}\n"],"names":["debounce","fn","time","timeout","functionCall","apply","arguments","setTimeout","S4","Math","random","toString","substring","getHighest","elements","highest","forEach","el","rect","height","nextTriggerOnMount","mode","prevOffset","position","direction","width","from","getFromOffset","offset","getFrom","index","getTo","getNext","start","left","to","getNextOffset","getStartOffset","offsetRelative","Number","replace","TickerElement","state","props","children","move","undefined","next","x","isMoving","nextTriggered","elementRef","React","createRef","componentDidMount","setPosition","observer","MutationObserver","onMutation","observe","current","characterData","childList","subtree","componentWillUnmount","disconnect","componentDidUpdate","prevProps","prevState","style","transform","prevRect","animate","isMount","id","onNext","setRect","getBoundingClientRect","getPosition","shouldNextTriggerOnMount","setState","shouldTriggerNext","triggerNext","shouldFinish","prevTimestamp","step","timestamp","progress","speed","onFinish","requestAnimationFrame","render","Component","propTypes","oneOfType","node","func","isRequired","string","number","bool","object","defaultProps","getDefaultState","guidGenerator","Ticker","tickerRef","dOnResize","onResize","offsetWidth","addEventListener","removeEventListener","nextOffset","map","newEl","filter","length"],"mappings":"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"}