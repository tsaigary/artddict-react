{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/Auction/Auction.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './style/auction.scss';\nimport { withRouter, Link } from 'react-router-dom';\nimport { data } from './data/data.js';\nimport AuctionProductList from './components/AuctionProductList';\nimport AuctionSlider from './components/AuctionSlider';\nimport AucBreadcrumb from './components/AucBreadcrumb'; // import Breadcrumb from './components/UserBreadcrumb'\n\nimport auctionLogo from \"./images/auctionLogo.svg\";\nimport auctionarrow from \"./images/arrow.svg\";\nimport selectArrow from \"./images/selectArrow.svg\"; // react icons\n\nimport { IoIosArrowBack, IoIosArrowForward, IoIosArrowRoundDown, IoIosSearch, IoIosHeart, IoMdAdd, IoMdRemove } from 'react-icons/io';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Auction(props) {\n  _s();\n\n  const [search, setSearch] = useState('');\n  const [arrangement, setArrangement] = useState('');\n  const [count, setCount] = useState(0);\n  const [aucInfo, setAucInfo] = useState([]);\n  const [aucRemainT, setAucRemainT] = useState([]); //選擇排列順序\n\n  const handleChangeSelect = e => {\n    // console.log(\"選擇的順序\",e.target.value)\n    setArrangement(e.target.value);\n  }; //初始化資料\n\n\n  async function getAucProFromServer() {\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/auctoin/auction-list'; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json(); // 設定資料\n\n    setAucInfo(data);\n  } //排列查詢\n\n\n  async function getAucProArrFromServer() {\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/auctoin/aucSeaArr' + `?search=${search}` + `&arrangement=${arrangement}`; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json();\n    console.log(data); // 設定資料\n\n    setAucInfo(data);\n  }\n\n  useEffect(() => {\n    getAucProFromServer();\n  }, []);\n  useEffect(() => {\n    getAucProArrFromServer();\n  }, [search, arrangement]);\n\n  const TimeRemaining = deadline => {\n    //截止時間(毫秒)\n    // 將資料拿到資料庫截止日期 從字串轉換成數字\n    const deadlineMin = parseInt(deadline); //現在時間(毫秒)\n\n    const timeRightNowA = new Date();\n    const timeRightNow = timeRightNowA.getTime();\n    const TimeRemaining = deadlineMin - timeRightNow;\n    const seconds = Math.floor(TimeRemaining / 1000 % 60);\n    const minutes = Math.floor(TimeRemaining / 1000 / 60 % 60);\n    const hours = Math.floor(TimeRemaining / (1000 * 60 * 60) % 24);\n    const days = Math.floor(TimeRemaining / (1000 * 60 * 60 * 24)); // console.log(days, \"天\", hours, '小時', minutes, '分鐘', seconds, '秒')\n\n    if (TimeRemaining < 0) {\n      return '競標結束';\n    }\n\n    if (days > 0) {\n      if (String(days).length < 2) {\n        return `截標倒數0${days}天${hours}小時${seconds}`;\n      } else {\n        return `截標倒數${days}天${hours}小時${seconds}`;\n      }\n    }\n\n    if (days < 1) if (String(hours).length < 2) {\n      return `截標倒數0${hours}小時${minutes}分鐘${seconds}`;\n    } else {\n      return `截標倒數${hours}小時${minutes}分鐘${seconds}`;\n    }\n  };\n\n  useEffect(() => {\n    let remainTime = []; //把所有deadline取出來計算剩餘時間\n\n    if (aucInfo.length > 0) {\n      for (let i = 0; i < aucInfo.length; i++) {\n        let deadlineA = new Date(aucInfo[i].aucDeadline).getTime();\n        remainTime.push(TimeRemaining(deadlineA));\n      }\n\n      setAucRemainT(remainTime);\n    }\n\n    let test = setInterval(() => {\n      setCount(count => count + 1);\n    }, 1000); // console.log('+++++++++++++++++++++++', count)\n\n    return () => clearInterval(test);\n  }, [count]); // 一開始就會開始載入資料\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auctionPage\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionHeroSection\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionHeroSectionLogo\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: auctionLogo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionTitleOne cn-font\",\n          children: \"\\u85DD\\u8853\\u7AF6\\u6A19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionTitleTwo cn-font\",\n          children: \"ArtDDICT  \\u76F8\\u4FE1\\u85DD\\u8853\\u4E0D\\u53EA\\u6709\\u55AE\\u4E00\\u50F9\\u503C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctiondecorationA auctiondecoration eng-font-bold\",\n          children: \"A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctiondecorationT auctiondecoration eng-font-bold\",\n          children: \"T\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctiondecorationR auctiondecoration eng-font-bold\",\n          children: \"R\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"marquee\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionMarquee eng-font-bold\",\n          children: [\"AUCTION  \\xA0\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"img\", {\n            src: auctionarrow\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 25\n          }, this), \"\\xA0\\xA0\\xA0 ArtDDICT \\xA0\\xA0\\xA0 AUCTION  \\xA0\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"img\", {\n            src: auctionarrow\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 25\n          }, this), \"\\xA0\\xA0\\xA0 ArtDDICT\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionMain\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionMainWrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionMainFilter\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auctionMainFilterLeft\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionBreadcrumb\",\n                children: /*#__PURE__*/_jsxDEV(AucBreadcrumb, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionArrangement cn-font\",\n                children: \"\\u6392\\u5217\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionArrangementInput\",\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"auc-select pl-1 cn-font\",\n                  onChange: handleChangeSelect,\n                  name: \"name\",\n                  id: \"name\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    style: {\n                      color: '#707070'\n                    },\n                    value: \"\",\n                    children: \"\\u63A8\\u85A6\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"t-more\",\n                    children: \"\\u5269\\u9918\\u6642\\u9593(\\u591A\\u81F3\\u5C11)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"t-less\",\n                    children: \"\\u5269\\u9918\\u6642\\u9593(\\u5C11\\u81F3\\u591A)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"p-less\",\n                    children: \"\\u50F9\\u683C(\\u4F4E\\u81F3\\u9AD8)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"p-high\",\n                    children: \"\\u50F9\\u683C(\\u9AD8\\u81F3\\u4F4E)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"auc-Search\",\n                children: /*#__PURE__*/_jsxDEV(IoIosSearch, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"auc-Searchbox\",\n                value: search,\n                onChange: event => {\n                  setSearch(event.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionNumberOfProduct cn-font\",\n                children: \"Showing 1-9 of 27\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auctionMainFilterRight\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"price range\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(AuctionSlider, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionMainContent cn-font\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auctionsidebar cn_font\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionsidebarTitle \",\n                children: \"\\u7F8E\\u8853\\u9928\\u5546\\u54C1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"\\u756B\\u4F5C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"\\u670D\\u98FE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"\\u5BB6\\u98FE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"\\u6587\\u5177\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"\\u66F8\\u7C4D\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"\\u914D\\u4EF6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(AuctionProductList // data={data}\n            , {\n              search: search,\n              setSearch: setSearch,\n              arrangement: arrangement,\n              getAucProFromServer: getAucProFromServer,\n              getAucProArrFromServer: getAucProArrFromServer,\n              aucInfo: aucInfo,\n              setAucInfo: setAucInfo,\n              TimeRemaining: TimeRemaining,\n              aucRemainT: aucRemainT\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(Auction, \"Us5GhR6kwmyOUN5e+kaAszJ/Xl4=\");\n\n_c = Auction;\nexport default _c2 = withRouter(Auction);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Auction\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/Auction/Auction.js"],"names":["React","useEffect","useState","withRouter","Link","data","AuctionProductList","AuctionSlider","AucBreadcrumb","IoIosArrowBack","IoIosArrowForward","IoIosArrowRoundDown","IoIosSearch","IoIosHeart","IoMdAdd","IoMdRemove","Auction","props","search","setSearch","arrangement","setArrangement","count","setCount","aucInfo","setAucInfo","aucRemainT","setAucRemainT","handleChangeSelect","e","target","value","getAucProFromServer","url","request","Request","method","headers","Headers","Accept","response","fetch","json","getAucProArrFromServer","console","log","TimeRemaining","deadline","deadlineMin","parseInt","timeRightNowA","Date","timeRightNow","getTime","seconds","Math","floor","minutes","hours","days","String","length","remainTime","i","deadlineA","aucDeadline","push","test","setInterval","clearInterval","auctionLogo","auctionarrow","color","event"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './style/auction.scss'\nimport { withRouter, Link } from 'react-router-dom'\n\nimport { data } from './data/data.js'\n\nimport AuctionProductList from './components/AuctionProductList'\nimport AuctionSlider from './components/AuctionSlider'\nimport AucBreadcrumb from './components/AucBreadcrumb'\n// import Breadcrumb from './components/UserBreadcrumb'\n\nimport auctionLogo from './images/auctionLogo.svg'\nimport auctionarrow from './images/arrow.svg'\nimport selectArrow from './images/selectArrow.svg'\n\n\n// react icons\nimport {\n    IoIosArrowBack,\n    IoIosArrowForward,\n    IoIosArrowRoundDown,\n    IoIosSearch,\n    IoIosHeart,\n    IoMdAdd,\n    IoMdRemove,\n} from 'react-icons/io'\n\nfunction Auction(props) {\n\n    const [search, setSearch] = useState('')\n    const [arrangement, setArrangement] = useState('')\n    const [count, setCount] = useState(0)\n    const [aucInfo, setAucInfo] = useState([])\n    const [aucRemainT, setAucRemainT] = useState([])\n\n\n\n    //選擇排列順序\n    const handleChangeSelect = (e) => {\n        // console.log(\"選擇的順序\",e.target.value)\n        setArrangement(e.target.value)\n    }\n\n    //初始化資料\n    async function getAucProFromServer() {\n\n        // 連接的伺服器資料網址\n        const url = 'http://localhost:6005/auctoin/auction-list'\n\n        // 注意header資料格式要設定，伺服器才知道是json格式\n        const request = new Request(url, {\n            method: 'GET',\n            headers: new Headers({\n                Accept: 'application/json',\n                'Content-Type': 'appliaction/json',\n            }),\n        })\n        const response = await fetch(request)\n        const data = await response.json()\n\n        // 設定資料\n        setAucInfo(data)\n    }\n\n    //排列查詢\n    async function getAucProArrFromServer() {\n\n        // 連接的伺服器資料網址\n        const url = 'http://localhost:6005/auctoin/aucSeaArr' + `?search=${search}` + `&arrangement=${arrangement}`\n        // 注意header資料格式要設定，伺服器才知道是json格式\n        const request = new Request(url, {\n            method: 'GET',\n            headers: new Headers({\n                Accept: 'application/json',\n                'Content-Type': 'appliaction/json',\n            }),\n        })\n\n        const response = await fetch(request)\n        const data = await response.json()\n        console.log(data)\n        // 設定資料\n        setAucInfo(data)\n    }\n\n    useEffect(() => {\n        getAucProFromServer()\n    }, [])\n\n    useEffect(() => {\n        getAucProArrFromServer()\n    }, [search, arrangement])\n\n\n    const TimeRemaining = (deadline) => {\n        //截止時間(毫秒)\n        // 將資料拿到資料庫截止日期 從字串轉換成數字\n        const deadlineMin = parseInt(deadline)\n        //現在時間(毫秒)\n        const timeRightNowA = new Date()\n        const timeRightNow = timeRightNowA.getTime()\n\n        const TimeRemaining = deadlineMin - timeRightNow\n\n        const seconds = Math.floor((TimeRemaining / 1000) % 60);\n        const minutes = Math.floor((TimeRemaining / 1000 / 60) % 60);\n        const hours = Math.floor((TimeRemaining / (1000 * 60 * 60)) % 24);\n        const days = Math.floor(TimeRemaining / (1000 * 60 * 60 * 24));\n        // console.log(days, \"天\", hours, '小時', minutes, '分鐘', seconds, '秒')\n        if (TimeRemaining < 0) {\n            return '競標結束'\n        }\n\n        if (days > 0) {\n            if (String(days).length < 2) {\n                return `截標倒數0${days}天${hours}小時${seconds}`\n            } else {\n                return `截標倒數${days}天${hours}小時${seconds}`\n            }\n        }\n        if (days < 1)\n            if (String(hours).length < 2) {\n                return `截標倒數0${hours}小時${minutes}分鐘${seconds}`\n            }else {\n                return `截標倒數${hours}小時${minutes}分鐘${seconds}`\n            }\n\n    }\n\n    useEffect(() => {\n        let remainTime = []\n        //把所有deadline取出來計算剩餘時間\n        if (aucInfo.length > 0) {\n            for (let i = 0; i < (aucInfo.length); i++) {\n                let deadlineA = new Date(aucInfo[i].aucDeadline).getTime()\n                remainTime.push(TimeRemaining(deadlineA))\n            }\n\n            setAucRemainT(remainTime)\n        }\n        let test = setInterval(() => {\n            setCount(count => count + 1)\n        }, 1000)\n        // console.log('+++++++++++++++++++++++', count)\n        return () => clearInterval(test)\n    }, [count])\n\n    // 一開始就會開始載入資料\n\n    return (\n        <>  \n            <div className=\"auctionPage\">\n                <div className=\"auctionHeroSection\">\n                    <div className=\"auctionHeroSectionLogo\">\n                        <img src={auctionLogo} />\n                    </div>\n                    <div className=\"auctionTitleOne cn-font\">\n                        藝術競標\n                    </div>\n                    <div className=\"auctionTitleTwo cn-font\">\n                        ArtDDICT  相信藝術不只有單一價值\n                    </div>\n                    <div className=\"auctiondecorationA auctiondecoration eng-font-bold\">\n                        A\n                    </div>\n                    <div className=\"auctiondecorationT auctiondecoration eng-font-bold\">\n                        T\n                    </div>\n                    <div className=\"auctiondecorationR auctiondecoration eng-font-bold\">\n                        R\n                    </div>\n                </div>\n                <marquee>\n                    <div className=\"auctionMarquee eng-font-bold\">\n                        AUCTION  &nbsp;&nbsp;&nbsp;\n                        <img src={auctionarrow} />\n                        &nbsp;&nbsp;&nbsp;\n                        ArtDDICT\n                        &nbsp;&nbsp;&nbsp;\n                        AUCTION  &nbsp;&nbsp;&nbsp;\n                        <img src={auctionarrow} />\n                        &nbsp;&nbsp;&nbsp;\n                        ArtDDICT\n                    </div></marquee>\n                <div className=\"auctionMain\">\n                    <div className=\"auctionMainWrap\">\n                        <div className=\"auctionMainFilter\">\n                            <div className=\"auctionMainFilterLeft\">\n                                <div className=\"auctionBreadcrumb\">\n                                    <AucBreadcrumb />\n                                </div>\n                                <div className=\"auctionArrangement cn-font\">\n                                    排列\n                                </div>\n                                <div className=\"auctionArrangementInput\">\n                                    <select\n                                        className=\"auc-select pl-1 cn-font\"\n                                        onChange={handleChangeSelect}\n                                        name=\"name\"\n                                        id=\"name\">\n                                        <option style={{ color: '#707070' }} value=\"\">\n                                            推薦\n                                        </option>\n                                        <option value=\"t-more\">剩餘時間(多至少)</option>\n                                        <option value=\"t-less\">剩餘時間(少至多)</option>\n                                        <option value=\"p-less\">價格(低至高)</option>\n                                        <option value=\"p-high\">價格(高至低)</option>\n                                    </select>\n                                </div>\n                                <button className=\"auc-Search\">\n                                    <IoIosSearch />\n                                </button>\n                                <input\n                                    className=\"auc-Searchbox\"\n                                    value={search}\n                                    onChange={(event) => { setSearch(event.target.value) }}\n                                />\n                                <div className=\"auctionNumberOfProduct cn-font\">\n                                    Showing 1-9 of 27\n                                </div>\n                            </div>\n                            <div className=\"auctionMainFilterRight\">\n                                <div>price range</div>\n                                <AuctionSlider />\n                            </div>\n                        </div>\n                        <div className=\"auctionMainContent cn-font\">\n                            <div className=\"auctionsidebar cn_font\">\n                                <div className=\"auctionsidebarTitle \">美術館商品</div>\n                                <ul>\n                                    <li>畫作</li>\n                                    <li>服飾</li>\n                                    <li>家飾</li>\n                                    <li>文具</li>\n                                    <li>書籍</li>\n                                    <li>配件</li>\n                                </ul>\n                            </div>\n                            <AuctionProductList\n                                // data={data}\n                                search={search}\n                                setSearch={setSearch}\n                                arrangement={arrangement}\n                                getAucProFromServer={getAucProFromServer}\n                                getAucProArrFromServer={getAucProArrFromServer}\n                                aucInfo={aucInfo}\n                                setAucInfo={setAucInfo}\n                                TimeRemaining={TimeRemaining}\n                                aucRemainT={aucRemainT}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </>\n    );\n}\n\nexport default withRouter(Auction);"]},"metadata":{},"sourceType":"module"}