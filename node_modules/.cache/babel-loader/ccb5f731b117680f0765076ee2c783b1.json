{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/event/EventDetail.js\",\n    _s = $RefreshSig$();\n\nimport { React, useState, useEffect, useRef } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport $ from 'jquery';\nimport { Container, Row, Collapse } from 'react-bootstrap';\nimport Cookies from 'universal-cookie'; // Component\n\nimport EHeader from './components/Darkheader';\nimport BreadCrumb from './components/EventBreadCrumb';\nimport EventMore from './components/EventMore'; // react icons\n\nimport { IoIosArrowForward, IoIosHeart, IoMdAdd, IoMdRemove } from 'react-icons/io'; // Pictures\n\nimport TopicPic from './images/event/007.jpg'; // styles\n\nimport './style/reset.css';\nimport './style/fontAndBtn.scss';\nimport './style/eventDetail.scss'; // open weather\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst myKey = \"24eb2177b3c656250ca2c17ba3389113\";\n\nfunction EventDetail(props) {\n  _s();\n\n  const id = props.match.params.id; //開合功能state\n\n  const [open, setOpen] = useState(true);\n  const [open2, setOpen2] = useState(false);\n  const [open3, setOpen3] = useState(false);\n  const [open4, setOpen4] = useState(false);\n  const [eventName, setEventName] = useState('');\n  const [eventId, setEventId] = useState('');\n  const [eventDateStart, setEventDateStart] = useState('');\n  const [eventDateEnd, setEventDateEnd] = useState('');\n  const [eventDesc, setEventDesc] = useState('');\n  const [eventPrice, setEventPrice] = useState('');\n  const [eventImg, setEventImg] = useState('');\n  const [eventCity, setEventCity] = useState('');\n  const [userId, setUserId] = useState(1);\n  const [eventClass, setEventClass] = useState('C');\n  const [cityId, setCityid] = useState('Taipei');\n  const [temp, setTemp] = useState();\n  const [tempIcon, setTempIcon] = useState('');\n  const [weather, setWeather] = useState(''); // 加入購物車\n\n  const [isShared, setIsShared] = useState(true); // 確認是否已儲存\n\n  const [isFav, setIsFav] = useState(false);\n  const [sqleventid, setSqlEventId] = useState(''); // 票價數量\n\n  const [ticketNum, setTicketNum] = useState(1); // 票種 Ref\n\n  const ticketRef = useRef(); // 購物車\n\n  const [cartItems, setCartItems] = useState([]);\n  const cookies = new Cookies(); // 票種useState\n\n  const [tickettype, setTicketType] = useState('成人票');\n\n  async function getEventIdServer() {\n    const url = `http://localhost:6005/event/event-list/${id}`;\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json();\n    setEventName(data.eventName);\n    setEventId(data.eventId);\n    setEventDateStart(data.eventDateStart);\n    setEventDateEnd(data.eventDateEnd);\n    setEventDesc(data.eventDescription);\n    setEventPrice(data.eventPrice);\n    setEventClass(data.eventClass);\n    setEventImg(data.eventImg);\n    setEventCity(data.cityName);\n    setIsShared(data.shareId);\n    setCityid(data.cityFullName); // 加入購物車\n\n    setSqlEventId(data.id);\n  }\n\n  async function addEventFavSever() {\n    const newData = {\n      eventId,\n      userId\n    }; // 連接的伺服器資料網址\n\n    const url = 'http://localhost:6005/event/eventFav'; // 注意資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'POST',\n      body: JSON.stringify(newData),\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json();\n  }\n\n  async function getWeather() {\n    let weatherUrl = `https://api.openweathermap.org/data/2.5/weather?q=${cityId}&appid=${myKey}`;\n    let weather = await fetch(weatherUrl);\n    let weatherData = await weather.json();\n    let tempNum = (weatherData.main.temp - 273.15).toFixed(1);\n    setTemp(tempNum);\n    setWeather(weatherData.weather[0].main);\n    setTempIcon(weatherData.weather[0].icon);\n  }\n\n  async function getEventFavServer() {\n    const url = `http://localhost:6005/event/isEventFav/${userId}`;\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json();\n    const favArray = data.map(fav => {\n      return fav.eventId;\n    }); // 確認是否有該eventId\n\n    if (!(favArray.indexOf(eventId) == -1)) {\n      console.log(favArray.indexOf(eventId));\n      console.log(eventId);\n      setIsFav(true);\n    } else {\n      console.log('No match' + favArray.indexOf(eventId));\n      console.log(eventId);\n      setIsFav(false);\n    }\n  }\n\n  console.log(temp, weather, tempIcon);\n  let shareBtn = '';\n\n  if (isShared) {\n    shareBtn = 'block';\n  } else {\n    shareBtn = 'none';\n  }\n\n  useEffect(() => {\n    getEventIdServer();\n    getWeather();\n    getEventFavServer();\n    $(ticketRef.current).on('click', () => {\n      $(ticketRef.current).css('background', 'black').css('color', 'white');\n    });\n  }, []);\n  useEffect(() => {\n    getWeather();\n    getEventFavServer();\n  }, [cityId]);\n  useEffect(() => {\n    getEventFavServer();\n  }, [eventId]);\n  useEffect(() => {\n    getEventIdServer();\n  }, [id]);\n  $('.e-ticket-type').click(function () {\n    $(this).css('background', 'black').css('color', 'white').siblings().css('background', 'transparent').css('color', 'black');\n  });\n  $('.ed-like-icon2').click(function () {\n    $(this).css('color', 'white');\n  });\n  $('.ed-like-icon').click(function () {\n    $(this).css('color', '#81FC4D');\n  });\n  useEffect(() => {\n    if (ticketNum < 1) {\n      setTicketNum(1);\n    }\n\n    if (ticketNum > 50) {\n      setTicketNum(50);\n    }\n  }, [ticketNum]); //didMount就load FB套件\n\n  useEffect(() => {\n    if (window.FB) {\n      console.log('window.FB', window.FB);\n      window.FB.XFBML.parse();\n    }\n\n    window.fbAsyncInit = function () {\n      window.FB.init({\n        appId: '{4372278766148991}',\n        cookie: true,\n        xfbml: true,\n        version: '{api-version}'\n      });\n      window.FB.AppEvents.logPageView();\n    };\n\n    (function (d, s, id) {\n      var js,\n          fjs = d.getElementsByTagName(s)[0];\n\n      if (d.getElementById(id)) {\n        return;\n      }\n\n      js = d.createElement(s);\n      js.id = id;\n      js.src = 'https://connect.facebook.net/en_US/sdk.js';\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, 'script', 'facebook-jssdk');\n  }, []);\n  /**\n   * 更新 event Cookie\n   *\n   * @param {Object} event 欲改變的目標 event.\n   * @param {number} quantityNum 欲更新event.qty到的數字.\n   * @param {string} type 根據不同type，event.qty 更新方法不同\n   *\n   *\n   */\n  // 加入購物車\n\n  const onCookie = (eventid, quantityNum, type) => {\n    console.log(type);\n    console.log(eventid);\n    let cookieEventId = eventid.sqleventid + '-' + type.tickettype;\n    let updateCookie = [];\n    let cookieEvent = cookies.get('event'); // 取得 event cookie\n\n    if (cookieEvent) {\n      // 如果有已存在的 event cookie\n      // 查看cookie裡面的 event id\n      const idSet = new Set();\n\n      for (let i in cookieEvent) {\n        idSet.add(cookieEvent[i].id);\n      } // event 在 event cookie 中\n\n\n      if (idSet.has(cookieEventId)) {\n        for (let i in cookieEvent) {\n          if (cookieEvent[i].id == cookieEventId) {\n            // 如果event是從Input,數量直接到指定數字\n            cookieEvent[i].qty += quantityNum.ticketNum;\n          }\n        }\n      } else {\n        // 如果被改變的event 不在 event cookie 中\n        // 初始數量為1\n        let eventjson = {};\n        eventjson.id = cookieEventId;\n        eventjson.qty = quantityNum.ticketNum;\n        cookieEvent.push(eventjson);\n      } // 如果被改變後的event數量>0，加入在cookie 中\n\n\n      for (let i in cookieEvent) {\n        if (cookieEvent[i].qty > 0) {\n          updateCookie.push(cookieEvent[i]);\n        }\n      }\n    } else {\n      // 如果沒有已存在的 event cookie\n      // 初始數量為1\n      let eventjson = {};\n      eventjson.id = cookieEventId;\n      eventjson.qty = quantityNum.ticketNum;\n      updateCookie.push(eventjson);\n    }\n\n    cookies.set('event', updateCookie, {\n      path: '/'\n    }); //更新Cookie\n\n    console.log(updateCookie);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reduce-width\",\n      children: [/*#__PURE__*/_jsxDEV(EHeader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        className: \"ed-hero-zone \",\n        fluid: true,\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          className: \"py-4 ed-bread both-padding\",\n          children: /*#__PURE__*/_jsxDEV(BreadCrumb, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"both-padding ed-detail-main\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"col-12 p-0 cn-font ed-event-name py-4\",\n            children: eventName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"col-12 p-0 mb-5\",\n            src: `http://localhost:6005/eventpic/event/${eventImg}`,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"ed-detail-intro both-padding mt-5 pb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-6 p-0 d-flex flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"col-10 cn-font p-0\",\n              children: eventName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this), isFav ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ed-like-icon2 col-2\",\n              onClick: () => {// addEventFavSever()\n              },\n              children: /*#__PURE__*/_jsxDEV(IoIosHeart, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ed-like-icon col-2\",\n              onClick: () => {\n                addEventFavSever();\n              },\n              children: /*#__PURE__*/_jsxDEV(IoIosHeart, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"col-12 cn-font p-0 mt-3\",\n              children: [\"\\u6642\\u9593\\uFF1A\", eventDateStart.split('-')[0], \"\\u5E74\", eventDateStart.split('-')[1], \"\\u6708\\uFF5E\", eventDateEnd.split('-')[0], \"\\u5E74\", eventDateEnd.split('-')[1], \"\\u6708\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"col-12 cn-font p-0 mt-2\",\n              children: [\"\\u5730\\u9EDE\\uFF1A\", eventCity]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this), eventClass === 'C' ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-6 d-flex justify-content-between align-items-center flex-wrap ed-weather pl-5 pt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-5 d-flex flex-wrap\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"cn-font col-12 p-0\",\n                children: [eventCity, \"\\u5929\\u5019\\uFF1A\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"eng-font-regular col-12 p-0\",\n                children: weather\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-5 d-flex flex-wrap\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"cn-font col-12 p-0\",\n                children: \"\\u6C23\\u6EAB\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"eng-font-regular col-12 p-0\",\n                children: [temp, \"\\xB0C\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ed-commu-btn  col-6 d-flex justify-content-center align-items-center\",\n            children: [isShared ? /*#__PURE__*/_jsxDEV(Link, {\n              to: `/event/event-list/detail/update/${id}`,\n              className: \"col-6\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"cn-font px-0\" // onClick={(e) => e.preventDefault()}\n                ,\n                children: \"\\u4FEE\\u6539\\u4F5C\\u54C1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Link, {\n              to: `/event/event-list/detail/upload/${id}`,\n              className: \"col-6\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"cn-font px-0\" // onClick={(e) => e.preventDefault()}\n                ,\n                children: \"\\u4E0A\\u50B3\\u4F5C\\u54C1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: `/event/event-list/detail/share/${id}`,\n              className: \"col-6\",\n              style: {\n                textDecoration: 'none'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"cn-font px-0\" // onClick={(e) => e.preventDefault()}\n                ,\n                style: {\n                  display: `${shareBtn}`\n                },\n                children: \"\\u89C0\\u8CDE\\u4F5C\\u54C1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"left-padding cn-font \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-8 pl-0 ed-detail-content\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 p-0 \",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: e => {\n                  e.preventDefault();\n                  setOpen(!open);\n                },\n                \"aria-controls\": \"example-collapse-text\",\n                \"aria-expanded\": open,\n                className: \"ed-detail-btn col-12 d-flex justify-content-center cn-font p-0 my-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"mr-auto\",\n                  children: \"\\u6D3B\\u52D5\\u4ECB\\u7D39\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                in: open,\n                className: \"col-12 p-0  mb-5\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  id: \"example-collapse-text\",\n                  children: eventDesc\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: e => {\n                  e.preventDefault();\n                  setOpen2(!open2);\n                },\n                \"aria-controls\": \"example-collapse-text\",\n                \"aria-expanded\": open2,\n                className: \"ed-detail-btn col-12 d-flex justify-content-center cn-font p-0 py-5 ed-rules\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"mr-auto\",\n                  children: \"\\u6D3B\\u52D5\\u898F\\u7BC4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 497,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 496,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                in: open2,\n                className: \"col-12 p-0 ed-detail-content mb-5\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  id: \"example-collapse-text\",\n                  children: [\"|| \\u70BA\\u793A\\u7BC4\\u4EE5\\u6D3B\\u52D5\\u4ECB\\u7D39\\u6587\\u5B57\\u53D6\\u4EE3\\u6D3B\\u52D5\\u898F\\u7BC4 ||\", ' ', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 506,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 507,\n                    columnNumber: 21\n                  }, this), eventDesc]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 p-0 d-flex justify-content-center flex-wrap e-fb-area py-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: e => {\n                    e.preventDefault();\n                    setOpen4(!open4);\n                  },\n                  \"aria-controls\": \"example-collapse-text\",\n                  \"aria-expanded\": open4,\n                  className: \"ed-comment e-btn-l mb-5 px-2\",\n                  children: \"Facebook \\u7559\\u8A00\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                  in: open4,\n                  className: \"col-12 p-0 mt-3 mb-5 \",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-12 p-0 e-fb-cmt\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"fb-comments mb-5\",\n                      \"data-href\": \"http://localhost:3000/event/event-list/detail\",\n                      \"data-width\": \"100%\",\n                      \"data-numposts\": \"5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 560,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 555,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-4 ed-ticket h-100\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 d-flex justify-content-center flex-wrap\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"mt-3 col-12\",\n                children: [\"\\u99AC\\u4E0A\\u6436\\u7968!\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [/*#__PURE__*/_jsxDEV(IoIosArrowForward, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 596,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(IoIosArrowForward, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 597,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(IoIosArrowForward, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 598,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(IoIosArrowForward, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 599,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 595,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"col-12 pb-4 mb-4\",\n                children: [\"\\u7968\\u50F9\\uFF1ANT$ \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: eventPrice\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 603,\n                  columnNumber: 26\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"col-12 d-block d-flex flex-wrap justify-content-between\",\n                action: \"\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.preventDefault();\n                    setTicketType('成人票');\n                  },\n                  type: \"button\",\n                  className: \"col-5 e-ticket-type \",\n                  children: \"\\u6210\\u4EBA\\u7968\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.preventDefault();\n                    setTicketType('孩童票');\n                  },\n                  type: \"button\",\n                  className: \"col-5 e-ticket-type\",\n                  children: \"\\u5B69\\u7AE5\\u7968\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 619,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.preventDefault();\n                    setTicketType('敬老票');\n                  },\n                  type: \"button\",\n                  className: \"col-5 e-ticket-type\",\n                  children: \"\\u656C\\u8001\\u7968\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 629,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.preventDefault();\n                    setTicketType('愛心票');\n                  },\n                  type: \"button\",\n                  className: \"col-5 e-ticket-type\",\n                  children: \"\\u611B\\u5FC3\\u7968\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 639,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-12 pb-2 ticket-num mt-4 p-0\",\n                  children: \"\\u6578\\u91CF\\uFF1A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 649,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12 p-0 mb-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"ticket-count\",\n                    type: \"button\",\n                    onClick: e => {\n                      e.preventDefault();\n                      setTicketNum(ticketNum - 1);\n                    },\n                    children: /*#__PURE__*/_jsxDEV(IoMdRemove, {\n                      className: \"ed-count-icon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 661,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 653,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ticket-amount\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: ticketNum\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 664,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 663,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"ticket-count\",\n                    type: \"button\",\n                    onClick: e => {\n                      e.preventDefault();\n                      setTicketNum(ticketNum + 1);\n                    },\n                    children: /*#__PURE__*/_jsxDEV(IoMdAdd, {\n                      className: \"ed-count-icon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 675,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 667,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 652,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-12 mb-1 ed-total p-0\",\n                  children: [\"\\u5C0F\\u8A08\\uFF1ANT$\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: eventPrice * ticketNum\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 680,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12 p-0 mb-5 border-0\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => {\n                      e.preventDefault();\n                      onCookie({\n                        sqleventid\n                      }, {\n                        ticketNum\n                      }, {\n                        tickettype\n                      });\n                    },\n                    className: \"col-12 p-0 ed-submit-btn\",\n                    type: \"submit\",\n                    children: \"\\u52A0\\u5165\\u8CFC\\u7269\\u8ECA\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 684,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 683,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 605,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        className: \"ed-more\",\n        fluid: true,\n        children: /*#__PURE__*/_jsxDEV(EventMore, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 705,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 704,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(EventDetail, \"xL09Sehtl7dJiuMViBk7FS6K9io=\");\n\n_c = EventDetail;\nexport default _c2 = withRouter(EventDetail);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"EventDetail\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/event/EventDetail.js"],"names":["React","useState","useEffect","useRef","Link","withRouter","$","Container","Row","Collapse","Cookies","EHeader","BreadCrumb","EventMore","IoIosArrowForward","IoIosHeart","IoMdAdd","IoMdRemove","TopicPic","myKey","EventDetail","props","id","match","params","open","setOpen","open2","setOpen2","open3","setOpen3","open4","setOpen4","eventName","setEventName","eventId","setEventId","eventDateStart","setEventDateStart","eventDateEnd","setEventDateEnd","eventDesc","setEventDesc","eventPrice","setEventPrice","eventImg","setEventImg","eventCity","setEventCity","userId","setUserId","eventClass","setEventClass","cityId","setCityid","temp","setTemp","tempIcon","setTempIcon","weather","setWeather","isShared","setIsShared","isFav","setIsFav","sqleventid","setSqlEventId","ticketNum","setTicketNum","ticketRef","cartItems","setCartItems","cookies","tickettype","setTicketType","getEventIdServer","url","request","Request","method","headers","Headers","Accept","response","fetch","data","json","eventDescription","cityName","shareId","cityFullName","addEventFavSever","newData","body","JSON","stringify","getWeather","weatherUrl","weatherData","tempNum","main","toFixed","icon","getEventFavServer","favArray","map","fav","indexOf","console","log","shareBtn","current","on","css","click","siblings","window","FB","XFBML","parse","fbAsyncInit","init","appId","cookie","xfbml","version","AppEvents","logPageView","d","s","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","onCookie","eventid","quantityNum","type","cookieEventId","updateCookie","cookieEvent","get","idSet","Set","i","add","has","qty","eventjson","push","set","path","split","textDecoration","display","e","preventDefault"],"mappings":"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","sourcesContent":["import { React, useState, useEffect, useRef } from 'react'\nimport { Link, withRouter } from 'react-router-dom'\nimport $ from 'jquery'\nimport { Container, Row, Collapse } from 'react-bootstrap'\nimport Cookies from 'universal-cookie'\n\n// Component\nimport EHeader from './components/Darkheader'\nimport BreadCrumb from './components/EventBreadCrumb'\n\nimport EventMore from './components/EventMore'\n\n// react icons\nimport {\n  IoIosArrowForward,\n  IoIosHeart,\n  IoMdAdd,\n  IoMdRemove,\n} from 'react-icons/io'\n\n// Pictures\nimport TopicPic from './images/event/007.jpg'\n\n// styles\nimport './style/reset.css'\nimport './style/fontAndBtn.scss'\nimport './style/eventDetail.scss'\n\n\n\n// open weather\nconst myKey = \"24eb2177b3c656250ca2c17ba3389113\"\n\nfunction EventDetail(props) {\n  const id = props.match.params.id\n\n  //開合功能state\n  const [open, setOpen] = useState(true)\n  const [open2, setOpen2] = useState(false)\n  const [open3, setOpen3] = useState(false)\n  const [open4, setOpen4] = useState(false)\n\n  const [eventName, setEventName] = useState('')\n  const [eventId, setEventId] = useState('')\n  const [eventDateStart, setEventDateStart] = useState('')\n  const [eventDateEnd, setEventDateEnd] = useState('')\n  const [eventDesc, setEventDesc] = useState('')\n  const [eventPrice, setEventPrice] = useState('')\n  const [eventImg, setEventImg] = useState('')\n  const [eventCity, setEventCity] = useState('')\n  const [userId, setUserId] = useState(1)\n  const [eventClass, setEventClass] = useState('C')\n  const [cityId, setCityid] = useState('Taipei')\n  const [temp, setTemp] = useState()\n  const [tempIcon, setTempIcon] = useState('')\n  const [weather, setWeather] = useState('')\n  // 加入購物車\n  const [isShared, setIsShared] = useState(true)\n\n  // 確認是否已儲存\n  const [isFav, setIsFav] = useState(false)\n\n  const [sqleventid, setSqlEventId] = useState('')\n\n  // 票價數量\n  const [ticketNum, setTicketNum] = useState(1)\n  // 票種 Ref\n  const ticketRef = useRef()\n\n  // 購物車\n  const [cartItems, setCartItems] = useState([])\n  const cookies = new Cookies()\n\n  // 票種useState\n  const [tickettype, setTicketType] = useState('成人票')\n\n  async function getEventIdServer() {\n    const url = `http://localhost:6005/event/event-list/${id}`\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n\n    const response = await fetch(request)\n    const data = await response.json()\n\n    setEventName(data.eventName)\n    setEventId(data.eventId)\n    setEventDateStart(data.eventDateStart)\n    setEventDateEnd(data.eventDateEnd)\n    setEventDesc(data.eventDescription)\n    setEventPrice(data.eventPrice)\n    setEventClass(data.eventClass)\n    setEventImg(data.eventImg)\n    setEventCity(data.cityName)\n    setIsShared(data.shareId)\n    setCityid(data.cityFullName)\n    // 加入購物車\n    setSqlEventId(data.id)\n  }\n\n  async function addEventFavSever() {\n   \n    const newData = { eventId, userId }\n\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/event/eventFav'\n\n    // 注意資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'POST',\n      body: JSON.stringify(newData),\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      }),\n    })\n\n    const response = await fetch(request)\n    const data = await response.json()\n\n    \n  }\n\n  async function getWeather() {\n    let weatherUrl = `https://api.openweathermap.org/data/2.5/weather?q=${cityId}&appid=${myKey}`\n    let weather = await fetch(weatherUrl)\n    let weatherData = await weather.json()\n    let tempNum = (weatherData.main.temp - 273.15).toFixed(\n      1\n    )\n    setTemp(tempNum)\n    setWeather(weatherData.weather[0].main)\n    setTempIcon(weatherData.weather[0].icon)\n  }\n\n\n  async function getEventFavServer() {\n    const url = `http://localhost:6005/event/isEventFav/${userId}`\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n\n    const response = await fetch(request)\n    const data = await response.json()\n\n    const favArray = data.map((fav)=>{\n      return fav.eventId\n    })\n\n\n    // 確認是否有該eventId\n    if (!(favArray.indexOf(eventId) == -1)){\n      console.log(favArray.indexOf(eventId))\n      console.log(eventId)\n      setIsFav(true)\n    }else{\n      console.log(\n        'No match' + favArray.indexOf(eventId)\n      )\n      console.log(eventId)\n      setIsFav(false)\n    }\n\n    \n  }\n\n  console.log(temp, weather, tempIcon)\n\n  let shareBtn = ''\n  if (isShared) {\n    shareBtn = 'block'\n  } else {\n    shareBtn = 'none'\n  }\n\n  useEffect(() => {\n    getEventIdServer()\n    getWeather()\n    getEventFavServer()\n    $(ticketRef.current).on('click', () => {\n      $(ticketRef.current)\n        .css('background', 'black')\n        .css('color', 'white')\n    })\n  }, [])\n\n  useEffect(() => {\n    getWeather()\n    getEventFavServer()\n  }, [cityId])\n\n  useEffect(() => {\n    getEventFavServer()\n  }, [eventId])\n\n  useEffect(() => {\n    getEventIdServer()\n  }, [id])\n\n  $('.e-ticket-type').click(function () {\n    $(this)\n      .css('background', 'black')\n      .css('color', 'white')\n      .siblings()\n      .css('background', 'transparent')\n      .css('color', 'black')\n  })\n\n  $('.ed-like-icon2').click(function () {\n    $(this)\n      .css('color', 'white')\n  })\n\n  $('.ed-like-icon').click(function () {\n    $(this).css('color', '#81FC4D')\n  })\n\n  useEffect(() => {\n    if (ticketNum < 1) {\n      setTicketNum(1)\n    }\n    if (ticketNum > 50) {\n      setTicketNum(50)\n    }\n  }, [ticketNum])\n\n  //didMount就load FB套件\n  useEffect(() => {\n    if (window.FB) {\n      console.log('window.FB', window.FB)\n      window.FB.XFBML.parse()\n    }\n    window.fbAsyncInit = function () {\n      window.FB.init({\n        appId: '{4372278766148991}',\n        cookie: true,\n        xfbml: true,\n        version: '{api-version}',\n      })\n      window.FB.AppEvents.logPageView()\n    }\n    ;(function (d, s, id) {\n      var js,\n        fjs = d.getElementsByTagName(s)[0]\n      if (d.getElementById(id)) {\n        return\n      }\n      js = d.createElement(s)\n      js.id = id\n      js.src = 'https://connect.facebook.net/en_US/sdk.js'\n      fjs.parentNode.insertBefore(js, fjs)\n    })(document, 'script', 'facebook-jssdk')\n  }, [])\n\n  /**\n   * 更新 event Cookie\n   *\n   * @param {Object} event 欲改變的目標 event.\n   * @param {number} quantityNum 欲更新event.qty到的數字.\n   * @param {string} type 根據不同type，event.qty 更新方法不同\n   *\n   *\n   */\n\n  // 加入購物車\n  const onCookie = (eventid, quantityNum, type) => {\n    console.log(type)\n    console.log(eventid)\n    let cookieEventId =\n      eventid.sqleventid + '-' + type.tickettype\n    let updateCookie = []\n    let cookieEvent = cookies.get('event') // 取得 event cookie\n\n    if (cookieEvent) {\n      // 如果有已存在的 event cookie\n      // 查看cookie裡面的 event id\n      const idSet = new Set()\n      for (let i in cookieEvent) {\n        idSet.add(cookieEvent[i].id)\n      }\n      // event 在 event cookie 中\n      if (idSet.has(cookieEventId)) {\n        for (let i in cookieEvent) {\n          if (cookieEvent[i].id == cookieEventId) {\n            // 如果event是從Input,數量直接到指定數字\n            cookieEvent[i].qty += quantityNum.ticketNum\n          }\n        }\n      } else {\n        // 如果被改變的event 不在 event cookie 中\n        // 初始數量為1\n        let eventjson = {}\n        eventjson.id = cookieEventId\n        eventjson.qty = quantityNum.ticketNum\n        cookieEvent.push(eventjson)\n      }\n      // 如果被改變後的event數量>0，加入在cookie 中\n      for (let i in cookieEvent) {\n        if (cookieEvent[i].qty > 0) {\n          updateCookie.push(cookieEvent[i])\n        }\n      }\n    } else {\n      // 如果沒有已存在的 event cookie\n      // 初始數量為1\n      let eventjson = {}\n      eventjson.id = cookieEventId\n      eventjson.qty = quantityNum.ticketNum\n      updateCookie.push(eventjson)\n    }\n    cookies.set('event', updateCookie, { path: '/' }) //更新Cookie\n    console.log(updateCookie)\n  }\n\n  return (\n    <>\n      <div className=\"reduce-width\">\n        <EHeader />\n        <Container className=\"ed-hero-zone \" fluid>\n          <Row className=\"py-4 ed-bread both-padding\">\n            <BreadCrumb />\n          </Row>\n          <Row className=\"both-padding ed-detail-main\">\n            <h4 className=\"col-12 p-0 cn-font ed-event-name py-4\">\n              {eventName}\n            </h4>\n            <img\n              className=\"col-12 p-0 mb-5\"\n              src={`http://localhost:6005/eventpic/event/${eventImg}`}\n              alt=\"\"\n            />\n          </Row>\n          <Row className=\"ed-detail-intro both-padding mt-5 pb-5\">\n            <div className=\"col-6 p-0 d-flex flex-wrap\">\n              <h4 className=\"col-10 cn-font p-0\">\n                {eventName}\n              </h4>\n              {isFav ? (\n                <div\n                  className=\"ed-like-icon2 col-2\"\n                  onClick={() => {\n                    // addEventFavSever()\n                  }}\n                >\n                  <IoIosHeart />\n                </div>\n              ) : (\n                <div\n                  className=\"ed-like-icon col-2\"\n                  onClick={() => {\n                    addEventFavSever()\n                  }}\n                >\n                  <IoIosHeart />\n                </div>\n              )}\n      \n              <p className=\"col-12 cn-font p-0 mt-3\">\n                時間：{eventDateStart.split('-')[0]}年\n                {eventDateStart.split('-')[1]}月～\n                {eventDateEnd.split('-')[0]}年\n                {eventDateEnd.split('-')[1]}月\n              </p>\n              <p className=\"col-12 cn-font p-0 mt-2\">\n                地點：{eventCity}\n              </p>\n            </div>\n            {eventClass === 'C' ? (\n              <div\n                className=\"col-6 d-flex justify-content-between\n            align-items-center flex-wrap ed-weather pl-5 pt-4\"\n              >\n                <div className=\"col-5 d-flex flex-wrap\">\n                  <h6 className=\"cn-font col-12 p-0\">\n                    {eventCity}天候：\n                  </h6>\n                  <p className=\"eng-font-regular col-12 p-0\">\n                    {weather}\n                  </p>\n                  {/* <img\n                    src={`http://openweathermap.org/img/wn/${tempIcon}@2x.png`}\n                    alt=\"\"\n                  /> */}\n                </div>\n                <div className=\"col-5 d-flex flex-wrap\">\n                  <h6 className=\"cn-font col-12 p-0\">\n                    氣溫：\n                  </h6>\n                  <p className=\"eng-font-regular col-12 p-0\">\n                    {temp}°C\n                  </p>\n                </div>\n                <div className=\"col-6\"></div>\n              </div>\n            ) : (\n              <div\n                className=\"ed-commu-btn  col-6 d-flex justify-content-center\n            align-items-center\"\n              >\n                {isShared ? (\n                  <Link\n                    to={`/event/event-list/detail/update/${id}`}\n                    className=\"col-6\"\n                  >\n                    <button\n                      type=\"button\"\n                      className=\"cn-font px-0\"\n                      // onClick={(e) => e.preventDefault()}\n                    >\n                      修改作品\n                    </button>\n                  </Link>\n                ) : (\n                  <Link\n                    to={`/event/event-list/detail/upload/${id}`}\n                    className=\"col-6\"\n                  >\n                    <button\n                      type=\"button\"\n                      className=\"cn-font px-0\"\n                      // onClick={(e) => e.preventDefault()}\n                    >\n                      上傳作品\n                    </button>\n                  </Link>\n                )}\n                <Link\n                  to={`/event/event-list/detail/share/${id}`}\n                  className=\"col-6\"\n                  style={{ textDecoration: 'none' }}\n                >\n                  <button\n                    type=\"button\"\n                    className=\"cn-font px-0\"\n                    // onClick={(e) => e.preventDefault()}\n                    style={{\n                      display: `${shareBtn}`,\n                    }}\n                  >\n                    觀賞作品\n                  </button>\n                </Link>\n              </div>\n            )}\n          </Row>\n          <Row className=\"left-padding cn-font \">\n            <div className=\"col-8 pl-0 ed-detail-content\">\n              <div className=\"col-12 p-0 \">\n                {/* 第一個按鈕 */}\n                <button\n                  type=\"button\"\n                  onClick={(e) => {\n                    e.preventDefault()\n                    setOpen(!open)\n                  }}\n                  aria-controls=\"example-collapse-text\"\n                  aria-expanded={open}\n                  className=\"ed-detail-btn col-12 d-flex justify-content-center\n                  cn-font p-0 my-5\"\n                >\n                  <span className=\"mr-auto\">活動介紹</span>\n                  <span>\n                    <IoMdRemove />\n                  </span>\n                </button>\n                <Collapse\n                  in={open}\n                  className=\"col-12 p-0  mb-5\"\n                >\n                  <p id=\"example-collapse-text\">\n                    {eventDesc}\n                  </p>\n                </Collapse>\n\n                {/* 第二個按鈕 */}\n                <button\n                  type=\"button\"\n                  onClick={(e) => {\n                    e.preventDefault()\n                    setOpen2(!open2)\n                  }}\n                  aria-controls=\"example-collapse-text\"\n                  aria-expanded={open2}\n                  className=\"ed-detail-btn col-12 d-flex justify-content-center\n                  cn-font p-0 py-5 ed-rules\"\n                >\n                  <span className=\"mr-auto\">活動規範</span>\n                  <span>\n                    <IoMdRemove />\n                  </span>\n                </button>\n                <Collapse\n                  in={open2}\n                  className=\"col-12 p-0 ed-detail-content mb-5\"\n                >\n                  <p id=\"example-collapse-text\">\n                    || 為示範以活動介紹文字取代活動規範 ||{' '}\n                    <br />\n                    <br />\n                    {eventDesc}\n                  </p>\n                </Collapse>\n\n                {/* 第三個按鈕 */}\n                {/* <button\n                  onClick={() => setOpen3(!open3)}\n                  aria-controls=\"example-collapse-text\"\n                  aria-expanded={open3}\n                  className=\"ed-detail-btn col-12 d-flex justify-content-center\n                  cn-font p-0 pt-5 ed-rules mb-5\"\n                >\n                  <span className=\"mr-auto\">活動評價</span>\n                  <span>\n                    <IoMdRemove />\n                  </span>\n                </button>\n                <Collapse\n                  in={open3}\n                  className=\"col-12 p-0 mt-3 mb-5 ed-message\"\n                >\n                  <div\n                    id=\"example-collapse-text\"\n                    className=\"col-12 p-0 ed-message\"\n                  >\n                    <h1>金喚</h1>\n                    <p className=\"mt-2\">\n                      1889年9月，荷蘭後印象派畫家文森特·梵谷（Vincent\n                      van\n                      Gogh）在畫布上用油畫了自畫像。這幅作品可能是梵谷的最後一幅自畫像，是在他離開法國南部聖雷米的普羅旺斯之前不久畫的。這幅畫現在在巴黎的奧賽博物館（Muséed'Orsay）展出。\n                    </p>\n                  </div>\n                </Collapse> */}\n\n                {/* 留言按鈕 */}\n                <div className=\"col-12 p-0 d-flex justify-content-center flex-wrap e-fb-area py-5\">\n                  <div\n                    onClick={(e) => {\n                      e.preventDefault()\n                      setOpen4(!open4)\n                    }}\n                    aria-controls=\"example-collapse-text\"\n                    aria-expanded={open4}\n                    className=\"ed-comment e-btn-l mb-5 px-2\"\n                  >\n                    Facebook 留言\n                  </div>\n                  <Collapse\n                    in={open4}\n                    className=\"col-12 p-0 mt-3 mb-5 \"\n                  >\n                    <div className=\"col-12 p-0 e-fb-cmt\">\n                      <div\n                        className=\"fb-comments mb-5\"\n                        data-href=\"http://localhost:3000/event/event-list/detail\"\n                        data-width=\"100%\"\n                        data-numposts=\"5\"\n                      ></div>\n                      {/* <form\n                        className=\"border-0 d-flex flex-wrap justify-content-center\"\n                        action=\"\"\n                      >\n                        <textarea\n                          className=\"ed-textarea col-12 p-0\"\n                          name=\"\"\n                          id=\"\"\n                          cols=\"30\"\n                          rows=\"10\"\n                        ></textarea>\n                        <button\n                          className=\"ed-leave-msg e-btn-m col-l2 mt-3\"\n                          type=\"submit\"\n                        >\n                          送出評論\n                        </button>\n                      </form> */}\n                    </div>\n                  </Collapse>\n                </div>\n              </div>\n            </div>\n\n            {/* 下訂區塊 */}\n            <div className=\"col-4 ed-ticket h-100\">\n              <div className=\"col-12 d-flex justify-content-center flex-wrap\">\n                <h2 className=\"mt-3 col-12\">\n                  馬上搶票!\n                  <span>\n                    <IoIosArrowForward />\n                    <IoIosArrowForward />\n                    <IoIosArrowForward />\n                    <IoIosArrowForward />\n                  </span>\n                </h2>\n                <p className=\"col-12 pb-4 mb-4\">\n                  票價：NT$ <span>{eventPrice}</span>\n                </p>\n                <form\n                  className=\"col-12 d-block d-flex flex-wrap justify-content-between\"\n                  action=\"\"\n                >\n                  <button\n                    onClick={(e) => {\n                      e.preventDefault()\n                      setTicketType('成人票')\n                    }}\n                    type=\"button\"\n                    className=\"col-5 e-ticket-type \"\n                  >\n                    成人票\n                  </button>\n                  <button\n                    onClick={(e) => {\n                      e.preventDefault()\n                      setTicketType('孩童票')\n                    }}\n                    type=\"button\"\n                    className=\"col-5 e-ticket-type\"\n                  >\n                    孩童票\n                  </button>\n                  <button\n                    onClick={(e) => {\n                      e.preventDefault()\n                      setTicketType('敬老票')\n                    }}\n                    type=\"button\"\n                    className=\"col-5 e-ticket-type\"\n                  >\n                    敬老票\n                  </button>\n                  <button\n                    onClick={(e) => {\n                      e.preventDefault()\n                      setTicketType('愛心票')\n                    }}\n                    type=\"button\"\n                    className=\"col-5 e-ticket-type\"\n                  >\n                    愛心票\n                  </button>\n                  <p className=\"col-12 pb-2 ticket-num mt-4 p-0\">\n                    數量：\n                  </p>\n                  <div className=\"col-12 p-0 mb-4\">\n                    <button\n                      className=\"ticket-count\"\n                      type=\"button\"\n                      onClick={(e) => {\n                        e.preventDefault()\n                        setTicketNum(ticketNum - 1)\n                      }}\n                    >\n                      <IoMdRemove className=\"ed-count-icon\" />\n                    </button>\n                    <div className=\"ticket-amount\">\n                      <p>{ticketNum}</p>\n                    </div>\n\n                    <button\n                      className=\"ticket-count\"\n                      type=\"button\"\n                      onClick={(e) => {\n                        e.preventDefault()\n                        setTicketNum(ticketNum + 1)\n                      }}\n                    >\n                      <IoMdAdd className=\"ed-count-icon\" />\n                    </button>\n                  </div>\n                  <p className=\"col-12 mb-1 ed-total p-0\">\n                    小計：NT$\n                    <span>{eventPrice * ticketNum}</span>\n                  </p>\n\n                  <div className=\"col-12 p-0 mb-5 border-0\">\n                    <button\n                      onClick={(e) => {\n                        e.preventDefault()\n                        onCookie(\n                          { sqleventid },\n                          { ticketNum },\n                          { tickettype }\n                        )\n                      }}\n                      className=\"col-12 p-0 ed-submit-btn\"\n                      type=\"submit\"\n                    >\n                      加入購物車\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </Row>\n        </Container>\n        <Container className=\"ed-more\" fluid>\n          <EventMore />\n        </Container>\n      </div>\n    </>\n  )\n}\n\nexport default withRouter(EventDetail)\n"]},"metadata":{},"sourceType":"module"}