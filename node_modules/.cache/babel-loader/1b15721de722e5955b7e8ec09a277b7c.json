{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/user/MsgEdit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { withRouter, Link, NavLink } from 'react-router-dom';\nimport { Container } from 'react-bootstrap';\nimport { countries, townships } from './data/address'; // styles\n\nimport './styles/MsgEdit.scss';\nimport './styles/classes.css'; // import Menu from './components/Menu'\n\nimport Logoheader from './components/Logoheader';\nimport Breadcrumb from './components/UserBreadcrumb'; // @material-ui\n\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport StyledRadio from './StyledRadio'; // SweetAlert\n\nimport swal from 'sweetalert';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction UserEdit(props) {\n  _s();\n\n  /* \n    透過props傳遞APP所記錄的current_user\n    current_user定義詳見 App.js\n    ！此處檢查無法成功\n  */\n  // const { current_user, setCurrentUser } = props\n  // console.log('current_user = ', current_user)\n  // 載入縣市\n  const [country, setCountry] = useState(-1);\n  const [township, setTownship] = useState(-1);\n  const userid = props.match.params.userid; // console.log(userid)\n  //const [user, setUser] = useState({})\n\n  const [dataLoading, setDataLoading] = useState(false);\n  const [username, setUsername] = useState('');\n  const [name, setName] = useState('');\n  const [gender, setGender] = useState('');\n  const [mobile, setMobile] = useState('');\n  const [birthday, setBirthday] = useState('');\n  const [address, setAddress] = useState('');\n  const [id, setId] = useState('');\n\n  async function getUserFromServer(userid) {\n    // 開啟載入指示\n    setDataLoading(true);\n    /* \n    !!!!!!!!!!!\n    test session\n    !!!!!!!!!!!\n    */\n    // const test_url =\n    //   'http://localhost:6005/users/checklogin'\n    // const test_request = new Request(test_url, {\n    //   method: 'GET',\n    //   headers: new Headers({\n    //     Accept: 'application/json',\n    //     'Content-Type': 'appliaction/json',\n    //   }),\n    // })\n    // const test_response = await fetch(test_request, {\n    //   credentials: 'same-origin',\n    // })\n    // const test_data = await test_response.json()\n    // console.log('req obj = ', test_request)\n    // console.log('res obj = ', test_data)\n    // // 用axios send get request\n    // const adata = await axios.get(test_url, {\n    //   withCredentials: true,\n    //   headers: {\n    //     'Access-Control-Allow-Origin':\n    //       'http://localhost:6005',\n    //   },\n    // })\n    // console.log('new res:', adata)\n    // console.log(`${cookie.load('connect.sid')}`)\n\n    /*\n    !!!!!!!!!!!\n    end test\n    !!!!!!!!!!!\n    */\n    // 連接的伺服器資料網址\n\n    const url = `http://localhost:6005/users/${userid}`; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json();\n    console.log(`[GET] response = ${data.session}`);\n    setUsername(data.username);\n    setName(data.name);\n    setGender(data.gender);\n    setMobile(data.mobile);\n    setId(data.id); // setBirthday(data.birthday)\n\n    if (data.birthday != null) {\n      const myDate = new Date(data.birthday); // 顯示時會扣一天所以硬加回來（後面寫入資料庫時則不會被影響）\n\n      const nextDay = new Date(myDate);\n      nextDay.setDate(myDate.getDate() + 1);\n      const js_date = nextDay.toISOString().substring(0, 10);\n      console.log(`js_date=${js_date}`);\n      setBirthday(js_date);\n    } // setBirthday(data.birthday)\n    // 拆解得到的addres => country, township, addresses\n\n\n    const raw_address = data.address; // const split_address = raw_address.split('_')\n\n    console.log(`raw_address = ${raw_address}`);\n\n    if (data.address != null) {\n      const split_address = raw_address.split('_');\n      console.log(`country = ${split_address[0]}, township = ${split_address[1]}`);\n      setCountry(split_address[0]);\n      setTownship(split_address[1]);\n      setAddress(split_address[2]);\n    }\n  }\n\n  async function updateUserToSever() {\n    // 開啟載入指示\n    setDataLoading(true); // 印出市: countries[country]\n    // 印出區: townships[country][township]\n\n    const whole_address = `${country}_${township}_${address}`; // 準備好送給node的json資料\n\n    const newData = {\n      username,\n      name,\n      gender,\n      mobile,\n      birthday,\n      country,\n      township,\n      address: whole_address // address : _ + _ + _\n\n    }; // 連接的伺服器資料網址\n\n    const url = `http://localhost:6005/users/${userid}`; // 注意資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'PUT',\n      body: JSON.stringify(newData),\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      })\n    });\n    console.log(`data from react = ${JSON.stringify(newData)}`);\n    const response = await fetch(request);\n    const data = await response.json();\n    console.log('伺服器回傳的json資料', data); // 要等驗証過，再設定資料(簡單的直接設定)\n    //直接在一段x秒關掉指示器\n\n    setTimeout(() => {\n      setDataLoading(false);\n      swal({\n        text: '修改成功！！！',\n        icon: 'success',\n        button: false,\n        timer: 3000\n      });\n    }, 1000);\n  } // 一開始就會開始載入資料\n\n\n  useEffect(() => {\n    getUserFromServer(userid);\n  }, []); // 每次users資料有變動就會X秒後關掉載入指示\n\n  useEffect(() => {\n    setTimeout(() => {\n      setDataLoading(false);\n    }, 500);\n  }, [userid]);\n\n  async function logoutToSever() {\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/users/logout'; // 注意資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      })\n    }); // 要等驗証過，再設定資料(簡單的直接設定)\n\n    swal({\n      text: '登出成功！',\n      icon: 'success',\n      button: false,\n      timer: 3000\n    });\n    const response = await fetch(request);\n    const data = await response.json();\n  }\n\n  const loading = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"u-body\",\n      children: [/*#__PURE__*/_jsxDEV(Logoheader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner-border\",\n          role: \"status\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sr-only\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this)\n  }, void 0, false); // const userDataNo = <h2>此會員不存在</h2>\n  // const useridNo = <h2>需要會員id</h2>\n\n\n  const display = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"u-body\",\n      children: [/*#__PURE__*/_jsxDEV(Logoheader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"u-breadcrumb\",\n        children: /*#__PURE__*/_jsxDEV(Breadcrumb, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-bar\",\n        children: [/*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: `/user-msgedit/${userid}`,\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u4FEE\\u6539\\u8CC7\\u6599\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: `/user-orderpro/${userid}`,\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u8A02\\u55AE\\u67E5\\u8A62\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: `/user-coupon/${userid}`,\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u6211\\u7684\\u512A\\u60E0\\u5238\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: `/user-ticket/${userid}`,\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u6211\\u7684\\u7968\\u5238\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: `/user-myfav/${userid}`,\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u6211\\u7684\\u6536\\u85CF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: `/user-auction/${userid}`,\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u7AF6\\u6A19\\u67E5\\u8A62\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: \"/user-login\",\n          onClick: () => {\n            logoutToSever();\n          },\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u767B\\u51FA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        fluid: true,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"u-row d-flex justify-content-around\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"u-usertitleLeft1\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `/user-msgedit/${userid}`,\n              children: \"\\u6703\\u54E1\\u8CC7\\u6599\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"u-usertitleRight1\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `/user-pwdedit/${userid}`,\n              children: \"\\u4FEE\\u6539\\u5BC6\\u78BC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          className: \"u-userData\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group u-form1 cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"username\",\n                children: \"\\u5E33\\u865F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: username,\n                type: \"email\",\n                className: \"form-control\",\n                onChange: event => {\n                  setUsername(event.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group u-form1 cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"name\",\n                children: \"\\u59D3\\u540D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: name,\n                type: \"text\",\n                className: \"form-control\",\n                onChange: event => {\n                  setName(event.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group  u-gender-ckb cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"gender\",\n                children: \"\\u6027\\u5225\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                component: \"fieldset\",\n                children: /*#__PURE__*/_jsxDEV(RadioGroup, {\n                  row: true,\n                  defaultValue: gender,\n                  \"aria-label\": \"gender\",\n                  name: \"customized-radios\",\n                  onChange: event => {\n                    setGender(event.target.value);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"male\",\n                    control: /*#__PURE__*/_jsxDEV(StyledRadio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 369,\n                      columnNumber: 32\n                    }, this),\n                    label: \"\\u7537\",\n                    onChange: event => {\n                      setGender(event.target.value);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"female\",\n                    control: /*#__PURE__*/_jsxDEV(StyledRadio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 377,\n                      columnNumber: 32\n                    }, this),\n                    label: \"\\u5973\",\n                    onChange: event => {\n                      setGender(event.target.value);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 375,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"other\",\n                    control: /*#__PURE__*/_jsxDEV(StyledRadio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 385,\n                      columnNumber: 32\n                    }, this),\n                    label: \"\\u5176\\u4ED6\",\n                    onChange: event => {\n                      setGender(event.target.value);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 383,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group u-form1 cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"tel\",\n                children: \"\\u624B\\u6A5F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: mobile,\n                type: \"tel\",\n                className: \"form-control\",\n                id: \"tel\",\n                onChange: event => {\n                  setMobile(event.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group u-form1 cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"birthday\",\n                children: \"\\u751F\\u65E5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: birthday,\n                type: \"date\",\n                className: \"form-control\",\n                id: \"birthday\",\n                onChange: event => {\n                  setBirthday(event.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group u-form1 cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"address\",\n                children: \"\\u4F4F\\u5740\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"u-Select\",\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"\",\n                  id: \"\",\n                  className: \"u-sel1\",\n                  value: country,\n                  onChange: e => {\n                    setCountry(+e.target.value);\n                    setTownship(-1);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"\\u8ACB\\u9078\\u64C7\\u7E23\\u5E02\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 434,\n                    columnNumber: 21\n                  }, this), countries.map((value, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: index,\n                    children: value\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 436,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"u-Select\",\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"\",\n                  id: \"\",\n                  className: \"u-sel2 mt-5\",\n                  value: township,\n                  onChange: e => {\n                    setTownship(+e.target.value);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"options\", {\n                    children: \"\\u8ACB\\u9078\\u64C7\\u5340\\u57DF\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 453,\n                    columnNumber: 21\n                  }, this), country > -1 && townships[country].map((value, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: index,\n                    children: value\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 27\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: address,\n                type: \"text\",\n                className: \"form-control mt-5\",\n                id: \"address\",\n                onChange: event => {\n                  setAddress(event.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"u-editBtn\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-dark editBtn\",\n                onClick: () => {\n                  updateUserToSever();\n                },\n                children: \"\\u4FEE\\u6539\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: dataLoading ? loading : display\n  }, void 0, false);\n}\n\n_s(UserEdit, \"3XjMyhMASlfGrYgvNxJX8tnQwEQ=\");\n\n_c = UserEdit;\nexport default _c2 = withRouter(UserEdit);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UserEdit\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/user/MsgEdit.js"],"names":["React","useState","useEffect","withRouter","Link","NavLink","Container","countries","townships","Logoheader","Breadcrumb","RadioGroup","FormControlLabel","FormControl","StyledRadio","swal","axios","UserEdit","props","country","setCountry","township","setTownship","userid","match","params","dataLoading","setDataLoading","username","setUsername","name","setName","gender","setGender","mobile","setMobile","birthday","setBirthday","address","setAddress","id","setId","getUserFromServer","url","request","Request","method","headers","Headers","Accept","response","fetch","data","json","console","log","session","myDate","Date","nextDay","setDate","getDate","js_date","toISOString","substring","raw_address","split_address","split","updateUserToSever","whole_address","newData","body","JSON","stringify","setTimeout","text","icon","button","timer","logoutToSever","loading","display","textDecoration","event","target","value","e","map","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { withRouter, Link, NavLink } from 'react-router-dom'\nimport { Container } from 'react-bootstrap'\nimport { countries, townships } from './data/address'\n// styles\nimport './styles/MsgEdit.scss'\nimport './styles/classes.css'\n// import Menu from './components/Menu'\nimport Logoheader from './components/Logoheader'\nimport Breadcrumb from './components/UserBreadcrumb'\n// @material-ui\nimport RadioGroup from '@material-ui/core/RadioGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport FormControl from '@material-ui/core/FormControl'\nimport StyledRadio from './StyledRadio'\n// SweetAlert\nimport swal from 'sweetalert'\nimport axios from 'axios'\n\nfunction UserEdit(props) {\n  /* \n    透過props傳遞APP所記錄的current_user\n    current_user定義詳見 App.js\n    ！此處檢查無法成功\n  */\n  // const { current_user, setCurrentUser } = props\n  // console.log('current_user = ', current_user)\n\n  // 載入縣市\n  const [country, setCountry] = useState(-1)\n  const [township, setTownship] = useState(-1)\n\n  const userid = props.match.params.userid\n  // console.log(userid)\n\n  //const [user, setUser] = useState({})\n  const [dataLoading, setDataLoading] = useState(false)\n\n  const [username, setUsername] = useState('')\n  const [name, setName] = useState('')\n  const [gender, setGender] = useState('')\n  const [mobile, setMobile] = useState('')\n  const [birthday, setBirthday] = useState('')\n  const [address, setAddress] = useState('')\n  const [id, setId] = useState('')\n\n  async function getUserFromServer(userid) {\n    // 開啟載入指示\n    setDataLoading(true)\n\n    /* \n    !!!!!!!!!!!\n    test session\n    !!!!!!!!!!!\n    */\n    // const test_url =\n    //   'http://localhost:6005/users/checklogin'\n    // const test_request = new Request(test_url, {\n    //   method: 'GET',\n    //   headers: new Headers({\n    //     Accept: 'application/json',\n    //     'Content-Type': 'appliaction/json',\n    //   }),\n    // })\n    // const test_response = await fetch(test_request, {\n    //   credentials: 'same-origin',\n    // })\n    // const test_data = await test_response.json()\n    // console.log('req obj = ', test_request)\n    // console.log('res obj = ', test_data)\n\n    // // 用axios send get request\n    // const adata = await axios.get(test_url, {\n    //   withCredentials: true,\n    //   headers: {\n    //     'Access-Control-Allow-Origin':\n    //       'http://localhost:6005',\n    //   },\n    // })\n    // console.log('new res:', adata)\n\n    // console.log(`${cookie.load('connect.sid')}`)\n    /*\n    !!!!!!!!!!!\n    end test\n    !!!!!!!!!!!\n    */\n\n    // 連接的伺服器資料網址\n    const url = `http://localhost:6005/users/${userid}`\n\n    // 注意header資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n\n    const response = await fetch(request)\n    const data = await response.json()\n    console.log(`[GET] response = ${data.session}`)\n\n    setUsername(data.username)\n    setName(data.name)\n    setGender(data.gender)\n    setMobile(data.mobile)\n    setId(data.id)\n    // setBirthday(data.birthday)\n    if (data.birthday != null) {\n      const myDate = new Date(data.birthday)\n      // 顯示時會扣一天所以硬加回來（後面寫入資料庫時則不會被影響）\n      const nextDay = new Date(myDate)\n      nextDay.setDate(myDate.getDate() + 1)\n      const js_date = nextDay.toISOString().substring(0, 10)\n      console.log(`js_date=${js_date}`)\n      setBirthday(js_date)\n    }\n    // setBirthday(data.birthday)\n\n    // 拆解得到的addres => country, township, addresses\n    const raw_address = data.address\n    // const split_address = raw_address.split('_')\n    console.log(`raw_address = ${raw_address}`)\n    if (data.address != null) {\n      const split_address = raw_address.split('_')\n\n      console.log(\n        `country = ${split_address[0]}, township = ${split_address[1]}`\n      )\n\n      setCountry(split_address[0])\n      setTownship(split_address[1])\n      setAddress(split_address[2])\n    }\n  }\n\n  async function updateUserToSever() {\n    // 開啟載入指示\n    setDataLoading(true)\n    // 印出市: countries[country]\n    // 印出區: townships[country][township]\n    const whole_address = `${country}_${township}_${address}`\n    // 準備好送給node的json資料\n    const newData = {\n      username,\n      name,\n      gender,\n      mobile,\n      birthday,\n      country,\n      township,\n      address: whole_address,\n      // address : _ + _ + _\n    }\n\n    // 連接的伺服器資料網址\n    const url = `http://localhost:6005/users/${userid}`\n\n    // 注意資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'PUT',\n      body: JSON.stringify(newData),\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      }),\n    })\n\n    console.log(\n      `data from react = ${JSON.stringify(newData)}`\n    )\n\n    const response = await fetch(request)\n    const data = await response.json()\n\n    console.log('伺服器回傳的json資料', data)\n    // 要等驗証過，再設定資料(簡單的直接設定)\n\n    //直接在一段x秒關掉指示器\n    setTimeout(() => {\n      setDataLoading(false)\n      swal({\n        text: '修改成功！！！',\n        icon: 'success',\n        button: false,\n        timer: 3000,\n      })\n    }, 1000)\n  }\n\n  // 一開始就會開始載入資料\n  useEffect(() => {\n    getUserFromServer(userid)\n  }, [])\n\n  // 每次users資料有變動就會X秒後關掉載入指示\n  useEffect(() => {\n    setTimeout(() => {\n      setDataLoading(false)\n    }, 500)\n  }, [userid])\n\n  async function logoutToSever() {\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/users/logout'\n\n    // 注意資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      }),\n    })\n\n    // 要等驗証過，再設定資料(簡單的直接設定)\n\n    swal({\n      text: '登出成功！',\n      icon: 'success',\n      button: false,\n      timer: 3000,\n    })\n\n    const response = await fetch(request)\n    const data = await response.json()\n  }\n\n  const loading = (\n    <>\n      <div className=\"u-body\">\n        <Logoheader />\n        <div className=\"d-flex justify-content-center\">\n          <div className=\"spinner-border\" role=\"status\">\n            <span className=\"sr-only\">Loading...</span>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n\n  // const userDataNo = <h2>此會員不存在</h2>\n  // const useridNo = <h2>需要會員id</h2>\n\n  const display = (\n    <>\n      <div className=\"u-body\">\n        <Logoheader />\n        <div className=\"u-breadcrumb\">\n          <Breadcrumb />\n        </div>\n        <div className=\"tab-bar\">\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to={`/user-msgedit/${userid}`}\n            style={{ textDecoration: 'none' }}\n          >\n            修改資料\n          </NavLink>\n\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to={`/user-orderpro/${userid}`}\n            style={{ textDecoration: 'none' }}\n          >\n            訂單查詢\n          </NavLink>\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to={`/user-coupon/${userid}`}\n            style={{ textDecoration: 'none' }}\n          >\n            我的優惠券\n          </NavLink>\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to={`/user-ticket/${userid}`}\n            style={{ textDecoration: 'none' }}\n          >\n            我的票券\n          </NavLink>\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to={`/user-myfav/${userid}`}\n            style={{ textDecoration: 'none' }}\n          >\n            我的收藏\n          </NavLink>\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to={`/user-auction/${userid}`}\n            style={{ textDecoration: 'none' }}\n          >\n            競標查詢\n          </NavLink>\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to=\"/user-login\"\n            onClick={() => {\n              logoutToSever()\n            }}\n            style={{ textDecoration: 'none' }}\n          >\n            登出\n          </NavLink>\n        </div>\n        <Container fluid>\n          <div className=\"u-row d-flex justify-content-around\">\n            <div className=\"u-usertitleLeft1\">\n              <Link to={`/user-msgedit/${userid}`}>\n                會員資料\n              </Link>\n            </div>\n            <div className=\"u-usertitleRight1\">\n              <Link to={`/user-pwdedit/${userid}`}>\n                修改密碼\n              </Link>\n            </div>\n          </div>\n          <Container className=\"u-userData\">\n            <form>\n              <div className=\"form-group u-form1 cn-font\">\n                <label for=\"username\">帳號</label>\n                <input\n                  value={username}\n                  type=\"email\"\n                  className=\"form-control\"\n                  onChange={(event) => {\n                    setUsername(event.target.value)\n                  }}\n                />\n              </div>\n              <div className=\"form-group u-form1 cn-font\">\n                <label for=\"name\">姓名</label>\n                <input\n                  value={name}\n                  type=\"text\"\n                  className=\"form-control\"\n                  onChange={(event) => {\n                    setName(event.target.value)\n                  }}\n                />\n              </div>\n\n              <div className=\"form-group  u-gender-ckb cn-font\">\n                <label for=\"gender\">性別</label>\n                <br />\n                <FormControl component=\"fieldset\">\n                  <RadioGroup\n                    row\n                    defaultValue={gender}\n                    aria-label=\"gender\"\n                    name=\"customized-radios\"\n                    onChange={(event) => {\n                      setGender(event.target.value)\n                    }}\n                  >\n                    <FormControlLabel\n                      value=\"male\"\n                      control={<StyledRadio />}\n                      label=\"男\"\n                      onChange={(event) => {\n                        setGender(event.target.value)\n                      }}\n                    />\n                    <FormControlLabel\n                      value=\"female\"\n                      control={<StyledRadio />}\n                      label=\"女\"\n                      onChange={(event) => {\n                        setGender(event.target.value)\n                      }}\n                    />\n                    <FormControlLabel\n                      value=\"other\"\n                      control={<StyledRadio />}\n                      label=\"其他\"\n                      onChange={(event) => {\n                        setGender(event.target.value)\n                      }}\n                    />\n                  </RadioGroup>\n                </FormControl>\n              </div>\n              <div className=\"form-group u-form1 cn-font\">\n                <label for=\"tel\">手機</label>\n                <input\n                  value={mobile}\n                  type=\"tel\"\n                  className=\"form-control\"\n                  id=\"tel\"\n                  onChange={(event) => {\n                    setMobile(event.target.value)\n                  }}\n                />\n              </div>\n\n              <div className=\"form-group u-form1 cn-font\">\n                <label for=\"birthday\">生日</label>\n                <input\n                  value={birthday}\n                  type=\"date\"\n                  className=\"form-control\"\n                  id=\"birthday\"\n                  onChange={(event) => {\n                    setBirthday(event.target.value)\n                  }}\n                />\n              </div>\n\n              <div className=\"form-group u-form1 cn-font\">\n                <label for=\"address\">住址</label>\n                <br />\n                <div className=\"u-Select\">\n                  <select\n                    name=\"\"\n                    id=\"\"\n                    className=\"u-sel1\"\n                    value={country}\n                    onChange={(e) => {\n                      setCountry(+e.target.value)\n                      setTownship(-1)\n                    }}\n                  >\n                    <option>請選擇縣市</option>\n                    {countries.map((value, index) => (\n                      <option key={index} value={index}>\n                        {value}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div className=\"u-Select\">\n                  <select\n                    name=\"\"\n                    id=\"\"\n                    className=\"u-sel2 mt-5\"\n                    value={township}\n                    onChange={(e) => {\n                      setTownship(+e.target.value)\n                    }}\n                  >\n                    <options>請選擇區域</options>\n                    {country > -1 &&\n                      townships[country].map(\n                        (value, index) => (\n                          <option key={index} value={index}>\n                            {value}\n                          </option>\n                        )\n                      )}\n                  </select>\n                </div>\n                <input\n                  value={address}\n                  type=\"text\"\n                  className=\"form-control mt-5\"\n                  id=\"address\"\n                  onChange={(event) => {\n                    setAddress(event.target.value)\n                  }}\n                />\n              </div>\n\n              <div className=\"u-editBtn\">\n                <button\n                  className=\"btn btn-outline-dark editBtn\"\n                  onClick={() => {\n                    updateUserToSever()\n                  }}\n                >\n                  修改\n                </button>\n              </div>\n            </form>\n          </Container>\n        </Container>\n      </div>\n    </>\n  )\n\n  return (\n    <>\n      {/* {!userDataIsExist ? userDataNo : ''}\n      {!userid ? useridNo : ''} */}\n      {dataLoading ? loading : display}\n    </>\n  )\n}\n\nexport default withRouter(UserEdit)\n"]},"metadata":{},"sourceType":"module"}