{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n/**\n * @author lucascassiano / http://lucascassiano.github.io\n * @edited as an ES6 module based on script from mrdoob / http://mrdoob.com/\n */\n\n\nvar _three = require('three');\n\nvar THREE = _interopRequireWildcard(_three);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar OBJLoader = function () {\n  function OBJLoader(manager) {\n    _classCallCheck(this, OBJLoader);\n\n    this.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager;\n    this.materials = null;\n    this.regexp = {\n      // v float float float\n      vertex_pattern: /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n      // vn float float float\n      normal_pattern: /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n      // vt float float\n      uv_pattern: /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n      // f vertex vertex vertex\n      face_vertex: /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\n      // f vertex/uv vertex/uv vertex/uv\n      face_vertex_uv: /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\n      // f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n      face_vertex_uv_normal: /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\n      // f vertex//normal vertex//normal vertex//normal\n      face_vertex_normal: /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\n      // o object_name | g group_name\n      object_pattern: /^[og]\\s*(.+)?/,\n      // s boolean\n      smoothing_pattern: /^s\\s+(\\d+|on|off)/,\n      // mtllib file_reference\n      material_library_pattern: /^mtllib /,\n      // usemtl material_name\n      material_use_pattern: /^usemtl /\n    };\n  }\n\n  _createClass(OBJLoader, [{\n    key: 'load',\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var loader = new THREE.FileLoader(scope.manager);\n      loader.setPath(this.path);\n      loader.load(url, function (text) {\n        onLoad(scope.parse(text));\n      }, onProgress, onError);\n    }\n  }, {\n    key: 'setPath',\n    value: function setPath(value) {\n      this.path = value;\n    }\n  }, {\n    key: 'setMaterials',\n    value: function setMaterials(materials) {\n      this.materials = materials;\n    }\n  }, {\n    key: '_createParserState',\n    value: function _createParserState() {\n      var state = {\n        objects: [],\n        object: {},\n        vertices: [],\n        normals: [],\n        uvs: [],\n        materialLibraries: [],\n        startObject: function startObject(name, fromDeclaration) {\n          // If the current object (initial from reset) is not from a g/o declaration in the parsed\n          // file. We need to use it for the first parsed g/o to keep things in sync.\n          if (this.object && this.object.fromDeclaration === false) {\n            this.object.name = name;\n            this.object.fromDeclaration = fromDeclaration !== false;\n            return;\n          }\n\n          var previousMaterial = this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined;\n\n          if (this.object && typeof this.object._finalize === 'function') {\n            this.object._finalize(true);\n          }\n\n          this.object = {\n            name: name || '',\n            fromDeclaration: fromDeclaration !== false,\n            geometry: {\n              vertices: [],\n              normals: [],\n              uvs: []\n            },\n            materials: [],\n            smooth: true,\n            startMaterial: function startMaterial(name, libraries) {\n              var previous = this._finalize(false); // New usemtl declaration overwrites an inherited material, except if faces were declared\n              // after the material, then it must be preserved for proper MultiMaterial continuation.\n\n\n              if (previous && (previous.inherited || previous.groupCount <= 0)) {\n                this.materials.splice(previous.index, 1);\n              }\n\n              var material = {\n                index: this.materials.length,\n                name: name || '',\n                mtllib: Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : '',\n                smooth: previous !== undefined ? previous.smooth : this.smooth,\n                groupStart: previous !== undefined ? previous.groupEnd : 0,\n                groupEnd: -1,\n                groupCount: -1,\n                inherited: false,\n                clone: function clone(index) {\n                  var cloned = {\n                    index: typeof index === 'number' ? index : this.index,\n                    name: this.name,\n                    mtllib: this.mtllib,\n                    smooth: this.smooth,\n                    groupStart: 0,\n                    groupEnd: -1,\n                    groupCount: -1,\n                    inherited: false\n                  };\n                  cloned.clone = this.clone.bind(cloned);\n                  return cloned;\n                }\n              };\n              this.materials.push(material);\n              return material;\n            },\n            currentMaterial: function currentMaterial() {\n              if (this.materials.length > 0) {\n                return this.materials[this.materials.length - 1];\n              }\n\n              return undefined;\n            },\n            _finalize: function _finalize(end) {\n              var lastMultiMaterial = this.currentMaterial();\n\n              if (lastMultiMaterial && lastMultiMaterial.groupEnd === -1) {\n                lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n                lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n                lastMultiMaterial.inherited = false;\n              } // Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\n\n              if (end && this.materials.length > 1) {\n                for (var mi = this.materials.length - 1; mi >= 0; mi--) {\n                  if (this.materials[mi].groupCount <= 0) {\n                    this.materials.splice(mi, 1);\n                  }\n                }\n              } // Guarantee at least one empty material, this makes the creation later more straight forward.\n\n\n              if (end && this.materials.length === 0) {\n                this.materials.push({\n                  name: '',\n                  smooth: this.smooth\n                });\n              }\n\n              return lastMultiMaterial;\n            }\n          }; // Inherit previous objects material.\n          // Spec tells us that a declared material must be set to all objects until a new material is declared.\n          // If a usemtl declaration is encountered while this new object is being parsed, it will\n          // overwrite the inherited material. Exception being that there was already face declarations\n          // to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n          if (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\") {\n            var declared = previousMaterial.clone(0);\n            declared.inherited = true;\n            this.object.materials.push(declared);\n          }\n\n          this.objects.push(this.object);\n        },\n        finalize: function finalize() {\n          if (this.object && typeof this.object._finalize === 'function') {\n            this.object._finalize(true);\n          }\n        },\n        parseVertexIndex: function parseVertexIndex(value, len) {\n          var index = parseInt(value, 10);\n          return (index >= 0 ? index - 1 : index + len / 3) * 3;\n        },\n        parseNormalIndex: function parseNormalIndex(value, len) {\n          var index = parseInt(value, 10);\n          return (index >= 0 ? index - 1 : index + len / 3) * 3;\n        },\n        parseUVIndex: function parseUVIndex(value, len) {\n          var index = parseInt(value, 10);\n          return (index >= 0 ? index - 1 : index + len / 2) * 2;\n        },\n        addVertex: function addVertex(a, b, c) {\n          var src = this.vertices;\n          var dst = this.object.geometry.vertices;\n          dst.push(src[a + 0]);\n          dst.push(src[a + 1]);\n          dst.push(src[a + 2]);\n          dst.push(src[b + 0]);\n          dst.push(src[b + 1]);\n          dst.push(src[b + 2]);\n          dst.push(src[c + 0]);\n          dst.push(src[c + 1]);\n          dst.push(src[c + 2]);\n        },\n        addVertexLine: function addVertexLine(a) {\n          var src = this.vertices;\n          var dst = this.object.geometry.vertices;\n          dst.push(src[a + 0]);\n          dst.push(src[a + 1]);\n          dst.push(src[a + 2]);\n        },\n        addNormal: function addNormal(a, b, c) {\n          var src = this.normals;\n          var dst = this.object.geometry.normals;\n          dst.push(src[a + 0]);\n          dst.push(src[a + 1]);\n          dst.push(src[a + 2]);\n          dst.push(src[b + 0]);\n          dst.push(src[b + 1]);\n          dst.push(src[b + 2]);\n          dst.push(src[c + 0]);\n          dst.push(src[c + 1]);\n          dst.push(src[c + 2]);\n        },\n        addUV: function addUV(a, b, c) {\n          var src = this.uvs;\n          var dst = this.object.geometry.uvs;\n          dst.push(src[a + 0]);\n          dst.push(src[a + 1]);\n          dst.push(src[b + 0]);\n          dst.push(src[b + 1]);\n          dst.push(src[c + 0]);\n          dst.push(src[c + 1]);\n        },\n        addUVLine: function addUVLine(a) {\n          var src = this.uvs;\n          var dst = this.object.geometry.uvs;\n          dst.push(src[a + 0]);\n          dst.push(src[a + 1]);\n        },\n        addFace: function addFace(a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd) {\n          var vLen = this.vertices.length;\n          var ia = this.parseVertexIndex(a, vLen);\n          var ib = this.parseVertexIndex(b, vLen);\n          var ic = this.parseVertexIndex(c, vLen);\n          var id;\n\n          if (d === undefined) {\n            this.addVertex(ia, ib, ic);\n          } else {\n            id = this.parseVertexIndex(d, vLen);\n            this.addVertex(ia, ib, id);\n            this.addVertex(ib, ic, id);\n          }\n\n          if (ua !== undefined) {\n            var uvLen = this.uvs.length;\n            ia = this.parseUVIndex(ua, uvLen);\n            ib = this.parseUVIndex(ub, uvLen);\n            ic = this.parseUVIndex(uc, uvLen);\n\n            if (d === undefined) {\n              this.addUV(ia, ib, ic);\n            } else {\n              id = this.parseUVIndex(ud, uvLen);\n              this.addUV(ia, ib, id);\n              this.addUV(ib, ic, id);\n            }\n          }\n\n          if (na !== undefined) {\n            // Normals are many times the same. If so, skip function call and parseInt.\n            var nLen = this.normals.length;\n            ia = this.parseNormalIndex(na, nLen);\n            ib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\n            ic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\n\n            if (d === undefined) {\n              this.addNormal(ia, ib, ic);\n            } else {\n              id = this.parseNormalIndex(nd, nLen);\n              this.addNormal(ia, ib, id);\n              this.addNormal(ib, ic, id);\n            }\n          }\n        },\n        addLineGeometry: function addLineGeometry(vertices, uvs) {\n          this.object.geometry.type = 'Line';\n          var vLen = this.vertices.length;\n          var uvLen = this.uvs.length;\n\n          for (var vi = 0, l = vertices.length; vi < l; vi++) {\n            this.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\n          }\n\n          for (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\n            this.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\n          }\n        }\n      };\n      state.startObject('', false);\n      return state;\n    }\n  }, {\n    key: 'parse',\n    value: function parse(text) {\n      console.time('OBJLoader');\n\n      var state = this._createParserState();\n\n      if (text.indexOf('\\r\\n') !== -1) {\n        // This is faster than String.split with regex that splits on both\n        text = text.replace(/\\r\\n/g, '\\n');\n      }\n\n      if (text.indexOf('\\\\\\n') !== -1) {\n        // join lines separated by a line continuation character (\\)\n        text = text.replace(/\\\\\\n/g, '');\n      }\n\n      var lines = text.split('\\n');\n      var line = '',\n          lineFirstChar = '',\n          lineSecondChar = '';\n      var lineLength = 0;\n      var result = []; // Faster to just trim left side of the line. Use if available.\n\n      var trimLeft = typeof ''.trimLeft === 'function';\n\n      for (var i = 0, l = lines.length; i < l; i++) {\n        line = lines[i];\n        line = trimLeft ? line.trimLeft() : line.trim();\n        lineLength = line.length;\n        if (lineLength === 0) continue;\n        lineFirstChar = line.charAt(0); // @todo invoke passed in handler if any\n\n        if (lineFirstChar === '#') continue;\n\n        if (lineFirstChar === 'v') {\n          lineSecondChar = line.charAt(1);\n\n          if (lineSecondChar === ' ' && (result = this.regexp.vertex_pattern.exec(line)) !== null) {\n            // 0                  1      2      3\n            // [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n            state.vertices.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n          } else if (lineSecondChar === 'n' && (result = this.regexp.normal_pattern.exec(line)) !== null) {\n            // 0                   1      2      3\n            // [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n            state.normals.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n          } else if (lineSecondChar === 't' && (result = this.regexp.uv_pattern.exec(line)) !== null) {\n            // 0               1      2\n            // [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\n            state.uvs.push(parseFloat(result[1]), parseFloat(result[2]));\n          } else {\n            throw new Error(\"Unexpected vertex/normal/uv line: '\" + line + \"'\");\n          }\n        } else if (lineFirstChar === \"f\") {\n          if ((result = this.regexp.face_vertex_uv_normal.exec(line)) !== null) {\n            // f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n            // 0                        1    2    3    4    5    6    7    8    9   10         11         12\n            // [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\n            state.addFace(result[1], result[4], result[7], result[10], result[2], result[5], result[8], result[11], result[3], result[6], result[9], result[12]);\n          } else if ((result = this.regexp.face_vertex_uv.exec(line)) !== null) {\n            // f vertex/uv vertex/uv vertex/uv\n            // 0                  1    2    3    4    5    6   7          8\n            // [\"f 1/1 2/2 3/3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n            state.addFace(result[1], result[3], result[5], result[7], result[2], result[4], result[6], result[8]);\n          } else if ((result = this.regexp.face_vertex_normal.exec(line)) !== null) {\n            // f vertex//normal vertex//normal vertex//normal\n            // 0                     1    2    3    4    5    6   7          8\n            // [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n            state.addFace(result[1], result[3], result[5], result[7], undefined, undefined, undefined, undefined, result[2], result[4], result[6], result[8]);\n          } else if ((result = this.regexp.face_vertex.exec(line)) !== null) {\n            // f vertex vertex vertex\n            // 0            1    2    3   4\n            // [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\n            state.addFace(result[1], result[2], result[3], result[4]);\n          } else {\n            throw new Error(\"Unexpected face line: '\" + line + \"'\");\n          }\n        } else if (lineFirstChar === \"l\") {\n          var lineParts = line.substring(1).trim().split(\" \");\n          var lineVertices = [],\n              lineUVs = [];\n\n          if (line.indexOf(\"/\") === -1) {\n            lineVertices = lineParts;\n          } else {\n            for (var li = 0, llen = lineParts.length; li < llen; li++) {\n              var parts = lineParts[li].split(\"/\");\n              if (parts[0] !== \"\") lineVertices.push(parts[0]);\n              if (parts[1] !== \"\") lineUVs.push(parts[1]);\n            }\n          }\n\n          state.addLineGeometry(lineVertices, lineUVs);\n        } else if ((result = this.regexp.object_pattern.exec(line)) !== null) {\n          // o object_name\n          // or\n          // g group_name\n          // WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n          // var name = result[ 0 ].substr( 1 ).trim();\n          var name = (\" \" + result[0].substr(1).trim()).substr(1);\n          state.startObject(name);\n        } else if (this.regexp.material_use_pattern.test(line)) {\n          // material\n          state.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\n        } else if (this.regexp.material_library_pattern.test(line)) {\n          // mtl file\n          state.materialLibraries.push(line.substring(7).trim());\n        } else if ((result = this.regexp.smoothing_pattern.exec(line)) !== null) {\n          // smooth shading\n          // @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n          // but does not define a usemtl for each face set.\n          // This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n          // This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n          // where explicit usemtl defines geometry groups.\n          // Example asset: examples/models/obj/cerberus/Cerberus.obj\n          var value = result[1].trim().toLowerCase();\n          state.object.smooth = value === '1' || value === 'on';\n          var material = state.object.currentMaterial();\n\n          if (material) {\n            material.smooth = state.object.smooth;\n          }\n        } else {\n          // Handle null terminated files without exception\n          if (line === '\\0') continue;\n          throw new Error(\"Unexpected line: '\" + line + \"'\");\n        }\n      }\n\n      state.finalize();\n      var container = new THREE.Group();\n      container.materialLibraries = [].concat(state.materialLibraries);\n\n      for (var i = 0, l = state.objects.length; i < l; i++) {\n        var object = state.objects[i];\n        var geometry = object.geometry;\n        var materials = object.materials;\n        var isLine = geometry.type === 'Line'; // Skip o/g line declarations that did not follow with any faces\n\n        if (geometry.vertices.length === 0) continue;\n        var buffergeometry = new THREE.BufferGeometry();\n        buffergeometry.addAttribute('position', new THREE.BufferAttribute(new Float32Array(geometry.vertices), 3));\n\n        if (geometry.normals.length > 0) {\n          buffergeometry.addAttribute('normal', new THREE.BufferAttribute(new Float32Array(geometry.normals), 3));\n        } else {\n          buffergeometry.computeVertexNormals();\n        }\n\n        if (geometry.uvs.length > 0) {\n          buffergeometry.addAttribute('uv', new THREE.BufferAttribute(new Float32Array(geometry.uvs), 2));\n        } // Create materials\n\n\n        var createdMaterials = [];\n\n        for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n          var sourceMaterial = materials[mi];\n          var material = undefined;\n\n          if (this.materials !== null) {\n            material = this.materials.create(sourceMaterial.name); // mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\n            if (isLine && material && !(material instanceof THREE.LineBasicMaterial)) {\n              var materialLine = new THREE.LineBasicMaterial();\n              materialLine.copy(material);\n              material = materialLine;\n            }\n          }\n\n          if (!material) {\n            material = !isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial();\n            material.name = sourceMaterial.name;\n          }\n\n          material.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;\n          createdMaterials.push(material);\n        } // Create mesh\n\n\n        var mesh;\n\n        if (createdMaterials.length > 1) {\n          for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n            var sourceMaterial = materials[mi];\n            buffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\n          }\n\n          mesh = !isLine ? new THREE.Mesh(buffergeometry, createdMaterials) : new THREE.LineSegments(buffergeometry, createdMaterials);\n        } else {\n          mesh = !isLine ? new THREE.Mesh(buffergeometry, createdMaterials[0]) : new THREE.LineSegments(buffergeometry, createdMaterials[0]);\n        }\n\n        mesh.name = object.name;\n        container.add(mesh);\n      }\n\n      console.timeEnd('OBJLoader');\n      return container;\n    }\n  }]);\n\n  return OBJLoader;\n}();\n\nexports.default = OBJLoader;","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/node_modules/three-react-obj-loader/dist/index.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_three","require","THREE","_interopRequireWildcard","obj","__esModule","newObj","hasOwnProperty","call","default","_classCallCheck","instance","TypeError","OBJLoader","manager","undefined","DefaultLoadingManager","materials","regexp","vertex_pattern","normal_pattern","uv_pattern","face_vertex","face_vertex_uv","face_vertex_uv_normal","face_vertex_normal","object_pattern","smoothing_pattern","material_library_pattern","material_use_pattern","load","url","onLoad","onProgress","onError","scope","loader","FileLoader","setPath","path","text","parse","setMaterials","_createParserState","state","objects","object","vertices","normals","uvs","materialLibraries","startObject","name","fromDeclaration","previousMaterial","currentMaterial","_finalize","geometry","smooth","startMaterial","libraries","previous","inherited","groupCount","splice","index","material","mtllib","Array","isArray","groupStart","groupEnd","clone","cloned","bind","push","end","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","len","parseInt","parseNormalIndex","parseUVIndex","addVertex","a","b","c","src","dst","addVertexLine","addNormal","addUV","addUVLine","addFace","d","ua","ub","uc","ud","na","nb","nc","nd","vLen","ia","ib","ic","id","uvLen","nLen","addLineGeometry","type","vi","l","uvi","console","time","indexOf","replace","lines","split","line","lineFirstChar","lineSecondChar","lineLength","result","trimLeft","trim","charAt","exec","parseFloat","Error","lineParts","substring","lineVertices","lineUVs","li","llen","parts","substr","test","toLowerCase","container","Group","concat","isLine","buffergeometry","BufferGeometry","addAttribute","BufferAttribute","Float32Array","computeVertexNormals","createdMaterials","miLen","sourceMaterial","create","LineBasicMaterial","materialLine","copy","MeshPhongMaterial","shading","SmoothShading","FlatShading","mesh","addGroup","Mesh","LineSegments","add","timeEnd"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author lucascassiano / http://lucascassiano.github.io\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @edited as an ES6 module based on script from mrdoob / http://mrdoob.com/\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _three = require('three');\n\nvar THREE = _interopRequireWildcard(_three);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar OBJLoader = function () {\n\tfunction OBJLoader(manager) {\n\t\t_classCallCheck(this, OBJLoader);\n\n\t\tthis.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager;\n\n\t\tthis.materials = null;\n\n\t\tthis.regexp = {\n\t\t\t// v float float float\n\t\t\tvertex_pattern: /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t\t// vn float float float\n\t\t\tnormal_pattern: /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t\t// vt float float\n\t\t\tuv_pattern: /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t\t// f vertex vertex vertex\n\t\t\tface_vertex: /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\n\t\t\t// f vertex/uv vertex/uv vertex/uv\n\t\t\tface_vertex_uv: /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\n\t\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n\t\t\tface_vertex_uv_normal: /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\n\t\t\t// f vertex//normal vertex//normal vertex//normal\n\t\t\tface_vertex_normal: /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\n\t\t\t// o object_name | g group_name\n\t\t\tobject_pattern: /^[og]\\s*(.+)?/,\n\t\t\t// s boolean\n\t\t\tsmoothing_pattern: /^s\\s+(\\d+|on|off)/,\n\t\t\t// mtllib file_reference\n\t\t\tmaterial_library_pattern: /^mtllib /,\n\t\t\t// usemtl material_name\n\t\t\tmaterial_use_pattern: /^usemtl /\n\t\t};\n\t}\n\n\t_createClass(OBJLoader, [{\n\t\tkey: 'load',\n\t\tvalue: function load(url, onLoad, onProgress, onError) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar loader = new THREE.FileLoader(scope.manager);\n\t\t\tloader.setPath(this.path);\n\t\t\tloader.load(url, function (text) {\n\n\t\t\t\tonLoad(scope.parse(text));\n\t\t\t}, onProgress, onError);\n\t\t}\n\t}, {\n\t\tkey: 'setPath',\n\t\tvalue: function setPath(value) {\n\n\t\t\tthis.path = value;\n\t\t}\n\t}, {\n\t\tkey: 'setMaterials',\n\t\tvalue: function setMaterials(materials) {\n\n\t\t\tthis.materials = materials;\n\t\t}\n\t}, {\n\t\tkey: '_createParserState',\n\t\tvalue: function _createParserState() {\n\n\t\t\tvar state = {\n\t\t\t\tobjects: [],\n\t\t\t\tobject: {},\n\n\t\t\t\tvertices: [],\n\t\t\t\tnormals: [],\n\t\t\t\tuvs: [],\n\n\t\t\t\tmaterialLibraries: [],\n\n\t\t\t\tstartObject: function startObject(name, fromDeclaration) {\n\n\t\t\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\t\t\tif (this.object && this.object.fromDeclaration === false) {\n\n\t\t\t\t\t\tthis.object.name = name;\n\t\t\t\t\t\tthis.object.fromDeclaration = fromDeclaration !== false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar previousMaterial = this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined;\n\n\t\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\n\n\t\t\t\t\t\tthis.object._finalize(true);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.object = {\n\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\tfromDeclaration: fromDeclaration !== false,\n\n\t\t\t\t\t\tgeometry: {\n\t\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\t\tuvs: []\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmaterials: [],\n\t\t\t\t\t\tsmooth: true,\n\n\t\t\t\t\t\tstartMaterial: function startMaterial(name, libraries) {\n\n\t\t\t\t\t\t\tvar previous = this._finalize(false);\n\n\t\t\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\t\t\tif (previous && (previous.inherited || previous.groupCount <= 0)) {\n\n\t\t\t\t\t\t\t\tthis.materials.splice(previous.index, 1);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar material = {\n\t\t\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\t\t\tmtllib: Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : '',\n\t\t\t\t\t\t\t\tsmooth: previous !== undefined ? previous.smooth : this.smooth,\n\t\t\t\t\t\t\t\tgroupStart: previous !== undefined ? previous.groupEnd : 0,\n\t\t\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\t\t\tclone: function clone(index) {\n\t\t\t\t\t\t\t\t\tvar cloned = {\n\t\t\t\t\t\t\t\t\t\tindex: typeof index === 'number' ? index : this.index,\n\t\t\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind(cloned);\n\t\t\t\t\t\t\t\t\treturn cloned;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tthis.materials.push(material);\n\n\t\t\t\t\t\t\treturn material;\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tcurrentMaterial: function currentMaterial() {\n\n\t\t\t\t\t\t\tif (this.materials.length > 0) {\n\t\t\t\t\t\t\t\treturn this.materials[this.materials.length - 1];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t_finalize: function _finalize(end) {\n\n\t\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\t\t\tif (lastMultiMaterial && lastMultiMaterial.groupEnd === -1) {\n\n\t\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\t\t\t\t\t\t\tif (end && this.materials.length > 1) {\n\n\t\t\t\t\t\t\t\tfor (var mi = this.materials.length - 1; mi >= 0; mi--) {\n\t\t\t\t\t\t\t\t\tif (this.materials[mi].groupCount <= 0) {\n\t\t\t\t\t\t\t\t\t\tthis.materials.splice(mi, 1);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\t\t\tif (end && this.materials.length === 0) {\n\n\t\t\t\t\t\t\t\tthis.materials.push({\n\t\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn lastMultiMaterial;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Inherit previous objects material.\n\t\t\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\t\t\tif (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\") {\n\n\t\t\t\t\t\tvar declared = previousMaterial.clone(0);\n\t\t\t\t\t\tdeclared.inherited = true;\n\t\t\t\t\t\tthis.object.materials.push(declared);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.objects.push(this.object);\n\t\t\t\t},\n\n\t\t\t\tfinalize: function finalize() {\n\n\t\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\n\n\t\t\t\t\t\tthis.object._finalize(true);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tparseVertexIndex: function parseVertexIndex(value, len) {\n\n\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\n\t\t\t\t},\n\n\t\t\t\tparseNormalIndex: function parseNormalIndex(value, len) {\n\n\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\n\t\t\t\t},\n\n\t\t\t\tparseUVIndex: function parseUVIndex(value, len) {\n\n\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 2) * 2;\n\t\t\t\t},\n\n\t\t\t\taddVertex: function addVertex(a, b, c) {\n\n\t\t\t\t\tvar src = this.vertices;\n\t\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\tdst.push(src[a + 2]);\n\t\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\t\tdst.push(src[b + 2]);\n\t\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\t\tdst.push(src[c + 1]);\n\t\t\t\t\tdst.push(src[c + 2]);\n\t\t\t\t},\n\n\t\t\t\taddVertexLine: function addVertexLine(a) {\n\n\t\t\t\t\tvar src = this.vertices;\n\t\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\tdst.push(src[a + 2]);\n\t\t\t\t},\n\n\t\t\t\taddNormal: function addNormal(a, b, c) {\n\n\t\t\t\t\tvar src = this.normals;\n\t\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\tdst.push(src[a + 2]);\n\t\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\t\tdst.push(src[b + 2]);\n\t\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\t\tdst.push(src[c + 1]);\n\t\t\t\t\tdst.push(src[c + 2]);\n\t\t\t\t},\n\n\t\t\t\taddUV: function addUV(a, b, c) {\n\n\t\t\t\t\tvar src = this.uvs;\n\t\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\t\tdst.push(src[c + 1]);\n\t\t\t\t},\n\n\t\t\t\taddUVLine: function addUVLine(a) {\n\n\t\t\t\t\tvar src = this.uvs;\n\t\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t},\n\n\t\t\t\taddFace: function addFace(a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd) {\n\n\t\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\t\tvar ia = this.parseVertexIndex(a, vLen);\n\t\t\t\t\tvar ib = this.parseVertexIndex(b, vLen);\n\t\t\t\t\tvar ic = this.parseVertexIndex(c, vLen);\n\t\t\t\t\tvar id;\n\n\t\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\t\tthis.addVertex(ia, ib, ic);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tid = this.parseVertexIndex(d, vLen);\n\n\t\t\t\t\t\tthis.addVertex(ia, ib, id);\n\t\t\t\t\t\tthis.addVertex(ib, ic, id);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ua !== undefined) {\n\n\t\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\t\tia = this.parseUVIndex(ua, uvLen);\n\t\t\t\t\t\tib = this.parseUVIndex(ub, uvLen);\n\t\t\t\t\t\tic = this.parseUVIndex(uc, uvLen);\n\n\t\t\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\t\t\tthis.addUV(ia, ib, ic);\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tid = this.parseUVIndex(ud, uvLen);\n\n\t\t\t\t\t\t\tthis.addUV(ia, ib, id);\n\t\t\t\t\t\t\tthis.addUV(ib, ic, id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (na !== undefined) {\n\n\t\t\t\t\t\t// Normals are many times the same. If so, skip function call and parseInt.\n\t\t\t\t\t\tvar nLen = this.normals.length;\n\t\t\t\t\t\tia = this.parseNormalIndex(na, nLen);\n\n\t\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\n\t\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\n\n\t\t\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\t\t\tthis.addNormal(ia, ib, ic);\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tid = this.parseNormalIndex(nd, nLen);\n\n\t\t\t\t\t\t\tthis.addNormal(ia, ib, id);\n\t\t\t\t\t\t\tthis.addNormal(ib, ic, id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\taddLineGeometry: function addLineGeometry(vertices, uvs) {\n\n\t\t\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\t\t\tvar vLen = this.vertices.length;\n\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\tfor (var vi = 0, l = vertices.length; vi < l; vi++) {\n\n\t\t\t\t\t\tthis.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\n\n\t\t\t\t\t\tthis.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tstate.startObject('', false);\n\n\t\t\treturn state;\n\t\t}\n\t}, {\n\t\tkey: 'parse',\n\t\tvalue: function parse(text) {\n\n\t\t\tconsole.time('OBJLoader');\n\n\t\t\tvar state = this._createParserState();\n\n\t\t\tif (text.indexOf('\\r\\n') !== -1) {\n\n\t\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\t\ttext = text.replace(/\\r\\n/g, '\\n');\n\t\t\t}\n\n\t\t\tif (text.indexOf('\\\\\\n') !== -1) {\n\n\t\t\t\t// join lines separated by a line continuation character (\\)\n\t\t\t\ttext = text.replace(/\\\\\\n/g, '');\n\t\t\t}\n\n\t\t\tvar lines = text.split('\\n');\n\t\t\tvar line = '',\n\t\t\t    lineFirstChar = '',\n\t\t\t    lineSecondChar = '';\n\t\t\tvar lineLength = 0;\n\t\t\tvar result = [];\n\n\t\t\t// Faster to just trim left side of the line. Use if available.\n\t\t\tvar trimLeft = typeof ''.trimLeft === 'function';\n\n\t\t\tfor (var i = 0, l = lines.length; i < l; i++) {\n\n\t\t\t\tline = lines[i];\n\n\t\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\n\n\t\t\t\tlineLength = line.length;\n\n\t\t\t\tif (lineLength === 0) continue;\n\n\t\t\t\tlineFirstChar = line.charAt(0);\n\n\t\t\t\t// @todo invoke passed in handler if any\n\t\t\t\tif (lineFirstChar === '#') continue;\n\n\t\t\t\tif (lineFirstChar === 'v') {\n\n\t\t\t\t\tlineSecondChar = line.charAt(1);\n\n\t\t\t\t\tif (lineSecondChar === ' ' && (result = this.regexp.vertex_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t\t// 0                  1      2      3\n\t\t\t\t\t\t// [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n\t\t\t\t\t\tstate.vertices.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n\t\t\t\t\t} else if (lineSecondChar === 'n' && (result = this.regexp.normal_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t\t// 0                   1      2      3\n\t\t\t\t\t\t// [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n\t\t\t\t\t\tstate.normals.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n\t\t\t\t\t} else if (lineSecondChar === 't' && (result = this.regexp.uv_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t\t// 0               1      2\n\t\t\t\t\t\t// [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\n\n\t\t\t\t\t\tstate.uvs.push(parseFloat(result[1]), parseFloat(result[2]));\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error(\"Unexpected vertex/normal/uv line: '\" + line + \"'\");\n\t\t\t\t\t}\n\t\t\t\t} else if (lineFirstChar === \"f\") {\n\n\t\t\t\t\tif ((result = this.regexp.face_vertex_uv_normal.exec(line)) !== null) {\n\n\t\t\t\t\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n\t\t\t\t\t\t// 0                        1    2    3    4    5    6    7    8    9   10         11         12\n\t\t\t\t\t\t// [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\n\n\t\t\t\t\t\tstate.addFace(result[1], result[4], result[7], result[10], result[2], result[5], result[8], result[11], result[3], result[6], result[9], result[12]);\n\t\t\t\t\t} else if ((result = this.regexp.face_vertex_uv.exec(line)) !== null) {\n\n\t\t\t\t\t\t// f vertex/uv vertex/uv vertex/uv\n\t\t\t\t\t\t// 0                  1    2    3    4    5    6   7          8\n\t\t\t\t\t\t// [\"f 1/1 2/2 3/3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n\t\t\t\t\t\tstate.addFace(result[1], result[3], result[5], result[7], result[2], result[4], result[6], result[8]);\n\t\t\t\t\t} else if ((result = this.regexp.face_vertex_normal.exec(line)) !== null) {\n\n\t\t\t\t\t\t// f vertex//normal vertex//normal vertex//normal\n\t\t\t\t\t\t// 0                     1    2    3    4    5    6   7          8\n\t\t\t\t\t\t// [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n\t\t\t\t\t\tstate.addFace(result[1], result[3], result[5], result[7], undefined, undefined, undefined, undefined, result[2], result[4], result[6], result[8]);\n\t\t\t\t\t} else if ((result = this.regexp.face_vertex.exec(line)) !== null) {\n\n\t\t\t\t\t\t// f vertex vertex vertex\n\t\t\t\t\t\t// 0            1    2    3   4\n\t\t\t\t\t\t// [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\n\n\t\t\t\t\t\tstate.addFace(result[1], result[2], result[3], result[4]);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error(\"Unexpected face line: '\" + line + \"'\");\n\t\t\t\t\t}\n\t\t\t\t} else if (lineFirstChar === \"l\") {\n\n\t\t\t\t\tvar lineParts = line.substring(1).trim().split(\" \");\n\t\t\t\t\tvar lineVertices = [],\n\t\t\t\t\t    lineUVs = [];\n\n\t\t\t\t\tif (line.indexOf(\"/\") === -1) {\n\n\t\t\t\t\t\tlineVertices = lineParts;\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfor (var li = 0, llen = lineParts.length; li < llen; li++) {\n\n\t\t\t\t\t\t\tvar parts = lineParts[li].split(\"/\");\n\n\t\t\t\t\t\t\tif (parts[0] !== \"\") lineVertices.push(parts[0]);\n\t\t\t\t\t\t\tif (parts[1] !== \"\") lineUVs.push(parts[1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tstate.addLineGeometry(lineVertices, lineUVs);\n\t\t\t\t} else if ((result = this.regexp.object_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t// o object_name\n\t\t\t\t\t// or\n\t\t\t\t\t// g group_name\n\n\t\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n\t\t\t\t\t// var name = result[ 0 ].substr( 1 ).trim();\n\t\t\t\t\tvar name = (\" \" + result[0].substr(1).trim()).substr(1);\n\n\t\t\t\t\tstate.startObject(name);\n\t\t\t\t} else if (this.regexp.material_use_pattern.test(line)) {\n\n\t\t\t\t\t// material\n\n\t\t\t\t\tstate.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\n\t\t\t\t} else if (this.regexp.material_library_pattern.test(line)) {\n\n\t\t\t\t\t// mtl file\n\n\t\t\t\t\tstate.materialLibraries.push(line.substring(7).trim());\n\t\t\t\t} else if ((result = this.regexp.smoothing_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t// smooth shading\n\n\t\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\t\tvar value = result[1].trim().toLowerCase();\n\t\t\t\t\tstate.object.smooth = value === '1' || value === 'on';\n\n\t\t\t\t\tvar material = state.object.currentMaterial();\n\t\t\t\t\tif (material) {\n\n\t\t\t\t\t\tmaterial.smooth = state.object.smooth;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\t// Handle null terminated files without exception\n\t\t\t\t\tif (line === '\\0') continue;\n\n\t\t\t\t\tthrow new Error(\"Unexpected line: '\" + line + \"'\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstate.finalize();\n\n\t\t\tvar container = new THREE.Group();\n\t\t\tcontainer.materialLibraries = [].concat(state.materialLibraries);\n\n\t\t\tfor (var i = 0, l = state.objects.length; i < l; i++) {\n\n\t\t\t\tvar object = state.objects[i];\n\t\t\t\tvar geometry = object.geometry;\n\t\t\t\tvar materials = object.materials;\n\t\t\t\tvar isLine = geometry.type === 'Line';\n\n\t\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\t\tif (geometry.vertices.length === 0) continue;\n\n\t\t\t\tvar buffergeometry = new THREE.BufferGeometry();\n\n\t\t\t\tbuffergeometry.addAttribute('position', new THREE.BufferAttribute(new Float32Array(geometry.vertices), 3));\n\n\t\t\t\tif (geometry.normals.length > 0) {\n\n\t\t\t\t\tbuffergeometry.addAttribute('normal', new THREE.BufferAttribute(new Float32Array(geometry.normals), 3));\n\t\t\t\t} else {\n\n\t\t\t\t\tbuffergeometry.computeVertexNormals();\n\t\t\t\t}\n\n\t\t\t\tif (geometry.uvs.length > 0) {\n\n\t\t\t\t\tbuffergeometry.addAttribute('uv', new THREE.BufferAttribute(new Float32Array(geometry.uvs), 2));\n\t\t\t\t}\n\n\t\t\t\t// Create materials\n\n\t\t\t\tvar createdMaterials = [];\n\n\t\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\tvar material = undefined;\n\n\t\t\t\t\tif (this.materials !== null) {\n\n\t\t\t\t\t\tmaterial = this.materials.create(sourceMaterial.name);\n\n\t\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\t\tif (isLine && material && !(material instanceof THREE.LineBasicMaterial)) {\n\n\t\t\t\t\t\t\tvar materialLine = new THREE.LineBasicMaterial();\n\t\t\t\t\t\t\tmaterialLine.copy(material);\n\t\t\t\t\t\t\tmaterial = materialLine;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!material) {\n\n\t\t\t\t\t\tmaterial = !isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial();\n\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterial.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;\n\n\t\t\t\t\tcreatedMaterials.push(material);\n\t\t\t\t}\n\n\t\t\t\t// Create mesh\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tif (createdMaterials.length > 1) {\n\n\t\t\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n\t\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\t\tbuffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\n\t\t\t\t\t}\n\n\t\t\t\t\tmesh = !isLine ? new THREE.Mesh(buffergeometry, createdMaterials) : new THREE.LineSegments(buffergeometry, createdMaterials);\n\t\t\t\t} else {\n\n\t\t\t\t\tmesh = !isLine ? new THREE.Mesh(buffergeometry, createdMaterials[0]) : new THREE.LineSegments(buffergeometry, createdMaterials[0]);\n\t\t\t\t}\n\n\t\t\t\tmesh.name = object.name;\n\n\t\t\t\tcontainer.add(mesh);\n\t\t\t}\n\n\t\t\tconsole.timeEnd('OBJLoader');\n\n\t\t\treturn container;\n\t\t}\n\t}]);\n\n\treturn OBJLoader;\n}();\n\nexports.default = OBJLoader;"]},"metadata":{},"sourceType":"script"}