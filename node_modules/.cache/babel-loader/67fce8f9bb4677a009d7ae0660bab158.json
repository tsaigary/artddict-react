{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/Auction/AuctionDetail.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './style/auctionDetail.scss';\nimport { withRouter, Link } from 'react-router-dom';\nimport monkey from './images/monkey.jpg';\nimport ArtDDICTLOGbw from \"./images/ArtDDICTLOGbw.svg\";\nimport AuctionDetailcountDown from './components/AuctionDetailcountDown';\nimport useInterval from './components/useInterval';\nimport { Container, Row, Modal, Button, Collapse } from 'react-bootstrap';\nimport minusButton from \"./images/minusButton.svg\";\nimport webSocket from 'socket.io-client'; // react icons\n\nimport { IoIosArrowBack, IoIosArrowForward, IoIosArrowRoundDown, IoIosSearch, IoIosHeart, IoMdAdd, IoMdRemove } from 'react-icons/io'; //模擬伺服器端的資料\n\nimport { data } from './data/data.js';\nimport { array } from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AuctionDetail(props) {\n  _s();\n\n  // console.log(props.match.params.id)\n  //倒數計時器間隔\n  const [delay, setDelay] = useState(1000); //倒數計時器停止與否  \n\n  const [isRunning, setIsRunning] = useState(true); //是否要顯示倒數\n\n  const [auctionRunning, setAuctionrunning] = useState(false); //是否還在loading 若loading 會給予空白 loading完成 render在螢幕上\n\n  const [loading, setLoading] = useState(''); //商品描述開關\n\n  const [openOne, setOpenOne] = useState(false);\n  const [openTwo, setOpenTwo] = useState(false);\n  const [openThree, setOpenThree] = useState(false); //產品資料 id,aucClass,aucName,aucId,aucDes,aucDeadline,aucPriceNow,aucPriceStart\n\n  const [aucDetailinfo, setAucDetailInfo] = useState([]); //輸入的價錢\n\n  const [inputbidPrice, setInputbidPrice] = useState([]); //目前的出價(實時更新)\n\n  const [immediatePrice, setImmediatePrice] = useState(''); //出價資訊\n\n  const [bidersInfo, setBidersInfo] = useState([]); //假設會員id\n\n  const [memberid, setMemberId] = useState(1); //現在的頁面\n\n  const auc_Id = props.match.params.id; //千分位逗號分隔的api\n\n  const internationalNumberFormat = new Intl.NumberFormat('en-US'); // Modal 顯示狀態\n\n  const [show, setShow] = useState(false); // Modal 開關 function\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true); //剩餘時間\n\n\n  const [auctionDetailcountdown, setAuctionDetailcountdown] = useState([0, 0, 0, -1]); //預設資料物件\n\n  const [aucProduct, setAucProduct] = useState({\n    aucId: 0,\n    aucName: '',\n    aucPriceNow: 1,\n    deadline: 0\n  }); //socket\n\n  const [socket, setSocket] = useState(null);\n\n  const io = require(\"socket.io-client\");\n\n  useEffect(() => {\n    setSocket(webSocket('http://localhost:3012'));\n  }, []);\n  useEffect(() => {\n    if (socket) {\n      //連線成功在 console 中打印訊息\n      console.log('success connect!');\n    }\n  }, [socket]);\n  useEffect(() => {\n    if (socket) {\n      socket.on('Message', message => {\n        if (message.inputbidPrice) {\n          // console.log(\"設定即時價格\", message)\n          setImmediatePrice(message.inputbidPrice); // console.log(\"出價資料\", message.b)\n\n          setBidersInfo(message.auc_info);\n        }\n      });\n    }\n  }, [socket, bidersInfo]); //發送出價消息\n\n  const bidPrice = () => {\n    console.log(\"inputbidPrice\", inputbidPrice);\n    console.log(\"immediatePrice\", immediatePrice);\n\n    if (inputbidPrice > immediatePrice) {\n      socket.emit('bidPrice', {\n        inputbidPrice,\n        auc_Id,\n        memberid\n      });\n    } else {\n      console.log(\"輸入價錢過低\");\n      handleShow();\n    }\n  };\n\n  const sendMessage = () => {\n    //以 emit 送訊息，並以 getMessage 為名稱送給 server 捕捉\n    console.log(\"for server message\");\n    socket.emit('test', {\n      inputbidPrice,\n      auc_Id,\n      memberid\n    });\n  };\n  /**************************************************** */\n\n\n  let newAucProduct = [];\n\n  async function getAucProDetailFromServer(aucId) {\n    // 開啟載入指示\n    // setDataLoading(true)\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/auctoin' + `?aucId=${aucId}`; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json(); //輸入現在價位\n    // console.log(data)\n\n    setImmediatePrice(data[0].aucPriceNow);\n    setAucDetailInfo(data[0]);\n    newAucProduct = data[0];\n    console.log(\"新\", newAucProduct);\n    data.shift();\n    setBidersInfo(data);\n  } // console.log(props)\n  // console.log('delay',delay,'auctionRunning',auctionRunning,'loading',loading,'isRunning',isRunning,'aucProduct',aucProduct)\n\n\n  useEffect(() => {\n    //從資料庫抓取資料\n    getAucProDetailFromServer(props.match.params.id);\n  }, []); //計算剩餘時間 \n\n  function TimeRemaining(deadline) {\n    //截止時間(毫秒)\n    // 將資料拿到資料庫截止日期 從字串轉換成數字\n    const deadlineMin = parseInt(deadline); //現在時間(毫秒)\n\n    const timeRightNowA = new Date();\n    const timeRightNow = timeRightNowA.getTime();\n    const TimeRemaining = deadlineMin - timeRightNow;\n    const seconds = Math.floor(TimeRemaining / 1000 % 60);\n    const minutes = Math.floor(TimeRemaining / 1000 / 60 % 60);\n    const hours = Math.floor(TimeRemaining / (1000 * 60 * 60) % 24);\n    const days = Math.floor(TimeRemaining / (1000 * 60 * 60 * 24)); // console.log(days, \"天\", hours, '小時', minutes, '分鐘', seconds, '秒')\n\n    return [days, hours, minutes, seconds];\n  } // 初始化倒數計時器 可以在第一瞬間顯示是否競標結束\n\n\n  useEffect(() => {\n    console.log(aucDetailinfo);\n    let deadlineA = new Date(aucDetailinfo.aucDeadline).getTime(); //第一次計算剩餘時間(不控制)\n\n    let newAucProductTimeRemaining = TimeRemaining(deadlineA); // 第一次計算剩餘時間(react資料流)\n    // TimeRemaining(aucProduct.deadline)\n    // console.log(\"迅速\")\n\n    const cc = newAucProductTimeRemaining.reduce((a, b) => a + b);\n\n    if (cc < 0) {\n      console.log('競標結束');\n      setLoading('競標結束'); //結束計時器(雖然他還沒開始)\n\n      setIsRunning(false);\n    } else {// console.log('競標繼續')\n    }\n  }, [aucDetailinfo]); //倒時計時器\n\n  useInterval(() => {\n    let deadlineA = new Date(aucDetailinfo.aucDeadline).getTime(); //設立一個變數來避免 setstate非同步問題\n\n    let TimeRemainingAA = TimeRemaining(deadlineA); //更改state狀態\n\n    setAuctionDetailcountdown(TimeRemainingAA); //利用加總來計算時間是否歸0\n\n    const bbb = TimeRemainingAA.reduce((a, b) => a + b); //當時間歸0 競價停止 倒數停止 \n\n    if (bbb < 0) {\n      setAuctionrunning(false);\n      setIsRunning(false);\n      setLoading('競標結束');\n      console.log('bye');\n    } else {\n      // console.log(\"有進來嗎\")\n      setAuctionrunning(true);\n    }\n  }, isRunning ? delay : null); // console.log('--------------------')\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auctionDetailContent cn-font\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionDetailleftContent\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_firstpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"auctionDetailLOGO\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: ArtDDICTLOGbw\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailBreadcrumb\",\n            children: \"\\u9996\\u9801/\\u7AF6\\u6A19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_secondpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailTitle\",\n            children: aucDetailinfo.aucName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"currentPrice\",\n            children: [\"\\u76EE\\u524D\\u51FA\\u50F9:NT$\", internationalNumberFormat.format(immediatePrice)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_thirdpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenOne(!openOne),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openOne,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u5546\\u54C1\\u63CF\\u8FF0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openOne,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: aucDetailinfo.aucDes\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_forthpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenTwo(!openTwo),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openTwo,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u5546\\u54C1\\u898F\\u683C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openTwo,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: \"aaaa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_fifthpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenThree(!openThree),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openThree,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u51FA\\u50F9\\u7D00\\u9304\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openThree,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"aucD-PriceTitle\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: \"\\u51FA\\u50F9\\u8005\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 321,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: \"\\u51FA\\u50F9\\u91D1\\u984D\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: bidersInfo.map((biderInfoshow, i) => {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"aucD-PriceContent\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"aucD-bidder\",\n                        children: bidersInfo[i].name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 329,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"aucD-bidAmount\",\n                        children: bidersInfo[i].Price\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 330,\n                        columnNumber: 27\n                      }, this)]\n                    }, i, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 328,\n                      columnNumber: 25\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rightContentFix\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionDetailrightContent\",\n          children: [/*#__PURE__*/_jsxDEV(AuctionDetailcountDown, {\n            aucDetailinfo: aucDetailinfo,\n            setAucProduct: setAucProduct,\n            TimeRemaining: TimeRemaining,\n            auctionDetailcountdown: auctionDetailcountdown,\n            setAuctionDetailcountdown: setAuctionDetailcountdown,\n            auctionRunning: auctionRunning,\n            loading: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailPicture\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: `http://localhost:6005/aucpics/auc/${aucDetailinfo.aucImg}`,\n              alt: \"Background\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), isRunning ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auctionDetailcurrentPriceInput\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailcurrentPriceAboveInput\",\n                children: [\"\\u76EE\\u524D\\u51FA\\u50F9:NT$\", internationalNumberFormat.format(immediatePrice)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"priceInput\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  placeholder: \"\\u8ACB\\u8F38\\u5165\\u4E0B\\u6A19\\u50F9\\u683C\",\n                  value: inputbidPrice,\n                  onChange: event => {\n                    setInputbidPrice(event.target.value);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auctionDetailButton \",\n              onClick: bidPrice,\n              children: \"\\u4E0B\\u6A19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 28\n          }, this), /*#__PURE__*/_jsxDEV(Modal, {\n            centered: true,\n            show: show,\n            onHide: handleClose,\n            id: \"eventModal\",\n            children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n              closeButton: true,\n              children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n                children: \"\\u7121\\u6CD5\\u51FA\\u50F9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"\\u72C0\\u6CC11.\\u60A8\\u51FA\\u7684\\u50F9\\u9322\\u4E26\\u6C92\\u6709\\u9AD8\\u65BC\\u76EE\\u524D\\u6700\\u9AD8\\u50F9\\u5537\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"\\u72C0\\u6CC12.\\u60A8\\u5DF2\\u7D93\\u662F\\u76EE\\u524D\\u6700\\u9AD8\\u50F9\\u56C9~\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"button\",\n                className: \"e-btn-s e-modal-del\",\n                onClick: () => {\n                  handleClose();\n                },\n                children: \"\\u6211\\u77AD\\u89E3\\u4E86\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(AuctionDetail, \"u1xSrRGF9fTTtbs95LlA1ec/N8Y=\", false, function () {\n  return [useInterval];\n});\n\n_c = AuctionDetail;\nexport default _c2 = withRouter(AuctionDetail);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AuctionDetail\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/Auction/AuctionDetail.js"],"names":["React","useEffect","useState","withRouter","Link","monkey","AuctionDetailcountDown","useInterval","Container","Row","Modal","Button","Collapse","webSocket","IoIosArrowBack","IoIosArrowForward","IoIosArrowRoundDown","IoIosSearch","IoIosHeart","IoMdAdd","IoMdRemove","data","array","AuctionDetail","props","delay","setDelay","isRunning","setIsRunning","auctionRunning","setAuctionrunning","loading","setLoading","openOne","setOpenOne","openTwo","setOpenTwo","openThree","setOpenThree","aucDetailinfo","setAucDetailInfo","inputbidPrice","setInputbidPrice","immediatePrice","setImmediatePrice","bidersInfo","setBidersInfo","memberid","setMemberId","auc_Id","match","params","id","internationalNumberFormat","Intl","NumberFormat","show","setShow","handleClose","handleShow","auctionDetailcountdown","setAuctionDetailcountdown","aucProduct","setAucProduct","aucId","aucName","aucPriceNow","deadline","socket","setSocket","io","require","console","log","on","message","auc_info","bidPrice","emit","sendMessage","newAucProduct","getAucProDetailFromServer","url","request","Request","method","headers","Headers","Accept","response","fetch","json","shift","TimeRemaining","deadlineMin","parseInt","timeRightNowA","Date","timeRightNow","getTime","seconds","Math","floor","minutes","hours","days","deadlineA","aucDeadline","newAucProductTimeRemaining","cc","reduce","a","b","TimeRemainingAA","bbb","ArtDDICTLOGbw","format","aucDes","map","biderInfoshow","i","name","Price","aucImg","event","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './style/auctionDetail.scss';\nimport { withRouter, Link } from 'react-router-dom'\nimport monkey from './images/monkey.jpg'\nimport ArtDDICTLOGbw from './images/ArtDDICTLOGbw.svg'\nimport AuctionDetailcountDown from './components/AuctionDetailcountDown'\nimport useInterval from './components/useInterval'\nimport { Container, Row, Modal, Button, Collapse, } from 'react-bootstrap'\nimport minusButton from './images/minusButton.svg'\nimport webSocket from 'socket.io-client'\n\n// react icons\nimport {\n  IoIosArrowBack,\n  IoIosArrowForward,\n  IoIosArrowRoundDown,\n  IoIosSearch,\n  IoIosHeart,\n  IoMdAdd,\n  IoMdRemove,\n} from 'react-icons/io'\n\n\n//模擬伺服器端的資料\nimport { data } from './data/data.js'\nimport { array } from 'prop-types';\n\nfunction AuctionDetail(props) {\n  // console.log(props.match.params.id)\n  //倒數計時器間隔\n  const [delay, setDelay] = useState(1000);\n  //倒數計時器停止與否  \n  const [isRunning, setIsRunning] = useState(true);\n\n  //是否要顯示倒數\n  const [auctionRunning, setAuctionrunning] = useState(false)\n  //是否還在loading 若loading 會給予空白 loading完成 render在螢幕上\n  const [loading, setLoading] = useState('')\n\n  //商品描述開關\n  const [openOne, setOpenOne] = useState(false);\n  const [openTwo, setOpenTwo] = useState(false);\n  const [openThree, setOpenThree] = useState(false);\n  //產品資料 id,aucClass,aucName,aucId,aucDes,aucDeadline,aucPriceNow,aucPriceStart\n  const [aucDetailinfo, setAucDetailInfo] = useState([])\n\n  //輸入的價錢\n  const [inputbidPrice, setInputbidPrice] = useState([])\n\n  //目前的出價(實時更新)\n  const [immediatePrice, setImmediatePrice] = useState('')\n\n  //出價資訊\n  const [bidersInfo, setBidersInfo] = useState([])\n\n  //假設會員id\n  const [memberid, setMemberId] = useState(1)\n  //現在的頁面\n  const auc_Id = props.match.params.id\n\n  //千分位逗號分隔的api\n  const internationalNumberFormat = new Intl.NumberFormat('en-US')\n\n  // Modal 顯示狀態\n  const [show, setShow] = useState(false)\n  // Modal 開關 function\n  const handleClose = () => setShow(false)\n  const handleShow = () => setShow(true)\n\n  //剩餘時間\n  const [auctionDetailcountdown, setAuctionDetailcountdown] = useState([0, 0, 0, -1])\n  //預設資料物件\n  const [aucProduct, setAucProduct] = useState(\n    {\n      aucId: 0,\n      aucName: '',\n      aucPriceNow: 1,\n      deadline: 0,\n    }\n  )\n\n\n  //socket\n  const [socket, setSocket] = useState(null)\n  const io = require(\"socket.io-client\");\n\n  useEffect(() => {\n    setSocket(webSocket('http://localhost:3012'))\n  }, [])\n\n  useEffect(() => {\n    if (socket) {\n      //連線成功在 console 中打印訊息\n      console.log('success connect!')\n    }\n  }, [socket])\n\n\n  useEffect(() => {\n    if (socket) {\n      socket.on('Message', message => {\n        if (message.inputbidPrice) {\n          // console.log(\"設定即時價格\", message)\n          setImmediatePrice(message.inputbidPrice)\n          // console.log(\"出價資料\", message.b)\n          setBidersInfo(message.auc_info)\n        }\n      })\n    }\n  }, [socket, bidersInfo])\n\n  //發送出價消息\n  const bidPrice = () => {\n    console.log(\"inputbidPrice\", inputbidPrice)\n    console.log(\"immediatePrice\", immediatePrice)\n    if (inputbidPrice > immediatePrice) {\n      socket.emit('bidPrice', { inputbidPrice, auc_Id, memberid })\n    } else {\n      console.log(\"輸入價錢過低\")\n      handleShow()\n    }\n  }\n  const sendMessage = () => {\n    //以 emit 送訊息，並以 getMessage 為名稱送給 server 捕捉\n    console.log(\"for server message\")\n    socket.emit('test', { inputbidPrice, auc_Id, memberid })\n  }\n\n\n  /**************************************************** */\n\n  let newAucProduct = [];\n  async function getAucProDetailFromServer(aucId) {\n    // 開啟載入指示\n    // setDataLoading(true)\n\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/auctoin' + `?aucId=${aucId}`\n\n    // 注意header資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n\n    const response = await fetch(request)\n    const data = await response.json()\n    //輸入現在價位\n    // console.log(data)\n    setImmediatePrice(data[0].aucPriceNow)\n    setAucDetailInfo(data[0])\n    newAucProduct = data[0]\n    console.log(\"新\",newAucProduct)\n    data.shift()\n    setBidersInfo(data)\n  }\n\n  // console.log(props)\n\n  // console.log('delay',delay,'auctionRunning',auctionRunning,'loading',loading,'isRunning',isRunning,'aucProduct',aucProduct)\n\n  useEffect(() => {\n    //從資料庫抓取資料\n    getAucProDetailFromServer(props.match.params.id)\n  }, [])\n\n  //計算剩餘時間 \n  function TimeRemaining(deadline) {\n    //截止時間(毫秒)\n    // 將資料拿到資料庫截止日期 從字串轉換成數字\n    const deadlineMin = parseInt(deadline)\n\n    //現在時間(毫秒)\n    const timeRightNowA = new Date()\n    const timeRightNow = timeRightNowA.getTime()\n\n    const TimeRemaining = deadlineMin - timeRightNow\n\n    const seconds = Math.floor((TimeRemaining / 1000) % 60);\n    const minutes = Math.floor((TimeRemaining / 1000 / 60) % 60);\n    const hours = Math.floor((TimeRemaining / (1000 * 60 * 60)) % 24);\n    const days = Math.floor(TimeRemaining / (1000 * 60 * 60 * 24));\n    // console.log(days, \"天\", hours, '小時', minutes, '分鐘', seconds, '秒')\n\n\n    return [days, hours, minutes, seconds]\n\n  }\n\n  // 初始化倒數計時器 可以在第一瞬間顯示是否競標結束\n  useEffect(() => {\n    console.log(aucDetailinfo)\n    let deadlineA = new Date(aucDetailinfo.aucDeadline).getTime()\n    //第一次計算剩餘時間(不控制)\n    let newAucProductTimeRemaining = TimeRemaining(deadlineA)\n    // 第一次計算剩餘時間(react資料流)\n    // TimeRemaining(aucProduct.deadline)\n    // console.log(\"迅速\")\n    const cc = newAucProductTimeRemaining.reduce((a, b) => a + b)\n    if (cc < 0) {\n      console.log('競標結束')\n      setLoading('競標結束')\n      //結束計時器(雖然他還沒開始)\n      setIsRunning(false)\n    } else {\n      // console.log('競標繼續')\n    }\n  }, [aucDetailinfo])\n\n  //倒時計時器\n  useInterval(() => {\n    let deadlineA = new Date(aucDetailinfo.aucDeadline).getTime()\n    //設立一個變數來避免 setstate非同步問題\n    let TimeRemainingAA = TimeRemaining(deadlineA)\n    //更改state狀態\n    setAuctionDetailcountdown(TimeRemainingAA)\n    //利用加總來計算時間是否歸0\n    const bbb = TimeRemainingAA.reduce((a, b) => a + b)\n    //當時間歸0 競價停止 倒數停止 \n    if (bbb < 0) {\n      setAuctionrunning(false)\n      setIsRunning(false)\n      setLoading('競標結束')\n      console.log('bye')\n    } else {\n      // console.log(\"有進來嗎\")\n      setAuctionrunning(true)\n    }\n  }, isRunning ? delay : null)\n\n\n  // console.log('--------------------')\n  return (\n    <>\n      <div className=\"auctionDetailContent cn-font\">\n        <div className=\"auctionDetailleftContent\">\n          <div className=\"leftContent_firstpart\">\n            <div id=\"auctionDetailLOGO\">\n              <img src={ArtDDICTLOGbw} />\n            </div>\n            <div className=\"auctionDetailBreadcrumb\">\n              首頁/競標\n            </div>\n          </div>\n          <div className=\"leftContent_secondpart\">\n            <div className=\"auctionDetailTitle\">\n              {aucDetailinfo.aucName}\n            </div>\n            <div className=\"currentPrice\">\n              目前出價:NT${internationalNumberFormat.format(immediatePrice)}\n            </div>\n            <div>\n              {/* 最高出價者:{bidersInfo[0].name} */}\n            </div>\n          </div>\n          <div className=\"leftContent_thirdpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenOne(!openOne)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openOne}\n              >\n                <span className=\"mr-auto\">商品描述</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openOne}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  {aucDetailinfo.aucDes}\n                </div>\n              </div>\n            </Collapse>\n          </div>\n          <div className=\"leftContent_forthpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenTwo(!openTwo)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openTwo}\n              >\n                <span className=\"mr-auto\">商品規格</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openTwo}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  aaaa\n                </div>\n              </div>\n            </Collapse>\n          </div>\n          <div className=\"leftContent_fifthpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenThree(!openThree)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openThree}\n              >\n                <span className=\"mr-auto\">出價紀錄</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openThree}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  <div className=\"aucD-PriceTitle\">\n                    <div>出價者</div>\n                    <div>出價金額</div>\n                  </div>\n                  <div>\n                    {/* {console.log(bidersInfo)} */}\n                    {bidersInfo.map((biderInfoshow, i) => {\n                      return (\n                        <div className=\"aucD-PriceContent\" key={i}>\n                          <div className=\"aucD-bidder\">{bidersInfo[i].name}</div>\n                          <div className=\"aucD-bidAmount\">{bidersInfo[i].Price}</div>\n                        </div>\n                      )\n                    })}\n                  </div>\n                </div>\n              </div>\n            </Collapse>\n          </div>\n        </div>\n        {/* <div className=\"auc-vh\"> */}\n        <div className=\"rightContentFix\">\n          <div className=\"auctionDetailrightContent\">\n            {/* {console.log('render一波')} */}\n            <AuctionDetailcountDown\n              aucDetailinfo={aucDetailinfo}\n              setAucProduct={setAucProduct}\n              TimeRemaining={TimeRemaining}\n              auctionDetailcountdown={auctionDetailcountdown}\n              setAuctionDetailcountdown={setAuctionDetailcountdown}\n              auctionRunning={auctionRunning}\n              loading={loading}\n            />\n            {/* {console.log(\"rneder二波\")} */}\n            <div className=\"auctionDetailPicture\">\n              <img src={`http://localhost:6005/aucpics/auc/${aucDetailinfo.aucImg}`} alt=\"Background\" />\n            </div>\n            {isRunning ? (\n            <>\n            <div className=\"auctionDetailcurrentPriceInput\">\n              <div className=\"auctionDetailcurrentPriceAboveInput\">\n                目前出價:NT${internationalNumberFormat.format(immediatePrice)}\n              </div>\n              <div className=\"priceInput\" >\n                <input placeholder=\"請輸入下標價格\"\n                  value={inputbidPrice}\n                  onChange={(event) => { setInputbidPrice(event.target.value) }} />\n              </div>\n            </div>\n            <button className=\"auctionDetailButton \" onClick={bidPrice}>\n              下標\n            </button></>):(<div/>)}\n            {/* /***************************************** */}\n            {/* 彈出視窗 */}\n            <Modal\n              centered\n              show={show}\n              onHide={handleClose}\n              id=\"eventModal\"\n            >\n              <Modal.Header closeButton>\n                <Modal.Title>\n                  無法出價\n                </Modal.Title>\n              </Modal.Header>\n              <Modal.Body>\n                  <div>狀況1.您出的價錢並沒有高於目前最高價唷</div>\n                  <div>狀況2.您已經是目前最高價囉~</div>\n              </Modal.Body>\n              <Modal.Footer>\n                {/* <Button\n                  type=\"button\"\n                  className=\"e-btn-s e-modal-close\"\n                  onClick={handleClose}\n                >\n                  關閉\n                </Button> */}\n                <Button\n                  type=\"button\"\n                  className=\"e-btn-s e-modal-del\"\n                  onClick={() => {\n                    handleClose()\n                  }}\n                >\n                  我瞭解了\n                </Button>\n              </Modal.Footer>\n            </Modal>\n            {/* /***************************************** */}\n          </div>\n        </div>\n        {/* </div> */}\n      </div>\n    </>\n  );\n}\n\nexport default withRouter(AuctionDetail);\n\n"]},"metadata":{},"sourceType":"module"}