{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/cart/components/BasketAuction.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Cookies from 'universal-cookie';\nimport AuctionCountDown from './AuctionCountDown'; // icon\n\nimport { FaRegEdit } from 'react-icons/fa';\nimport { FaLock } from 'react-icons/fa';\nimport { RiDeleteBinLine } from 'react-icons/ri';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction BasketEvent() {\n  _s();\n\n  const cookies = new Cookies();\n  const [displaycartitems, setDisplayCartItems] = useState([]);\n  const [sqleventid, setSqlEventId] = useState('');\n  /**\n   * 當頁面Load時，讀取Cookie值並更新至cartItems\n   */\n\n  useEffect(() => {\n    let tempArr = [];\n    let tempArrId = [];\n    let cookieProductArr = cookies.get('auc'); // get Cookies\n\n    console.log(cookieProductArr);\n\n    if (cookieProductArr) {\n      for (let i = 0; i < cookieProductArr.length; i++) {\n        let product = cookieProductArr[i];\n        tempArr.push(product);\n        tempArrId.push(product.id.split('-')[0]);\n      }\n    }\n  }, []);\n  const itemsPrice = displaycartitems.reduce((a, c) => a + c.qty * c.eventPrice, 0);\n  const totalPrice = itemsPrice; // 去後台SQL撈資料\n\n  async function getEventIdServer() {\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/auctoin/auction-list'; // 注意資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      })\n    });\n    const response = await fetch(request); // 再把response變成json\n\n    const data = await response.json();\n    let cookieProductArr = cookies.get('auc');\n    console.log(cookieProductArr);\n    var temp = [];\n\n    if (cookieProductArr) {\n      for (let i = 0; i < data.length; i++) {\n        for (let j = 0; j < cookieProductArr.length; j++) {\n          let product = cookieProductArr[j];\n          setSqlEventId(product.id);\n\n          if (data[i].aucId == product.id.split('-')[0]) {\n            let eventtype = product.id.split('-')[1];\n            let eventqty = product.qty;\n            let newDisplay = {\n              id: data[i].id,\n              eventId: data[i].aucId,\n              eventName: data[i].aucName,\n              eventPrice: data[i].aucPriceNow,\n              eventImg: data[i].aucImg,\n              eventType: eventtype,\n              qty: eventqty\n            };\n            temp.push(newDisplay);\n          }\n        }\n      }\n    }\n\n    setDisplayCartItems(temp);\n    console.log(displaycartitems);\n  }\n\n  useEffect(() => {\n    getEventIdServer('', '', '');\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [displaycartitems.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-empty\",\n      children: \"\\u60A8\\u7684\\u8CFC\\u7269\\u8ECA\\u662F\\u7A7A\\u7684\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this), displaycartitems.map(item => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-product-r1 d-block d-flex py-5 pl-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c-img150\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `http://localhost:6005/Aucpics/auc/${item.eventImg}`,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c-product1detail d-flex flex-column justify-content-between col-4 pl-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"h4\",\n              children: item.eventName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"c-pid\",\n              children: [\"\\u62CD\\u8CE3\\u7DE8\\u865F # \", item.eventId]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 c-countdown\",\n              children: /*#__PURE__*/_jsxDEV(AuctionCountDown, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: item.eventType === '' ? 'd-none' : 'mt-2',\n              children: [\"\\u7968\\u7A2E\\uFF1A\", item.eventType]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-lg-flex\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"##\",\n              className: \"c-product-a d-flex align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(FaRegEdit, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"c-store2 ml-1 mr-4\",\n                children: \"\\u62CD\\u8CE3\\u7D30\\u7BC0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c-price d-flex flex-column align-items-center col-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-5\",\n            children: \"\\u50F9\\u683C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"NT$ \", item.eventPrice]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c-quantity d-flex flex-column align-items-center col-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-5\",\n            children: \"\\u6578\\u91CF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: item.qty\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c-total d-flex flex-column align-items-center col-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-5\",\n            children: \"\\u5C0F\\u8A08\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"NT$ \", item.qty * item.eventPrice]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)\n    }, void 0, false)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between mt-3 pt-3 pb-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: true,\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"##\",\n          className: \"c-store2 mr-5\",\n          children: \"\\u806F\\u7D61\\u5BA2\\u670D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"##\",\n          className: \"c-store2 d-block mt-2\",\n          children: \"\\u904B\\u8CBB\\uFF06\\u9000\\u8CA8\\u689D\\u6B3E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u7E3D\\u8A08\\uFF1A\", /*#__PURE__*/_jsxDEV(\"sapn\", {\n            className: \"h4\",\n            children: [\"NT$ \", totalPrice]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"##\",\n          className: \"c-store2 d-block ml-5 mt-3\",\n          children: \"\\u9078\\u53D6\\u4F60\\u7684\\u6298\\u6263\\u78BC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-checkout pt-4 d-flex justify-content-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(FaLock, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"c-lock ml-1\",\n          children: \"\\u672C\\u8CE3\\u5834\\u4F7F\\u7528\\u7DA0\\u754C\\u79D1\\u6280\\u5B89\\u5168\\u7D50\\u5E33\\u7CFB\\u7D71\\uFF0C\\u4FDD\\u969C\\u60A8\\u7684\\u8CC7\\u5B89\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: displaycartitems.length == 0,\n        className: \"c-checkoutbtn2\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"./cart-form-auction\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u7D50\\u5E33\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n\n_s(BasketEvent, \"oT1Do0792PRduN/heuqVX0sB47M=\");\n\n_c = BasketEvent;\nexport default BasketEvent;\n\nvar _c;\n\n$RefreshReg$(_c, \"BasketEvent\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/cart/components/BasketAuction.js"],"names":["React","useState","useEffect","Cookies","AuctionCountDown","FaRegEdit","FaLock","RiDeleteBinLine","BasketEvent","cookies","displaycartitems","setDisplayCartItems","sqleventid","setSqlEventId","tempArr","tempArrId","cookieProductArr","get","console","log","i","length","product","push","id","split","itemsPrice","reduce","a","c","qty","eventPrice","totalPrice","getEventIdServer","url","request","Request","method","headers","Headers","Accept","response","fetch","data","json","temp","j","aucId","eventtype","eventqty","newDisplay","eventId","eventName","aucName","aucPriceNow","eventImg","aucImg","eventType","map","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Cookies from 'universal-cookie'\nimport AuctionCountDown from './AuctionCountDown'\n\n// icon\nimport { FaRegEdit } from 'react-icons/fa'\nimport { FaLock } from 'react-icons/fa'\nimport { RiDeleteBinLine } from 'react-icons/ri'\n\nfunction BasketEvent() {\n  const cookies = new Cookies()\n  const [displaycartitems, setDisplayCartItems] = useState(\n    []\n  )\n  const [sqleventid, setSqlEventId] = useState('')\n\n  /**\n   * 當頁面Load時，讀取Cookie值並更新至cartItems\n   */\n  useEffect(() => {\n    let tempArr = []\n    let tempArrId = []\n    let cookieProductArr = cookies.get('auc') // get Cookies\n    console.log(cookieProductArr)\n\n    if (cookieProductArr) {\n      for (let i = 0; i < cookieProductArr.length; i++) {\n        let product = cookieProductArr[i]\n        tempArr.push(product)\n        tempArrId.push(product.id.split('-')[0])\n      }\n    }\n  }, [])\n\n  const itemsPrice = displaycartitems.reduce(\n    (a, c) => a + c.qty * c.eventPrice,\n    0\n  )\n  const totalPrice = itemsPrice\n\n  // 去後台SQL撈資料\n  async function getEventIdServer() {\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/auctoin/auction-list'\n\n    // 注意資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      }),\n    })\n    const response = await fetch(request)\n    // 再把response變成json\n    const data = await response.json()\n\n    let cookieProductArr = cookies.get('auc')\n    console.log(cookieProductArr)\n    var temp = []\n    if (cookieProductArr) {\n      for (let i = 0; i < data.length; i++) {\n        for (let j = 0; j < cookieProductArr.length; j++) {\n          let product = cookieProductArr[j]\n          setSqlEventId(product.id)\n\n          if (data[i].aucId == product.id.split('-')[0]) {\n            let eventtype = product.id.split('-')[1]\n            let eventqty = product.qty\n            let newDisplay = {\n              id: data[i].id,\n              eventId: data[i].aucId,\n              eventName: data[i].aucName,\n              eventPrice: data[i].aucPriceNow,\n              eventImg: data[i].aucImg,\n              eventType: eventtype,\n              qty: eventqty,\n            }\n            temp.push(newDisplay)\n          }\n        }\n      }\n    }\n    setDisplayCartItems(temp)\n    console.log(displaycartitems)\n  }\n\n  useEffect(() => {\n    getEventIdServer('', '', '')\n  }, [])\n\n  return (\n    <div>\n      {displaycartitems.length === 0 && (\n        <div className=\"c-empty\">您的購物車是空的</div>\n      )}\n      {displaycartitems.map((item) => (\n        <>\n          <div className=\"c-product-r1 d-block d-flex py-5 pl-4\">\n            <div className=\"c-img150\">\n              <img\n                src={`http://localhost:6005/Aucpics/auc/${item.eventImg}`}\n                alt=\"\"\n              />\n            </div>\n            <div className=\"c-product1detail d-flex flex-column justify-content-between col-4 pl-4\">\n              <div>\n                <p className=\"h4\">{item.eventName}</p>\n                <p className=\"c-pid\">\n                  拍賣編號 # {item.eventId}\n                </p>\n                <p className=\"mt-2 c-countdown\">\n                  <AuctionCountDown />\n                </p>\n                <p\n                  className={\n                    item.eventType === ''\n                      ? 'd-none'\n                      : 'mt-2'\n                  }\n                >\n                  票種：{item.eventType}\n                </p>\n              </div>\n              <div className=\"d-lg-flex\">\n                <a\n                  href=\"##\"\n                  className=\"c-product-a d-flex align-items-center\"\n                >\n                  <FaRegEdit size={20} />\n                  <p className=\"c-store2 ml-1 mr-4\">\n                    拍賣細節\n                  </p>\n                </a>\n              </div>\n            </div>\n            <div className=\"c-price d-flex flex-column align-items-center col-2\">\n              <p className=\"mb-5\">價格</p>\n              <p>NT$ {item.eventPrice}</p>\n            </div>\n            <div className=\"c-quantity d-flex flex-column align-items-center col-2\">\n              <p className=\"mb-5\">數量</p>\n              <p>{item.qty}</p>\n            </div>\n            <div className=\"c-total d-flex flex-column align-items-center col-2\">\n              <p className=\"mb-5\">小計</p>\n              <p>NT$ {item.qty * item.eventPrice}</p>\n            </div>\n          </div>\n        </>\n      ))}\n\n      <div className=\"d-flex justify-content-between mt-3 pt-3 pb-5\">\n        <div className>\n          <a href=\"##\" className=\"c-store2 mr-5\">\n            聯絡客服\n          </a>\n          <a href=\"##\" className=\"c-store2 d-block mt-2\">\n            運費＆退貨條款\n          </a>\n        </div>\n        <div>\n          <p>\n            總計：\n            <sapn className=\"h4\">NT$ {totalPrice}</sapn>\n          </p>\n          <a\n            href=\"##\"\n            className=\"c-store2 d-block ml-5 mt-3\"\n          >\n            選取你的折扣碼\n          </a>\n        </div>\n      </div>\n      <div className=\"c-checkout pt-4 d-flex justify-content-between\">\n        <div className=\"d-flex align-items-center\">\n          <FaLock size={20} />\n          <p className=\"c-lock ml-1\">\n            本賣場使用綠界科技安全結帳系統，保障您的資安\n          </p>\n        </div>\n        <button\n          disabled={displaycartitems.length == 0}\n          className=\"c-checkoutbtn2\"\n        >\n          <a href=\"./cart-form-auction\">\n            <p>結帳</p>\n          </a>\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default BasketEvent\n"]},"metadata":{},"sourceType":"module"}