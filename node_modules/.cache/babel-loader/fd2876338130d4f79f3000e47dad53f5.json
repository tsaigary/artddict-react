{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/Auction/AuctionDetail.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './style/auctionDetail.scss';\nimport { withRouter, Link } from 'react-router-dom';\nimport monkey from './images/monkey.jpg';\nimport ArtDDICTLOGbw from \"./images/ArtDDICTLOGbw.svg\";\nimport AuctionDetailcountDown from './components/AuctionDetailcountDown';\nimport useInterval from './components/useInterval';\nimport { Container, Row, Modal, Button, Collapse } from 'react-bootstrap';\nimport minusButton from \"./images/minusButton.svg\";\nimport webSocket from 'socket.io-client'; // react icons\n\nimport { IoIosArrowBack, IoIosArrowForward, IoIosArrowRoundDown, IoIosSearch, IoIosHeart, IoMdAdd, IoMdRemove } from 'react-icons/io'; //模擬伺服器端的資料\n\nimport { data } from './data/data.js';\nimport { array } from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AuctionDetail(props) {\n  _s();\n\n  // console.log(props.match.params.id)\n  //倒數計時器間隔\n  const [delay, setDelay] = useState(1000); //倒數計時器停止與否  \n\n  const [isRunning, setIsRunning] = useState(true); //是否要顯示倒數\n\n  const [auctionRunning, setAuctionrunning] = useState(false); //是否還在loading 若loading 會給予空白 loading完成 render在螢幕上\n\n  const [loading, setLoading] = useState(''); //商品描述開關\n\n  const [openOne, setOpenOne] = useState(false);\n  const [openTwo, setOpenTwo] = useState(false);\n  const [openThree, setOpenThree] = useState(false); //產品資料 id,aucClass,aucName,aucId,aucDes,aucDeadline,aucPriceNow,aucPriceStart\n\n  const [aucDetailinfo, setAucDetailInfo] = useState([]); //輸入的價錢\n\n  const [inputbidPrice, setInputbidPrice] = useState([]); //目前的出價(實時更新)\n\n  const [immediatePrice, setImmediatePrice] = useState(''); //出價資訊\n\n  const [bidersInfo, setBidersInfo] = useState([{\n    name: \"目前無人出價\",\n    price: \"\"\n  }]); //假設會員id\n\n  const [memberid, setMemberId] = useState(\"\"); //現在的頁面\n\n  const auc_Id = props.match.params.id; //千分位逗號分隔的api\n\n  const internationalNumberFormat = new Intl.NumberFormat('en-US'); // Modal 顯示狀態\n\n  const [show, setShow] = useState(false);\n  const [showB, setShowB] = useState(false); // Modal 開關 function\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const handleCloseB = () => setShowB(false);\n\n  const handleShowB = () => setShowB(true);\n\n  const [currentBiderPrice, setBurrentBiderPrice] = useState(); //剩餘時間\n\n  const [auctionDetailcountdown, setAuctionDetailcountdown] = useState([0, 0, 0, -1]); //預設資料物件\n\n  const [aucProduct, setAucProduct] = useState({\n    aucId: 0,\n    aucName: '',\n    aucPriceNow: 1,\n    deadline: 0\n  }); //驗證身分\n\n  async function getjwtvertifyFromServer() {\n    const token = localStorage.getItem('token');\n    const response = await fetch('http://localhost:6005/users/checklogin', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        token\n      })\n    });\n    const data = await response.json();\n    console.log(data);\n    setMemberId(data.id);\n  }\n  /**************************************************** */\n  //socket\n\n\n  const [socket, setSocket] = useState(null);\n\n  const io = require(\"socket.io-client\");\n\n  useEffect(() => {\n    setSocket(webSocket('http://localhost:3012'));\n  }, []);\n  useEffect(() => {\n    if (socket) {\n      //連線成功在 console 中打印訊息\n      console.log('success connect!');\n    }\n  }, [socket]);\n  useEffect(() => {\n    if (socket) {\n      socket.on('Message', message => {\n        if (message.inputbidPrice) {\n          // console.log(\"設定即時價格\", message)\n          setImmediatePrice(message.inputbidPrice);\n          setBidersInfo(message.auc_info);\n        }\n      });\n    }\n  }, [socket, bidersInfo]); //一鍵剩三秒\n\n  const threeSecondLeft = () => {\n    let a = new Date();\n    console.log(\"現在時間\", a);\n    a.setSeconds(a.getSeconds() + 3);\n    console.log(\"運送厚時間\", a);\n    aucDetailinfo.aucDeadline = a;\n  }; //發送出價消息\n\n\n  const bidPrice = () => {\n    // console.log(\"inputbidPrice\", inputbidPrice)\n    // console.log(\"immediatePrice\", immediatePrice)\n    if (!memberid) {\n      console.log('請先登入會員');\n      handleShowB(); // setInputbidPrice('')\n    } else if (inputbidPrice > immediatePrice) {\n      console.log(\"我出嫁了\");\n      socket.emit('bidPrice', {\n        inputbidPrice,\n        auc_Id,\n        memberid\n      });\n      setInputbidPrice('');\n    } else {\n      console.log(\"輸入價錢過低\");\n      handleShow();\n      setInputbidPrice('');\n    }\n  };\n\n  const sendMessage = () => {\n    //以 emit 送訊息，並以 getMessage 為名稱送給 server 捕捉\n    console.log(\"for server message\");\n    socket.emit('test', {\n      inputbidPrice,\n      auc_Id,\n      memberid\n    });\n  };\n  /**************************************************** */\n\n\n  let newAucProduct = [];\n\n  async function getAucProDetailFromServer(aucId) {\n    // 開啟載入指示\n    // setDataLoading(true)\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/auctoin' + `?aucId=${aucId}`; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json(); //輸入現在價位\n\n    console.log(data);\n    setImmediatePrice(data[0].aucPriceNow);\n    setAucDetailInfo(data[0]);\n    newAucProduct = data[0];\n    console.log(\"新\", newAucProduct);\n    data.shift();\n    console.log(data);\n\n    if (data.length) {\n      setBidersInfo(data);\n    }\n  } // console.log(props)\n  // console.log('delay',delay,'auctionRunning',auctionRunning,'loading',loading,'isRunning',isRunning,'aucProduct',aucProduct)\n\n\n  useEffect(() => {\n    //從資料庫抓取資料\n    getAucProDetailFromServer(props.match.params.id); //驗證身分\n\n    getjwtvertifyFromServer();\n  }, []); //計算剩餘時間 \n\n  function TimeRemaining(deadline) {\n    //截止時間(毫秒)\n    // 將資料拿到資料庫截止日期 從字串轉換成數字\n    const deadlineMin = parseInt(deadline); //現在時間(毫秒)\n\n    const timeRightNowA = new Date();\n    const timeRightNow = timeRightNowA.getTime();\n    const TimeRemaining = deadlineMin - timeRightNow;\n    const seconds = Math.floor(TimeRemaining / 1000 % 60);\n    const minutes = Math.floor(TimeRemaining / 1000 / 60 % 60);\n    const hours = Math.floor(TimeRemaining / (1000 * 60 * 60) % 24);\n    const days = Math.floor(TimeRemaining / (1000 * 60 * 60 * 24)); // console.log(days, \"天\", hours, '小時', minutes, '分鐘', seconds, '秒')\n\n    return [days, hours, minutes, seconds];\n  } // 初始化倒數計時器 可以在第一瞬間顯示是否競標結束\n\n\n  useEffect(() => {\n    console.log(aucDetailinfo);\n    let deadlineA = new Date(aucDetailinfo.aucDeadline).getTime(); //第一次計算剩餘時間(不控制)\n\n    let newAucProductTimeRemaining = TimeRemaining(deadlineA); // 第一次計算剩餘時間(react資料流)\n    // TimeRemaining(aucProduct.deadline)\n    // console.log(\"迅速\")\n\n    const cc = newAucProductTimeRemaining.reduce((a, b) => a + b);\n\n    if (cc < 0) {\n      console.log('競標結束');\n      setLoading('競標已結束'); //結束計時器(雖然他還沒開始)\n\n      setIsRunning(false);\n    } else {// console.log('競標繼續')\n    }\n  }, [aucDetailinfo]); //倒時計時器\n\n  useInterval(() => {\n    let deadlineA = new Date(aucDetailinfo.aucDeadline).getTime(); //設立一個變數來避免 setstate非同步問題\n\n    let TimeRemainingAA = TimeRemaining(deadlineA); //更改state狀態\n\n    setAuctionDetailcountdown(TimeRemainingAA); //利用加總來計算時間是否歸0\n\n    const bbb = TimeRemainingAA.reduce((a, b) => a + b); //當時間歸0 競價停止 倒數停止 \n\n    if (bbb < 0) {\n      setAuctionrunning(false);\n      setIsRunning(false);\n      setLoading('競標結束');\n      console.log('bye');\n      document.cookie = `auc=[{\"id\":\"${aucDetailinfo.aucId}-\",\"qty\":\"1\"}];path=/`;\n    } else {\n      // console.log(\"有進來嗎\")\n      setAuctionrunning(true);\n    }\n  }, isRunning ? delay : null); // async function getjwtvertifyFromServer() {\n  //   const token = localStorage.getItem('token');\n  //   const response = await fetch('http://localhost:6005/users/checklogin', {\n  //     method: 'POST',\n  //     headers: {\n  //       'Content-Type': 'application/json'\n  //     },\n  //     body: JSON.stringify({\n  //       token\n  //     })\n  //   });\n  //   const data = await response.json()\n  //   console.log(data)\n  // }\n  // console.log('--------------------')\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auctionDetailContent cn-font\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionDetailleftContent\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_firstpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"auctionDetailLOGO\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: ArtDDICTLOGbw\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"threesecondleft\",\n              onClick: threeSecondLeft\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailBreadcrumb\",\n            children: \"\\u9996\\u9801/\\u7AF6\\u6A19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_secondpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailTitle\",\n            children: aucDetailinfo.aucName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"currentPrice\",\n            children: [\"\\u76EE\\u524D\\u51FA\\u50F9:NT$\", internationalNumberFormat.format(immediatePrice)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\u6700\\u9AD8\\u51FA\\u50F9\\u8005:\", bidersInfo[0].name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_thirdpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenOne(!openOne),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openOne,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u5546\\u54C1\\u63CF\\u8FF0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openOne,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: aucDetailinfo.aucDes\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_forthpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenTwo(!openTwo),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openTwo,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u5546\\u54C1\\u898F\\u683C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openTwo,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"\\u756B\\u4E2D\\u4EBA\\u7269\\u7A7F\\u8457\\u7684\\u670D\\u98FE\\u662F\\u4E00\\u4EF6\\u8CEA\\u5730\\u512A\\u826F\\u7684\\u85CD\\u8272\\u4E18\\u5C3C\\u5361\\uFF0C\\u5B83\\u7684\\u8272\\u5F69\\u5728\\u7576\\u6642\\u975E\\u5E38\\u7F55\\u898B\\u3002\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"\\u9019\\u662F\\u4E00\\u5E45\\u86CB\\u5F69\\u756B\\u4F5C\\u54C1\\uFF0C\\u9577\\u5EA6\\u70BA58.7\\u5398\\u7C73\\uFF0C\\u5BEC\\u5EA6\\u70BA38.9\\u5398\\u7C73\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_fifthpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenThree(!openThree),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openThree,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u51FA\\u50F9\\u7D00\\u9304\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openThree,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"aucD-PriceTitle\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: \"\\u51FA\\u50F9\\u8005\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 390,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: \"\\u51FA\\u50F9\\u91D1\\u984D\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 391,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: bidersInfo.map((biderInfoshow, i) => {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"aucD-PriceContent\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"aucD-bidder\",\n                        children: bidersInfo[i].name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 398,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"aucD-bidAmount\",\n                        children: bidersInfo[i].Price\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 399,\n                        columnNumber: 27\n                      }, this)]\n                    }, i, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 397,\n                      columnNumber: 25\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rightContentFix\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionDetailrightContent\",\n          children: [/*#__PURE__*/_jsxDEV(AuctionDetailcountDown, {\n            aucDetailinfo: aucDetailinfo,\n            setAucProduct: setAucProduct,\n            TimeRemaining: TimeRemaining,\n            auctionDetailcountdown: auctionDetailcountdown,\n            setAuctionDetailcountdown: setAuctionDetailcountdown,\n            auctionRunning: auctionRunning,\n            loading: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailPicture\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: `http://localhost:6005/aucpics/auc/${aucDetailinfo.aucImg}`,\n              alt: \"Background\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 13\n          }, this), isRunning ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auctionDetailcurrentPriceInput\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailcurrentPriceAboveInput\",\n                children: [\"\\u76EE\\u524D\\u51FA\\u50F9:NT$\", internationalNumberFormat.format(immediatePrice)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"priceInput\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  placeholder: \"\\u8ACB\\u8F38\\u5165\\u4E0B\\u6A19\\u50F9\\u683C\",\n                  value: inputbidPrice,\n                  onChange: event => {\n                    setInputbidPrice(event.target.value);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auctionDetailButton \",\n              onClick: bidPrice,\n              children: \"\\u4E0B\\u6A19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auc-thankyou cn_font\",\n            children: \"\\u611F\\u8B1D\\u60A8\\u7684\\u53C3\\u8207!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 34\n          }, this), /*#__PURE__*/_jsxDEV(Modal, {\n            centered: true,\n            show: show,\n            onHide: handleClose,\n            id: \"eventModal\",\n            children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n              closeButton: true,\n              children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n                children: \"\\u7121\\u6CD5\\u51FA\\u50F9 !\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"\\u60A8\\u7684\\u51FA\\u50F9\\u5FC5\\u9808\\u9AD8\\u65BC\\u76EE\\u524D\\u6700\\u9AD8\\u50F9\\u5537!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"button\",\n                className: \"e-btn-s e-modal-del\",\n                onClick: () => {\n                  handleClose();\n                },\n                children: \"\\u6211\\u77AD\\u89E3\\u4E86\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal, {\n            centered: true,\n            show: showB,\n            onHide: handleCloseB,\n            id: \"eventModal\",\n            children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n              closeButton: true,\n              children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n                children: \"\\u7121\\u6CD5\\u51FA\\u50F9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"\\u60A8\\u76EE\\u524D\\u9084\\u672A\\u767B\\u5165\\u6703\\u54E1,\\u8ACB\\u767B\\u5165\\u6703\\u54E1\\u518D\\u9032\\u884C\\u51FA\\u50F9\\u5537\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"button\",\n                className: \"e-btn-s e-modal-del\",\n                onClick: () => {\n                  handleCloseB();\n                },\n                children: \"\\u6211\\u77AD\\u89E3\\u4E86\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(AuctionDetail, \"X91YI8C2xBaClk+aTwkaAL+eaVs=\", false, function () {\n  return [useInterval];\n});\n\n_c = AuctionDetail;\nexport default _c2 = withRouter(AuctionDetail);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AuctionDetail\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/Auction/AuctionDetail.js"],"names":["React","useEffect","useState","withRouter","Link","monkey","AuctionDetailcountDown","useInterval","Container","Row","Modal","Button","Collapse","webSocket","IoIosArrowBack","IoIosArrowForward","IoIosArrowRoundDown","IoIosSearch","IoIosHeart","IoMdAdd","IoMdRemove","data","array","AuctionDetail","props","delay","setDelay","isRunning","setIsRunning","auctionRunning","setAuctionrunning","loading","setLoading","openOne","setOpenOne","openTwo","setOpenTwo","openThree","setOpenThree","aucDetailinfo","setAucDetailInfo","inputbidPrice","setInputbidPrice","immediatePrice","setImmediatePrice","bidersInfo","setBidersInfo","name","price","memberid","setMemberId","auc_Id","match","params","id","internationalNumberFormat","Intl","NumberFormat","show","setShow","showB","setShowB","handleClose","handleShow","handleCloseB","handleShowB","currentBiderPrice","setBurrentBiderPrice","auctionDetailcountdown","setAuctionDetailcountdown","aucProduct","setAucProduct","aucId","aucName","aucPriceNow","deadline","getjwtvertifyFromServer","token","localStorage","getItem","response","fetch","method","headers","body","JSON","stringify","json","console","log","socket","setSocket","io","require","on","message","auc_info","threeSecondLeft","a","Date","setSeconds","getSeconds","aucDeadline","bidPrice","emit","sendMessage","newAucProduct","getAucProDetailFromServer","url","request","Request","Headers","Accept","shift","length","TimeRemaining","deadlineMin","parseInt","timeRightNowA","timeRightNow","getTime","seconds","Math","floor","minutes","hours","days","deadlineA","newAucProductTimeRemaining","cc","reduce","b","TimeRemainingAA","bbb","document","cookie","ArtDDICTLOGbw","format","aucDes","map","biderInfoshow","i","Price","aucImg","event","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './style/auctionDetail.scss';\nimport { withRouter, Link } from 'react-router-dom'\nimport monkey from './images/monkey.jpg'\nimport ArtDDICTLOGbw from './images/ArtDDICTLOGbw.svg'\nimport AuctionDetailcountDown from './components/AuctionDetailcountDown'\nimport useInterval from './components/useInterval'\nimport { Container, Row, Modal, Button, Collapse, } from 'react-bootstrap'\nimport minusButton from './images/minusButton.svg'\nimport webSocket from 'socket.io-client'\n\n// react icons\nimport {\n  IoIosArrowBack,\n  IoIosArrowForward,\n  IoIosArrowRoundDown,\n  IoIosSearch,\n  IoIosHeart,\n  IoMdAdd,\n  IoMdRemove,\n} from 'react-icons/io'\n\n\n//模擬伺服器端的資料\nimport { data } from './data/data.js'\nimport { array } from 'prop-types';\n\nfunction AuctionDetail(props) {\n  // console.log(props.match.params.id)\n  //倒數計時器間隔\n  const [delay, setDelay] = useState(1000);\n  //倒數計時器停止與否  \n  const [isRunning, setIsRunning] = useState(true);\n\n  //是否要顯示倒數\n  const [auctionRunning, setAuctionrunning] = useState(false)\n  //是否還在loading 若loading 會給予空白 loading完成 render在螢幕上\n  const [loading, setLoading] = useState('')\n\n  //商品描述開關\n  const [openOne, setOpenOne] = useState(false);\n  const [openTwo, setOpenTwo] = useState(false);\n  const [openThree, setOpenThree] = useState(false);\n  //產品資料 id,aucClass,aucName,aucId,aucDes,aucDeadline,aucPriceNow,aucPriceStart\n  const [aucDetailinfo, setAucDetailInfo] = useState([])\n\n  //輸入的價錢\n  const [inputbidPrice, setInputbidPrice] = useState([])\n\n  //目前的出價(實時更新)\n  const [immediatePrice, setImmediatePrice] = useState('')\n\n  //出價資訊\n  const [bidersInfo, setBidersInfo] = useState([\n    {\n      name: \"目前無人出價\",\n      price: \"\"\n    }])\n\n  //假設會員id\n  const [memberid, setMemberId] = useState(\"\")\n  //現在的頁面\n  const auc_Id = props.match.params.id\n\n  //千分位逗號分隔的api\n  const internationalNumberFormat = new Intl.NumberFormat('en-US')\n\n  // Modal 顯示狀態\n  const [show, setShow] = useState(false)\n  const [showB, setShowB] = useState(false)\n  // Modal 開關 function\n  const handleClose = () => setShow(false)\n  const handleShow = () => setShow(true)\n\n  const handleCloseB = () => setShowB(false)\n  const handleShowB = () => setShowB(true)\n\n  const [currentBiderPrice, setBurrentBiderPrice] = useState()\n  //剩餘時間\n  const [auctionDetailcountdown, setAuctionDetailcountdown] = useState([0, 0, 0, -1])\n  //預設資料物件\n  const [aucProduct, setAucProduct] = useState(\n    {\n      aucId: 0,\n      aucName: '',\n      aucPriceNow: 1,\n      deadline: 0,\n    }\n  )\n  //驗證身分\n    async function getjwtvertifyFromServer() {\n\n      const token = localStorage.getItem('token');\n  \n      const response = await fetch('http://localhost:6005/users/checklogin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          token\n        })\n      });\n  \n      const data = await response.json()\n      console.log(data)\n      setMemberId(data.id)\n    }\n  \n  /**************************************************** */\n  //socket\n  const [socket, setSocket] = useState(null)\n  const io = require(\"socket.io-client\");\n\n  useEffect(() => {\n    setSocket(webSocket('http://localhost:3012'))\n  }, [])\n\n  useEffect(() => {\n    if (socket) {\n      //連線成功在 console 中打印訊息\n      console.log('success connect!')\n    }\n  }, [socket])\n\n\n  useEffect(() => {\n    if (socket) {\n      socket.on('Message', message => {\n        if (message.inputbidPrice) {\n          // console.log(\"設定即時價格\", message)\n          setImmediatePrice(message.inputbidPrice)\n          setBidersInfo(message.auc_info)\n        }\n      })\n    }\n  }, [socket, bidersInfo])\n\n  //一鍵剩三秒\n  const threeSecondLeft = () =>{\n    let a = new Date()\n    console.log(\"現在時間\",a)\n    a.setSeconds(a.getSeconds()+3)\n    console.log(\"運送厚時間\",a)\n    aucDetailinfo.aucDeadline = a\n  }\n\n  //發送出價消息\n  const bidPrice = () => {\n    // console.log(\"inputbidPrice\", inputbidPrice)\n    // console.log(\"immediatePrice\", immediatePrice)\n    if(!memberid){\n      console.log('請先登入會員')\n      handleShowB()\n      // setInputbidPrice('')\n    }else if (inputbidPrice > immediatePrice) {\n      console.log(\"我出嫁了\")\n      socket.emit('bidPrice', { inputbidPrice, auc_Id, memberid })\n      setInputbidPrice('')\n    } else {\n      console.log(\"輸入價錢過低\")\n      handleShow()\n      setInputbidPrice('')\n    }\n  }\n  const sendMessage = () => {\n    //以 emit 送訊息，並以 getMessage 為名稱送給 server 捕捉\n    console.log(\"for server message\")\n    socket.emit('test', { inputbidPrice, auc_Id, memberid })\n  }\n\n\n  /**************************************************** */\n\n  let newAucProduct = [];\n  async function getAucProDetailFromServer(aucId) {\n    // 開啟載入指示\n    // setDataLoading(true)\n\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/auctoin' + `?aucId=${aucId}`\n\n    // 注意header資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n\n    const response = await fetch(request)\n    const data = await response.json()\n    //輸入現在價位\n    console.log(data)\n    setImmediatePrice(data[0].aucPriceNow)\n    setAucDetailInfo(data[0])\n    newAucProduct = data[0]\n    console.log(\"新\", newAucProduct)\n    data.shift()\n    console.log(data)\n    if(data.length){\n    setBidersInfo(data)\n    }\n  }\n\n  // console.log(props)\n\n  // console.log('delay',delay,'auctionRunning',auctionRunning,'loading',loading,'isRunning',isRunning,'aucProduct',aucProduct)\n\n  useEffect(() => {\n    //從資料庫抓取資料\n    getAucProDetailFromServer(props.match.params.id)\n    //驗證身分\n    getjwtvertifyFromServer()\n  }, [])\n\n  //計算剩餘時間 \n  function TimeRemaining(deadline) {\n    //截止時間(毫秒)\n    // 將資料拿到資料庫截止日期 從字串轉換成數字\n    const deadlineMin = parseInt(deadline)\n\n    //現在時間(毫秒)\n    const timeRightNowA = new Date()\n    const timeRightNow = timeRightNowA.getTime()\n\n    const TimeRemaining = deadlineMin - timeRightNow\n\n    const seconds = Math.floor((TimeRemaining / 1000) % 60);\n    const minutes = Math.floor((TimeRemaining / 1000 / 60) % 60);\n    const hours = Math.floor((TimeRemaining / (1000 * 60 * 60)) % 24);\n    const days = Math.floor(TimeRemaining / (1000 * 60 * 60 * 24));\n    // console.log(days, \"天\", hours, '小時', minutes, '分鐘', seconds, '秒')\n\n\n    return [days, hours, minutes, seconds]\n\n  }\n\n  // 初始化倒數計時器 可以在第一瞬間顯示是否競標結束\n  useEffect(() => {\n    console.log(aucDetailinfo)\n    let deadlineA = new Date(aucDetailinfo.aucDeadline).getTime()\n    //第一次計算剩餘時間(不控制)\n    let newAucProductTimeRemaining = TimeRemaining(deadlineA)\n    // 第一次計算剩餘時間(react資料流)\n    // TimeRemaining(aucProduct.deadline)\n    // console.log(\"迅速\")\n    const cc = newAucProductTimeRemaining.reduce((a, b) => a + b)\n    if (cc < 0) {\n      console.log('競標結束')\n      setLoading('競標已結束')\n      //結束計時器(雖然他還沒開始)\n      setIsRunning(false)\n    } else {\n      // console.log('競標繼續')\n    }\n  }, [aucDetailinfo])\n\n  //倒時計時器\n  useInterval(() => {\n    let deadlineA = new Date(aucDetailinfo.aucDeadline).getTime()\n    //設立一個變數來避免 setstate非同步問題\n    let TimeRemainingAA = TimeRemaining(deadlineA)\n    //更改state狀態\n    setAuctionDetailcountdown(TimeRemainingAA)\n    //利用加總來計算時間是否歸0\n    const bbb = TimeRemainingAA.reduce((a, b) => a + b)\n    //當時間歸0 競價停止 倒數停止 \n    if (bbb < 0) {\n      setAuctionrunning(false)\n      setIsRunning(false)\n      setLoading('競標結束')\n      console.log('bye')\n      document.cookie = `auc=[{\"id\":\"${aucDetailinfo.aucId}-\",\"qty\":\"1\"}];path=/` \n    } else {\n      // console.log(\"有進來嗎\")\n      setAuctionrunning(true)\n    }\n  }, isRunning ? delay : null)\n\n  // async function getjwtvertifyFromServer() {\n\n  //   const token = localStorage.getItem('token');\n\n  //   const response = await fetch('http://localhost:6005/users/checklogin', {\n  //     method: 'POST',\n  //     headers: {\n  //       'Content-Type': 'application/json'\n  //     },\n  //     body: JSON.stringify({\n  //       token\n  //     })\n  //   });\n\n  //   const data = await response.json()\n  //   console.log(data)\n  // }\n\n  // console.log('--------------------')\n  return (\n    <>\n      <div className=\"auctionDetailContent cn-font\">\n        <div className=\"auctionDetailleftContent\">\n          <div className=\"leftContent_firstpart\">\n            <div id=\"auctionDetailLOGO\">\n              <img src={ArtDDICTLOGbw} />\n              {/* 一鍵剩三秒 */}\n              <button className=\"threesecondleft\" onClick={threeSecondLeft}></button>\n            </div>\n            <div className=\"auctionDetailBreadcrumb\">\n              首頁/競標\n            </div>\n          </div>\n          <div className=\"leftContent_secondpart\">\n            <div className=\"auctionDetailTitle\">\n              {aucDetailinfo.aucName}\n            </div>\n            <div className=\"currentPrice\">\n              目前出價:NT${internationalNumberFormat.format(immediatePrice)}\n            </div>\n            <div>\n              最高出價者:{bidersInfo[0].name}\n            </div>\n          </div>\n          <div className=\"leftContent_thirdpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenOne(!openOne)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openOne}\n              >\n                <span className=\"mr-auto\">商品描述</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openOne}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  {aucDetailinfo.aucDes}\n                </div>\n              </div>\n            </Collapse>\n          </div>\n          <div className=\"leftContent_forthpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenTwo(!openTwo)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openTwo}\n              >\n                <span className=\"mr-auto\">商品規格</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openTwo}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  <div>畫中人物穿著的服飾是一件質地優良的藍色丘尼卡，它的色彩在當時非常罕見。</div>\n                  <div>這是一幅蛋彩畫作品，長度為58.7厘米，寬度為38.9厘米</div>\n                </div>\n              </div>\n            </Collapse>\n          </div>\n          <div className=\"leftContent_fifthpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenThree(!openThree)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openThree}\n              >\n                <span className=\"mr-auto\">出價紀錄</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openThree}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  <div className=\"aucD-PriceTitle\">\n                    <div>出價者</div>\n                    <div>出價金額</div>\n                  </div>\n                  <div>\n                    {/* {console.log(bidersInfo)} */}\n                    {bidersInfo.map((biderInfoshow, i) => {\n                      return (\n                        <div className=\"aucD-PriceContent\" key={i}>\n                          <div className=\"aucD-bidder\">{bidersInfo[i].name}</div>\n                          <div className=\"aucD-bidAmount\">{bidersInfo[i].Price}</div>\n                        </div>\n                      )\n                    })}\n                  </div>\n                </div>\n              </div>\n            </Collapse>\n          </div>\n        </div>\n        {/* <div className=\"auc-vh\"> */}\n        <div className=\"rightContentFix\">\n          <div className=\"auctionDetailrightContent\">\n            {/* {console.log('render一波')} */}\n            <AuctionDetailcountDown\n              aucDetailinfo={aucDetailinfo}\n              setAucProduct={setAucProduct}\n              TimeRemaining={TimeRemaining}\n              auctionDetailcountdown={auctionDetailcountdown}\n              setAuctionDetailcountdown={setAuctionDetailcountdown}\n              auctionRunning={auctionRunning}\n              loading={loading}\n            />\n            {/* {console.log(\"rneder二波\")} */}\n            <div className=\"auctionDetailPicture\">\n              <img src={`http://localhost:6005/aucpics/auc/${aucDetailinfo.aucImg}`} alt=\"Background\" />\n            </div>\n            {isRunning ? (\n              <>\n                <div className=\"auctionDetailcurrentPriceInput\">\n                  <div className=\"auctionDetailcurrentPriceAboveInput\">\n                    目前出價:NT${internationalNumberFormat.format(immediatePrice)}\n                  </div>\n                  <div className=\"priceInput\" >\n                    <input placeholder=\"請輸入下標價格\"\n                      value={inputbidPrice}\n                      onChange={(event) => { setInputbidPrice(event.target.value) }} />\n                  </div>\n                </div>\n                <button className=\"auctionDetailButton \" onClick={bidPrice}>\n                  下標\n                </button></>) : (<div className=\"auc-thankyou cn_font\">感謝您的參與!</div>)}\n            {/* /***************************************** */}\n            {/* 彈出視窗 */}\n            <Modal\n              centered\n              show={show}\n              onHide={handleClose}\n              id=\"eventModal\"\n            >\n              <Modal.Header closeButton>\n                <Modal.Title>\n                  無法出價 !\n                </Modal.Title>\n              </Modal.Header>\n              <Modal.Body>\n                <div>您的出價必須高於目前最高價唷!</div>\n              </Modal.Body>\n              <Modal.Footer>\n                {/* <Button\n                  type=\"button\"\n                  className=\"e-btn-s e-modal-close\"\n                  onClick={handleClose}\n                >\n                  關閉\n                </Button> */}\n                <Button\n                  type=\"button\"\n                  className=\"e-btn-s e-modal-del\"\n                  onClick={() => {\n                    handleClose()\n                  }}\n                >\n                  我瞭解了\n                </Button>\n              </Modal.Footer>\n            </Modal>\n            {/* /***************************************** */}\n            {/* 彈出視窗 */}\n            <Modal\n              centered\n              show={showB}\n              onHide={handleCloseB}\n              id=\"eventModal\"\n            >\n              <Modal.Header closeButton>\n                <Modal.Title>\n                  無法出價\n                </Modal.Title>\n              </Modal.Header>\n              <Modal.Body>\n                <div>您目前還未登入會員,請登入會員再進行出價唷</div>\n              </Modal.Body>\n              <Modal.Footer>\n                {/* <Button\n                  type=\"button\"\n                  className=\"e-btn-s e-modal-close\"\n                  onClick={handleClose}\n                >\n                  關閉\n                </Button> */}\n                <Button\n                  type=\"button\"\n                  className=\"e-btn-s e-modal-del\"\n                  onClick={() => {\n                    handleCloseB()\n                  }}\n                >\n                  我瞭解了\n                </Button>\n              </Modal.Footer>\n            </Modal>\n          </div>\n        </div>\n        {/* </div> */}\n      </div>\n    </>\n  );\n}\n\nexport default withRouter(AuctionDetail);\n\n"]},"metadata":{},"sourceType":"module"}