{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/map/components/LeafLet2.js\";\nimport React from 'react';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport { MdLocationCity } from 'react-icons/md';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass LeafLet2 extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      osmMap: '',\n      center: [25.072615859459205, 121.52481019741808],\n      zoom: 8\n    };\n  }\n\n  componentDidMount() {\n    //console.log(this)\n    // //? 測試的資料\n    // const data = [\n    //   {\n    //     name: '夢時代購物中心',\n    //     lat: '22.595153',\n    //     lng: '120.306923',\n    //   },\n    //   {\n    //     name: '漢神百貨',\n    //     lat: '22.61942',\n    //     lng: '120.296386',\n    //   },\n    //   {\n    //     name: '漢神巨蛋',\n    //     lat: '22.669603',\n    //     lng: '120.302288',\n    //   },\n    //   {\n    //     name: '大統百貨',\n    //     lat: '22.630748',\n    //     lng: '120.318033',\n    //   },\n    // ]\n    // create map\n    this.setState({\n      osmMap: L.map('osm-map', {\n        //初始位置坐標\n        center: this.state.center,\n        zoom: this.state.zoom,\n        layers: [L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}', {\n          attribution: 'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n          subdomains: 'abcd',\n          minZoom: 0,\n          maxZoom: 20,\n          ext: 'png'\n        })]\n      })\n    }); // 使用 leaflet-color-markers ( https://github.com/pointhi/leaflet-color-markers ) 當作 marker\n    // //?套件 L.MarkerCluster當資料很多的時候只顯示區域總數(TODO)\n    // //let markers = new L.MarkerClusterGroup().addTO(osmMap)\n  } //componentDidUpdate是無法拿到更改過的父層屬性的\n  //要用componentWillReceiveProps偵查是否有新的富曾屬性傳入\n\n\n  componentWillReceiveProps(nextProps) {\n    console.log('nextProps.museums', nextProps.museums); //flyto\n\n    this.state.osmMap.flyTo([nextProps.museums[0].Px, nextProps.museums[0].Py], 17);\n    const greenIcon = new L.Icon({\n      iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n      shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n      iconSize: [25, 41],\n      iconAnchor: [12, 41],\n      popupAnchor: [1, -34],\n      shadowSize: [41, 41]\n    }); // L.marker([24.048828481572784, 120.68847639336789], {\n    //   icon: greenIcon,\n    // })\n    //   .addTo(this.state.osmMap)\n    //   .bindPopup(`<b>hello</b>`)\n\n    for (let i = 0; nextProps.museums.length > i; i++) {\n      L.marker([nextProps.museums[i].Px, nextProps.museums[i].Py], {\n        icon: greenIcon\n      }).addTo(this.state.osmMap).bindPopup(`<Link><b>${nextProps.museums[i].musName}</b><br><button >查看活動<button></Link>`);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"osm-map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nexport default LeafLet2;","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/map/components/LeafLet2.js"],"names":["React","L","MdLocationCity","LeafLet2","Component","constructor","state","osmMap","center","zoom","componentDidMount","setState","map","layers","tileLayer","attribution","subdomains","minZoom","maxZoom","ext","componentWillReceiveProps","nextProps","console","log","museums","flyTo","Px","Py","greenIcon","Icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","i","length","marker","icon","addTo","bindPopup","musName","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport 'leaflet/dist/leaflet.css'\nimport L from 'leaflet'\nimport { MdLocationCity } from 'react-icons/md'\n\nclass LeafLet2 extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      osmMap: '',\n      center: [25.072615859459205, 121.52481019741808],\n      zoom: 8,\n    }\n  }\n\n  componentDidMount() {\n    //console.log(this)\n\n    // //? 測試的資料\n    // const data = [\n    //   {\n    //     name: '夢時代購物中心',\n    //     lat: '22.595153',\n    //     lng: '120.306923',\n    //   },\n    //   {\n    //     name: '漢神百貨',\n    //     lat: '22.61942',\n    //     lng: '120.296386',\n    //   },\n    //   {\n    //     name: '漢神巨蛋',\n    //     lat: '22.669603',\n    //     lng: '120.302288',\n    //   },\n    //   {\n    //     name: '大統百貨',\n    //     lat: '22.630748',\n    //     lng: '120.318033',\n    //   },\n    // ]\n    // create map\n    this.setState({\n      osmMap: L.map('osm-map', {\n        //初始位置坐標\n        center: this.state.center,\n        zoom: this.state.zoom,\n        layers: [\n          L.tileLayer(\n            'https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}',\n            {\n              attribution:\n                'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n              subdomains: 'abcd',\n              minZoom: 0,\n              maxZoom: 20,\n              ext: 'png',\n            }\n          ),\n        ],\n      }),\n    })\n\n    // 使用 leaflet-color-markers ( https://github.com/pointhi/leaflet-color-markers ) 當作 marker\n    // //?套件 L.MarkerCluster當資料很多的時候只顯示區域總數(TODO)\n    // //let markers = new L.MarkerClusterGroup().addTO(osmMap)\n  }\n\n  //componentDidUpdate是無法拿到更改過的父層屬性的\n  //要用componentWillReceiveProps偵查是否有新的富曾屬性傳入\n\n  componentWillReceiveProps(nextProps) {\n    console.log('nextProps.museums', nextProps.museums)\n\n    //flyto\n    this.state.osmMap.flyTo(\n      [nextProps.museums[0].Px, nextProps.museums[0].Py],\n      17\n    )\n\n    const greenIcon = new L.Icon({\n      iconUrl:\n        'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n      shadowUrl:\n        'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n      iconSize: [25, 41],\n      iconAnchor: [12, 41],\n      popupAnchor: [1, -34],\n      shadowSize: [41, 41],\n    })\n\n    // L.marker([24.048828481572784, 120.68847639336789], {\n    //   icon: greenIcon,\n    // })\n    //   .addTo(this.state.osmMap)\n    //   .bindPopup(`<b>hello</b>`)\n\n    for (let i = 0; nextProps.museums.length > i; i++) {\n      L.marker(\n        [nextProps.museums[i].Px, nextProps.museums[i].Py],\n        {\n          icon: greenIcon,\n        }\n      )\n        .addTo(this.state.osmMap)\n        .bindPopup(\n          `<Link><b>${nextProps.museums[i].musName}</b><br><button >查看活動<button></Link>`\n        )\n    }\n  }\n\n  render() {\n    return <div id=\"osm-map\"></div>\n  }\n}\n\nexport default LeafLet2\n"]},"metadata":{},"sourceType":"module"}