{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/Auction/AuctionDetail.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './style/auctionDetail.scss';\nimport { withRouter, Link } from 'react-router-dom';\nimport monkey from './images/monkey.jpg';\nimport ArtDDICTLOGbw from \"./images/ArtDDICTLOGbw.svg\";\nimport AuctionDetailcountDown from './components/AuctionDetailcountDown';\nimport useInterval from './components/useInterval';\nimport { Container, Row, Button, Collapse } from 'react-bootstrap';\nimport minusButton from \"./images/minusButton.svg\"; // react icons\n\nimport { IoIosArrowBack, IoIosArrowForward, IoIosArrowRoundDown, IoIosSearch, IoIosHeart, IoMdAdd, IoMdRemove } from 'react-icons/io'; //模擬伺服器端的資料\n\nimport { data } from './data/data.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AuctionDetail(props) {\n  _s();\n\n  // console.log(props.match.params.id)\n  //倒數計時器間隔\n  const [delay, setDelay] = useState(500); //倒數計時器停止與否  \n\n  const [isRunning, setIsRunning] = useState(true); //是否要顯示倒數\n\n  const [auctionRunning, setAuctionrunning] = useState(false); //是否還在loading 若loading 會給予空白 loading完成 render在螢幕上\n\n  const [loading, setLoading] = useState(''); //商品描述開關\n\n  const [openOne, setOpenOne] = useState(false);\n  const [openTwo, setOpenTwo] = useState(false);\n  const [openThree, setOpenThree] = useState(false);\n  const [aucDetailinfo, setAucDetailInfo] = useState([]); //千分位逗號分隔的api\n\n  const internationalNumberFormat = new Intl.NumberFormat('en-US'); //剩餘時間\n\n  const [auctionDetailcountdown, setAuctionDetailcountdown] = useState([0, 0, 0, -1]); //預設資料物件\n\n  const [aucProduct, setAucProduct] = useState({\n    aucId: 0,\n    aucName: '',\n    aucPriceNow: 1,\n    deadline: 0\n  });\n  let newAucProduct = [];\n\n  async function getAucProDetailFromServer(aucId) {\n    // 開啟載入指示\n    // setDataLoading(true)\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/auctoin/' + aucId; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json(); // 設定資料\n\n    setAucDetailInfo(data);\n    newAucProduct = data;\n  } // console.log(props)\n  // console.log('delay',delay,'auctionRunning',auctionRunning,'loading',loading,'isRunning',isRunning,'aucProduct',aucProduct)\n\n\n  useEffect(() => {\n    //從資料庫抓取資料\n    getAucProDetailFromServer(props.match.params.id);\n  }, []); //計算剩餘時間 \n\n  function TimeRemaining(deadline) {\n    //截止時間(毫秒)\n    // 將資料拿到資料庫截止日期 從字串轉換成數字\n    const deadlineMin = parseInt(deadline); //現在時間(毫秒)\n\n    const timeRightNowA = new Date();\n    const timeRightNow = timeRightNowA.getTime();\n    const TimeRemaining = deadlineMin - timeRightNow;\n    const seconds = Math.floor(TimeRemaining / 1000 % 60);\n    const minutes = Math.floor(TimeRemaining / 1000 / 60 % 60);\n    const hours = Math.floor(TimeRemaining / (1000 * 60 * 60) % 24);\n    const days = Math.floor(TimeRemaining / (1000 * 60 * 60 * 24)); // console.log(days, \"天\", hours, '小時', minutes, '分鐘', seconds, '秒')\n\n    return [days, hours, minutes, seconds];\n  } // 初始化倒數計時器 可以在第一瞬間顯示是否競標結束\n\n\n  useEffect(() => {\n    let deadlineA = new Date(newAucProduct.aucDeadline).getTime(); //第一次計算剩餘時間(不控制)\n\n    let newAucProductTimeRemaining = TimeRemaining(deadlineA); //第一次計算剩餘時間(react資料流)\n    // TimeRemaining(aucProduct.deadline)\n\n    const cc = newAucProductTimeRemaining.reduce((a, b) => a + b);\n\n    if (cc < 0) {\n      // console.log('競標結束')\n      setLoading('競標結束'); //結束計時器(雖然他還沒開始)\n\n      setIsRunning(false);\n    } else {// console.log('競標繼續')\n    }\n  }, []); //倒時計時器\n\n  useInterval(() => {\n    let deadlineA = new Date(aucDetailinfo.aucDeadline).getTime(); //設立一個變數來避免 setstate非同步問題\n\n    let TimeRemainingAA = TimeRemaining(deadlineA); //更改state狀態\n\n    setAuctionDetailcountdown(TimeRemainingAA); //利用加總來計算時間是否歸0\n\n    const bbb = TimeRemainingAA.reduce((a, b) => a + b); //當時間歸0 競價停止 倒數停止 \n\n    if (bbb < 0) {\n      setAuctionrunning(false);\n      setIsRunning(false);\n      setLoading('競標結束');\n      console.log('bye');\n    } else {\n      // console.log(\"有進來嗎\")\n      setAuctionrunning(true);\n    }\n  }, isRunning ? delay : null); // console.log('--------------------')\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auctionDetailContent cn-font\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionDetailleftContent\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_firstpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"auctionDetailLOGO\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: ArtDDICTLOGbw\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailBreadcrumb\",\n            children: \"\\u9996\\u9801/\\u7AF6\\u6A19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_secondpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailTitle\",\n            children: aucDetailinfo.aucName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"currentPrice\",\n            children: [\"\\u76EE\\u524D\\u51FA\\u50F9:NT$\", internationalNumberFormat.format(aucProduct.aucPriceNow)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"\\u6700\\u9AD8\\u51FA\\u50F9\\u8005:\\u8B1D*\\u5FC3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_thirdpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenOne(!openOne),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openOne,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u5546\\u54C1\\u63CF\\u8FF0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openOne,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: aucDetailinfo.aucDes\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_forthpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenTwo(!openTwo),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openTwo,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u5546\\u54C1\\u898F\\u683C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openTwo,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: \"aaaa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_fifthpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenThree(!openThree),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openThree,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u51FA\\u50F9\\u7D00\\u9304\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openThree,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: \"aaaa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rightContentFix\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionDetailrightContent\",\n          children: [/*#__PURE__*/_jsxDEV(AuctionDetailcountDown, {\n            aucDetailinfo: aucDetailinfo,\n            setAucProduct: setAucProduct,\n            TimeRemaining: TimeRemaining,\n            auctionDetailcountdown: auctionDetailcountdown,\n            setAuctionDetailcountdown: setAuctionDetailcountdown,\n            auctionRunning: auctionRunning,\n            loading: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailPicture\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: `http://localhost:6005/aucpics/auc/${aucDetailinfo.aucImg}`,\n              alt: \"Background\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailcurrentPriceInput\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auctionDetailcurrentPriceAboveInput\",\n              children: [\"\\u76EE\\u524D\\u51FA\\u50F9:NT$\", internationalNumberFormat.format(aucProduct.aucPriceNow)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"priceInput\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"\\u8ACB\\u8F38\\u5165\\u4E0B\\u6A19\\u50F9\\u683C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"auctionDetailButton\",\n            children: \"\\u4E0B\\u6A19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(AuctionDetail, \"ECN+/9ZnVkVtD8b5F2jzhtzL/jk=\", false, function () {\n  return [useInterval];\n});\n\n_c = AuctionDetail;\nexport default _c2 = withRouter(AuctionDetail);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AuctionDetail\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/Auction/AuctionDetail.js"],"names":["React","useEffect","useState","withRouter","Link","monkey","AuctionDetailcountDown","useInterval","Container","Row","Button","Collapse","IoIosArrowBack","IoIosArrowForward","IoIosArrowRoundDown","IoIosSearch","IoIosHeart","IoMdAdd","IoMdRemove","data","AuctionDetail","props","delay","setDelay","isRunning","setIsRunning","auctionRunning","setAuctionrunning","loading","setLoading","openOne","setOpenOne","openTwo","setOpenTwo","openThree","setOpenThree","aucDetailinfo","setAucDetailInfo","internationalNumberFormat","Intl","NumberFormat","auctionDetailcountdown","setAuctionDetailcountdown","aucProduct","setAucProduct","aucId","aucName","aucPriceNow","deadline","newAucProduct","getAucProDetailFromServer","url","request","Request","method","headers","Headers","Accept","response","fetch","json","match","params","id","TimeRemaining","deadlineMin","parseInt","timeRightNowA","Date","timeRightNow","getTime","seconds","Math","floor","minutes","hours","days","deadlineA","aucDeadline","newAucProductTimeRemaining","cc","reduce","a","b","TimeRemainingAA","bbb","console","log","ArtDDICTLOGbw","format","aucDes","aucImg"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './style/auctionDetail.scss';\nimport { withRouter, Link } from 'react-router-dom'\nimport monkey from './images/monkey.jpg'\nimport ArtDDICTLOGbw from './images/ArtDDICTLOGbw.svg'\nimport AuctionDetailcountDown from './components/AuctionDetailcountDown'\nimport useInterval from './components/useInterval'\nimport { Container, Row, Button, Collapse, } from 'react-bootstrap'\nimport minusButton from './images/minusButton.svg'\n// react icons\nimport {\n  IoIosArrowBack,\n  IoIosArrowForward,\n  IoIosArrowRoundDown,\n  IoIosSearch,\n  IoIosHeart,\n  IoMdAdd,\n  IoMdRemove,\n} from 'react-icons/io'\n\n\n//模擬伺服器端的資料\nimport { data } from './data/data.js'\n\nfunction AuctionDetail(props) {\n  // console.log(props.match.params.id)\n  //倒數計時器間隔\n  const [delay, setDelay] = useState(500);\n  //倒數計時器停止與否  \n  const [isRunning, setIsRunning] = useState(true);\n\n  //是否要顯示倒數\n  const [auctionRunning, setAuctionrunning] = useState(false)\n  //是否還在loading 若loading 會給予空白 loading完成 render在螢幕上\n  const [loading, setLoading] = useState('')\n\n  //商品描述開關\n  const [openOne, setOpenOne] = useState(false);\n  const [openTwo, setOpenTwo] = useState(false);\n  const [openThree, setOpenThree] = useState(false);\n\n  const [aucDetailinfo, setAucDetailInfo] = useState([])\n\n  //千分位逗號分隔的api\n  const internationalNumberFormat = new Intl.NumberFormat('en-US')\n\n  //剩餘時間\n  const [auctionDetailcountdown, setAuctionDetailcountdown] = useState([0, 0, 0, -1])\n  //預設資料物件\n  const [aucProduct, setAucProduct] = useState(\n    {\n      aucId: 0,\n      aucName: '',\n      aucPriceNow: 1,\n      deadline: 0,\n    }\n  )\n  let newAucProduct = [];\n  async function getAucProDetailFromServer(aucId) {\n    // 開啟載入指示\n    // setDataLoading(true)\n\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/auctoin/' + aucId\n\n    // 注意header資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n\n    const response = await fetch(request)\n    const data = await response.json()\n    // 設定資料\n    setAucDetailInfo(data)\n    newAucProduct = data\n  }\n\n  // console.log(props)\n\n  // console.log('delay',delay,'auctionRunning',auctionRunning,'loading',loading,'isRunning',isRunning,'aucProduct',aucProduct)\n\n  useEffect(() => {\n    //從資料庫抓取資料\n    getAucProDetailFromServer(props.match.params.id)\n  }, [])\n\n  //計算剩餘時間 \n  function TimeRemaining(deadline) {\n    //截止時間(毫秒)\n    // 將資料拿到資料庫截止日期 從字串轉換成數字\n    const deadlineMin = parseInt(deadline)\n\n    //現在時間(毫秒)\n    const timeRightNowA = new Date()\n    const timeRightNow = timeRightNowA.getTime()\n\n    const TimeRemaining = deadlineMin - timeRightNow\n\n    const seconds = Math.floor((TimeRemaining / 1000) % 60);\n    const minutes = Math.floor((TimeRemaining / 1000 / 60) % 60);\n    const hours = Math.floor((TimeRemaining / (1000 * 60 * 60)) % 24);\n    const days = Math.floor(TimeRemaining / (1000 * 60 * 60 * 24));\n    // console.log(days, \"天\", hours, '小時', minutes, '分鐘', seconds, '秒')\n\n\n    return [days, hours, minutes, seconds]\n\n  }\n\n  // 初始化倒數計時器 可以在第一瞬間顯示是否競標結束\n  useEffect(() => {\n    let deadlineA = new Date(newAucProduct.aucDeadline).getTime()\n    //第一次計算剩餘時間(不控制)\n    let newAucProductTimeRemaining = TimeRemaining(deadlineA)\n    //第一次計算剩餘時間(react資料流)\n    // TimeRemaining(aucProduct.deadline)\n    const cc = newAucProductTimeRemaining.reduce((a, b) => a + b)\n    if (cc < 0) {\n      // console.log('競標結束')\n      setLoading('競標結束')\n      //結束計時器(雖然他還沒開始)\n      setIsRunning(false)\n    } else {\n      // console.log('競標繼續')\n    }\n  }, [])\n\n  //倒時計時器\n  useInterval(() => {\n    let deadlineA = new Date(aucDetailinfo.aucDeadline).getTime()\n    //設立一個變數來避免 setstate非同步問題\n    let TimeRemainingAA = TimeRemaining(deadlineA)\n    //更改state狀態\n    setAuctionDetailcountdown(TimeRemainingAA)\n    //利用加總來計算時間是否歸0\n    const bbb = TimeRemainingAA.reduce((a, b) => a + b)\n    //當時間歸0 競價停止 倒數停止 \n    if (bbb < 0) {\n      setAuctionrunning(false)\n      setIsRunning(false)\n      setLoading('競標結束')\n      console.log('bye')\n    } else {\n      // console.log(\"有進來嗎\")\n      setAuctionrunning(true)\n    }\n  }, isRunning ? delay : null)\n\n\n  // console.log('--------------------')\n  return (\n    <>\n      <div className=\"auctionDetailContent cn-font\">\n        <div className=\"auctionDetailleftContent\">\n          <div className=\"leftContent_firstpart\">\n            <div id=\"auctionDetailLOGO\">\n              <img src={ArtDDICTLOGbw} />\n            </div>\n            <div className=\"auctionDetailBreadcrumb\">\n              首頁/競標\n            </div>\n          </div>\n          <div className=\"leftContent_secondpart\">\n            <div className=\"auctionDetailTitle\">\n              {aucDetailinfo.aucName}\n            </div>\n            <div className=\"currentPrice\">\n              目前出價:NT${internationalNumberFormat.format(aucProduct.aucPriceNow)}\n            </div>\n            <div>\n              最高出價者:謝*心\n            </div>\n          </div>\n          <div className=\"leftContent_thirdpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenOne(!openOne)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openOne}\n              >\n                {/* <img src={minusButton} /> */}\n                <span className=\"mr-auto\">商品描述</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openOne}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  {aucDetailinfo.aucDes}\n                </div>\n              </div>\n            </Collapse>\n          </div>\n          <div className=\"leftContent_forthpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenTwo(!openTwo)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openTwo}\n              >\n                {/* <img src={minusButton} /> */}\n                <span className=\"mr-auto\">商品規格</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openTwo}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  aaaa\n                </div>\n              </div>\n            </Collapse>\n          </div>\n          <div className=\"leftContent_fifthpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenThree(!openThree)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openThree}\n              >\n                {/* <img src={minusButton} /> */}\n                <span className=\"mr-auto\">出價紀錄</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openThree}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  aaaa\n                </div>\n              </div>\n            </Collapse>\n          </div>\n        </div>\n        {/* <div className=\"auc-vh\"> */}\n        <div className=\"rightContentFix\">\n          <div className=\"auctionDetailrightContent\">\n            {/* {console.log('render一波')} */}\n            <AuctionDetailcountDown\n              aucDetailinfo={aucDetailinfo}\n              setAucProduct={setAucProduct}\n              TimeRemaining={TimeRemaining}\n              auctionDetailcountdown={auctionDetailcountdown}\n              setAuctionDetailcountdown={setAuctionDetailcountdown}\n              auctionRunning={auctionRunning}\n              loading={loading}\n            />\n            {/* {console.log(\"rneder二波\")} */}\n            <div className=\"auctionDetailPicture\">\n              <img src={`http://localhost:6005/aucpics/auc/${aucDetailinfo.aucImg}`} alt=\"Background\" />\n            </div>\n            <div className=\"auctionDetailcurrentPriceInput\">\n              <div className=\"auctionDetailcurrentPriceAboveInput\">\n                目前出價:NT${internationalNumberFormat.format(aucProduct.aucPriceNow)}\n              </div>\n              <div className=\"priceInput\" >\n                <input placeholder=\"請輸入下標價格\" />\n              </div>\n            </div>\n            <button className=\"auctionDetailButton\">\n              下標\n            </button>\n          </div>\n        </div>\n        {/* </div> */}\n      </div>\n    </>\n  );\n}\n\nexport default withRouter(AuctionDetail);\n\n"]},"metadata":{},"sourceType":"module"}