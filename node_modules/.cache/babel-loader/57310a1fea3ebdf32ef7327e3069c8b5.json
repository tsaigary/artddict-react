{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/user/MsgEdit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { withRouter, Link, NavLink } from 'react-router-dom';\nimport { Container } from 'react-bootstrap';\nimport { countries, townships } from './data/address';\nimport $ from 'jquery'; // styles\n\nimport './styles/MsgEdit.scss';\nimport './styles/classes.css'; // import Menu from './components/Menu'\n\nimport Logoheader from './components/Logoheader';\nimport Breadcrumb from './components/UserBreadcrumb'; // @material-ui\n\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport StyledRadio from './StyledRadio'; // SweetAlert\n\nimport swal from 'sweetalert';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction UserEdit(props) {\n  _s();\n\n  // 縣市\n  const [country, setCountry] = useState(-1);\n  const [township, setTownship] = useState(-1);\n  const userid = props.match.params.userid; // console.log(userid)\n  //const [user, setUser] = useState({})\n\n  const [dataLoading, setDataLoading] = useState(false);\n  const [username, setUsername] = useState('');\n  const [name, setName] = useState('');\n  const [gender, setGender] = useState('');\n  const [mobile, setMobile] = useState('');\n  const [birthday, setBirthday] = useState('');\n  const [address, setAddress] = useState('');\n  const [id, setId] = useState('');\n\n  async function getUserFromServer(userid) {\n    // 開啟載入指示\n    setDataLoading(true);\n    /* \n    !!!!!!!!!!!\n    test session\n    !!!!!!!!!!!\n    */\n\n    const test_url = 'http://localhost:6005/users/checklogin';\n    const test_request = new Request(test_url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const test_response = await fetch(test_request, {\n      credentials: 'same-origin'\n    });\n    const test_data = await test_response.json();\n    console.log('req obj = ', test_request);\n    console.log('res obj = ', test_data); // 用axios send get request\n\n    const adata = await axios.get(test_url, {\n      withCredentials: true,\n      headers: {\n        'Access-Control-Allow-Origin': 'http://localhost:6005'\n      }\n    });\n    console.log('new res:', adata); // console.log(`${cookie.load('connect.sid')}`)\n\n    /*\n    !!!!!!!!!!!\n    end test\n    !!!!!!!!!!!\n    */\n    // 連接的伺服器資料網址\n\n    const url = 'http://localhost:6005/users/' + userid; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json();\n    console.log(`[GET] response = ${data.session}`);\n    setUsername(data.username);\n    setName(data.name);\n    setGender(data.gender);\n    setMobile(data.mobile);\n    setId(data.id); // setBirthday(data.birthday)\n\n    if (data.birthday != null) {\n      const myDate = new Date(data.birthday); // 顯示時會扣一天所以硬加回來（後面寫入資料庫時則不會被影響）\n\n      const nextDay = new Date(myDate);\n      nextDay.setDate(myDate.getDate() + 1);\n      const js_date = nextDay.toISOString().substring(0, 10);\n      console.log(`js_date=${js_date}`);\n      setBirthday(js_date);\n    } // setBirthday(data.birthday)\n    // 拆解得到的addres => country, township, addresses\n\n\n    const raw_address = data.address; // const split_address = raw_address.split('_')\n\n    console.log(`raw_address = ${raw_address}`);\n\n    if (data.address != null) {\n      const split_address = raw_address.split('_');\n      console.log(`country = ${split_address[0]}, township = ${split_address[1]}`);\n      setCountry(split_address[0]);\n      setTownship(split_address[1]);\n      setAddress(split_address[2]);\n    }\n  }\n\n  $('.tab').click(function () {\n    $(this).css('background', 'white').css('color', 'black').siblings().css('background', 'black').css('color', 'white');\n  });\n\n  async function updateUserToSever() {\n    // 開啟載入指示\n    setDataLoading(true); // 印出市: countries[country]\n    // 印出區: townships[country][township]\n\n    const whole_address = `${country}_${township}_${address}`; // 準備好送給node的json資料\n\n    const newData = {\n      username,\n      name,\n      gender,\n      mobile,\n      birthday,\n      country,\n      township,\n      address: whole_address // address : _ + _ + _\n\n    }; // 連接的伺服器資料網址\n\n    const url = 'http://localhost:6005/users/' + userid; // 注意資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'PUT',\n      body: JSON.stringify(newData),\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      })\n    });\n    console.log(`data from react = ${JSON.stringify(newData)}`);\n    const response = await fetch(request);\n    const data = await response.json();\n    console.log('伺服器回傳的json資料', data); // 要等驗証過，再設定資料(簡單的直接設定)\n    //直接在一段x秒關掉指示器\n\n    setTimeout(() => {\n      setDataLoading(false);\n      swal({\n        text: '修改成功！！！',\n        icon: 'success',\n        button: false,\n        timer: 3000\n      });\n    }, 1000);\n  } // 一開始就會開始載入資料\n\n\n  useEffect(() => {\n    getUserFromServer(userid);\n  }, []); // 每次users資料有變動就會X秒後關掉載入指示\n\n  useEffect(() => {\n    setTimeout(() => {\n      setDataLoading(false);\n    }, 1000);\n  }, [userid]);\n\n  const loading = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"u-body\",\n      children: [/*#__PURE__*/_jsxDEV(Logoheader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner-border\",\n          role: \"status\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sr-only\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this)\n  }, void 0, false); // const userDataNo = <h2>此會員不存在</h2>\n  // const useridNo = <h2>需要會員id</h2>\n\n\n  const display = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"u-body\",\n      children: [/*#__PURE__*/_jsxDEV(Logoheader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"u-breadcrumb\",\n        children: /*#__PURE__*/_jsxDEV(Breadcrumb, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-bar\",\n        children: [/*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: `/user-msgedit/${id}`,\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u4FEE\\u6539\\u8CC7\\u6599\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: `/user-orderpro/${id}`,\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u8A02\\u55AE\\u67E5\\u8A62\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: `/user-coupon/${id}`,\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u6211\\u7684\\u512A\\u60E0\\u5238\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: `/user-ticket/${id}`,\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u6211\\u7684\\u7968\\u5238\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: `/user-myfav/${id}`,\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u6211\\u7684\\u6536\\u85CF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          activeClassName: \"activenav\",\n          className: 'tab',\n          to: \"/user-auction\",\n          style: {\n            textDecoration: 'none'\n          },\n          children: \"\\u7AF6\\u6A19\\u67E5\\u8A62\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        fluid: true,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"u-row d-flex justify-content-around\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"u-usertitleLeft1\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `/user-msgedit/${id}`,\n              children: \"\\u6703\\u54E1\\u8CC7\\u6599\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"u-usertitleRight1\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `/user-pwdedit/${id}`,\n              children: \"\\u4FEE\\u6539\\u5BC6\\u78BC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          className: \"u-userData\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group u-form1 cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"username\",\n                children: \"\\u5E33\\u865F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: username,\n                type: \"email\",\n                className: \"form-control\",\n                onChange: event => {\n                  setUsername(event.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group u-form1 cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"name\",\n                children: \"\\u59D3\\u540D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: name,\n                type: \"text\",\n                className: \"form-control\",\n                onChange: event => {\n                  setName(event.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group  u-gender-ckb cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"gender\",\n                children: \"\\u6027\\u5225\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                component: \"fieldset\",\n                children: /*#__PURE__*/_jsxDEV(RadioGroup, {\n                  row: true,\n                  defaultValue: gender,\n                  \"aria-label\": \"gender\",\n                  name: \"customized-radios\",\n                  onChange: event => {\n                    setGender(event.target.value);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"male\",\n                    control: /*#__PURE__*/_jsxDEV(StyledRadio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 348,\n                      columnNumber: 32\n                    }, this),\n                    label: \"\\u7537\",\n                    onChange: event => {\n                      setGender(event.target.value);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"female\",\n                    control: /*#__PURE__*/_jsxDEV(StyledRadio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 356,\n                      columnNumber: 32\n                    }, this),\n                    label: \"\\u5973\",\n                    onChange: event => {\n                      setGender(event.target.value);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"other\",\n                    control: /*#__PURE__*/_jsxDEV(StyledRadio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 364,\n                      columnNumber: 32\n                    }, this),\n                    label: \"\\u5176\\u4ED6\",\n                    onChange: event => {\n                      setGender(event.target.value);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 362,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group u-form1 cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"tel\",\n                children: \"\\u624B\\u6A5F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: mobile,\n                type: \"tel\",\n                className: \"form-control\",\n                id: \"tel\",\n                onChange: event => {\n                  setMobile(event.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group u-form1 cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"birthday\",\n                children: \"\\u751F\\u65E5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: birthday,\n                type: \"date\",\n                className: \"form-control\",\n                id: \"birthday\",\n                onChange: event => {\n                  setBirthday(event.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group u-form1 cn-font\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"address\",\n                children: \"\\u4F4F\\u5740\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"u-Select\",\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"\",\n                  id: \"\",\n                  className: \"u-sel1\",\n                  value: country,\n                  onChange: e => {\n                    setCountry(+e.target.value);\n                    setTownship(-1);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"\\u8ACB\\u9078\\u64C7\\u7E23\\u5E02\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 21\n                  }, this), countries.map((value, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: index,\n                    children: value\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"u-Select\",\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"\",\n                  id: \"\",\n                  className: \"u-sel2 mt-5\",\n                  value: township,\n                  onChange: e => {\n                    setTownship(+e.target.value);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"options\", {\n                    children: \"\\u8ACB\\u9078\\u64C7\\u5340\\u57DF\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 432,\n                    columnNumber: 21\n                  }, this), country > -1 && townships[country].map((value, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: index,\n                    children: value\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 436,\n                    columnNumber: 27\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: address,\n                type: \"text\",\n                className: \"form-control mt-5\",\n                id: \"address\",\n                onChange: event => {\n                  setAddress(event.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"u-editBtn\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-dark editBtn\",\n                onClick: () => {\n                  updateUserToSever();\n                },\n                children: \"\\u4FEE\\u6539\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: dataLoading ? loading : display\n  }, void 0, false);\n}\n\n_s(UserEdit, \"3XjMyhMASlfGrYgvNxJX8tnQwEQ=\");\n\n_c = UserEdit;\nexport default _c2 = withRouter(UserEdit);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UserEdit\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/user/MsgEdit.js"],"names":["React","useState","useEffect","withRouter","Link","NavLink","Container","countries","townships","$","Logoheader","Breadcrumb","RadioGroup","FormControlLabel","FormControl","StyledRadio","swal","axios","UserEdit","props","country","setCountry","township","setTownship","userid","match","params","dataLoading","setDataLoading","username","setUsername","name","setName","gender","setGender","mobile","setMobile","birthday","setBirthday","address","setAddress","id","setId","getUserFromServer","test_url","test_request","Request","method","headers","Headers","Accept","test_response","fetch","credentials","test_data","json","console","log","adata","get","withCredentials","url","request","response","data","session","myDate","Date","nextDay","setDate","getDate","js_date","toISOString","substring","raw_address","split_address","split","click","css","siblings","updateUserToSever","whole_address","newData","body","JSON","stringify","setTimeout","text","icon","button","timer","loading","display","textDecoration","event","target","value","e","map","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { withRouter, Link, NavLink } from 'react-router-dom'\nimport { Container } from 'react-bootstrap'\nimport { countries, townships } from './data/address'\nimport $ from 'jquery'\n// styles\nimport './styles/MsgEdit.scss'\nimport './styles/classes.css'\n// import Menu from './components/Menu'\nimport Logoheader from './components/Logoheader'\nimport Breadcrumb from './components/UserBreadcrumb'\n// @material-ui\nimport RadioGroup from '@material-ui/core/RadioGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport FormControl from '@material-ui/core/FormControl'\nimport StyledRadio from './StyledRadio'\n// SweetAlert\nimport swal from 'sweetalert'\nimport axios from 'axios'\n\nfunction UserEdit(props) {\n  // 縣市\n  const [country, setCountry] = useState(-1)\n  const [township, setTownship] = useState(-1)\n\n  const userid = props.match.params.userid\n  // console.log(userid)\n\n  //const [user, setUser] = useState({})\n  const [dataLoading, setDataLoading] = useState(false)\n\n  const [username, setUsername] = useState('')\n  const [name, setName] = useState('')\n  const [gender, setGender] = useState('')\n  const [mobile, setMobile] = useState('')\n  const [birthday, setBirthday] = useState('')\n  const [address, setAddress] = useState('')\n  const [id, setId] = useState('')\n\n  async function getUserFromServer(userid) {\n    // 開啟載入指示\n    setDataLoading(true)\n\n    /* \n    !!!!!!!!!!!\n    test session\n    !!!!!!!!!!!\n    */\n    const test_url =\n      'http://localhost:6005/users/checklogin'\n    const test_request = new Request(test_url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n    const test_response = await fetch(test_request, {\n      credentials: 'same-origin',\n    })\n    const test_data = await test_response.json()\n    console.log('req obj = ', test_request)\n    console.log('res obj = ', test_data)\n\n    // 用axios send get request\n    const adata = await axios.get(test_url, {\n      withCredentials: true,\n      headers: {\n        'Access-Control-Allow-Origin':\n          'http://localhost:6005',\n      },\n    })\n    console.log('new res:', adata)\n\n    // console.log(`${cookie.load('connect.sid')}`)\n    /*\n    !!!!!!!!!!!\n    end test\n    !!!!!!!!!!!\n    */\n\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/users/' + userid\n\n    // 注意header資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n\n    const response = await fetch(request)\n    const data = await response.json()\n    console.log(`[GET] response = ${data.session}`)\n\n    setUsername(data.username)\n    setName(data.name)\n    setGender(data.gender)\n    setMobile(data.mobile)\n    setId(data.id)\n    // setBirthday(data.birthday)\n    if (data.birthday != null) {\n      const myDate = new Date(data.birthday)\n      // 顯示時會扣一天所以硬加回來（後面寫入資料庫時則不會被影響）\n      const nextDay = new Date(myDate)\n      nextDay.setDate(myDate.getDate() + 1)\n      const js_date = nextDay.toISOString().substring(0, 10)\n      console.log(`js_date=${js_date}`)\n      setBirthday(js_date)\n    }\n    // setBirthday(data.birthday)\n\n    // 拆解得到的addres => country, township, addresses\n    const raw_address = data.address\n    // const split_address = raw_address.split('_')\n    console.log(`raw_address = ${raw_address}`)\n    if (data.address != null) {\n      const split_address = raw_address.split('_')\n\n      console.log(\n        `country = ${split_address[0]}, township = ${split_address[1]}`\n      )\n\n      setCountry(split_address[0])\n      setTownship(split_address[1])\n      setAddress(split_address[2])\n    }\n  }\n\n  $('.tab').click(function () {\n    $(this)\n      .css('background', 'white')\n      .css('color', 'black')\n      .siblings()\n      .css('background', 'black')\n      .css('color', 'white')\n  })\n\n  async function updateUserToSever() {\n    // 開啟載入指示\n    setDataLoading(true)\n    // 印出市: countries[country]\n    // 印出區: townships[country][township]\n    const whole_address = `${country}_${township}_${address}`\n    // 準備好送給node的json資料\n    const newData = {\n      username,\n      name,\n      gender,\n      mobile,\n      birthday,\n      country,\n      township,\n      address: whole_address,\n      // address : _ + _ + _\n    }\n\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/users/' + userid\n\n    // 注意資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'PUT',\n      body: JSON.stringify(newData),\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      }),\n    })\n\n    console.log(\n      `data from react = ${JSON.stringify(newData)}`\n    )\n\n    const response = await fetch(request)\n    const data = await response.json()\n\n    console.log('伺服器回傳的json資料', data)\n    // 要等驗証過，再設定資料(簡單的直接設定)\n\n    //直接在一段x秒關掉指示器\n    setTimeout(() => {\n      setDataLoading(false)\n      swal({\n        text: '修改成功！！！',\n        icon: 'success',\n        button: false,\n        timer: 3000,\n      })\n    }, 1000)\n  }\n\n  // 一開始就會開始載入資料\n  useEffect(() => {\n    getUserFromServer(userid)\n  }, [])\n\n  // 每次users資料有變動就會X秒後關掉載入指示\n  useEffect(() => {\n    setTimeout(() => {\n      setDataLoading(false)\n    }, 1000)\n  }, [userid])\n\n  const loading = (\n    <>\n      <div className=\"u-body\">\n        <Logoheader />\n        <div className=\"d-flex justify-content-center\">\n          <div className=\"spinner-border\" role=\"status\">\n            <span className=\"sr-only\">Loading...</span>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n\n  // const userDataNo = <h2>此會員不存在</h2>\n  // const useridNo = <h2>需要會員id</h2>\n\n  const display = (\n    <>\n      <div className=\"u-body\">\n        <Logoheader />\n        <div className=\"u-breadcrumb\">\n          <Breadcrumb />\n        </div>\n        {/* <div className=\"u-userMenu d-none d-lg-block d-xl-block\">\n          <Menu userId={id} />\n        </div> */}\n        <div className=\"tab-bar\">\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to={`/user-msgedit/${id}`}\n            style={{ textDecoration: 'none' }}\n          >\n            修改資料\n          </NavLink>\n\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to={`/user-orderpro/${id}`}\n            style={{ textDecoration: 'none' }}\n          >\n            訂單查詢\n          </NavLink>\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to={`/user-coupon/${id}`}\n            style={{ textDecoration: 'none' }}\n          >\n            我的優惠券\n          </NavLink>\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to={`/user-ticket/${id}`}\n            style={{ textDecoration: 'none' }}\n          >\n            我的票券\n          </NavLink>\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to={`/user-myfav/${id}`}\n            style={{ textDecoration: 'none' }}\n          >\n            我的收藏\n          </NavLink>\n          <NavLink\n            activeClassName=\"activenav\"\n            className={'tab'}\n            to=\"/user-auction\"\n            style={{ textDecoration: 'none' }}\n          >\n            競標查詢\n          </NavLink>\n          {/* <NavLink\n          activeClassName=\"activenav\"\n          className={'tab'}\n          to=\"/user-login\"\n          onClick={() => {\n            logoutToSever()\n          }} */}\n          {/* style={{ textDecoration: 'none' }}\n        >\n          登出\n        </NavLink> */}\n        </div>\n        <Container fluid>\n          <div className=\"u-row d-flex justify-content-around\">\n            <div className=\"u-usertitleLeft1\">\n              <Link to={`/user-msgedit/${id}`}>\n                會員資料\n              </Link>\n            </div>\n            <div className=\"u-usertitleRight1\">\n              <Link to={`/user-pwdedit/${id}`}>\n                修改密碼\n              </Link>\n            </div>\n          </div>\n          <Container className=\"u-userData\">\n            <form>\n              <div className=\"form-group u-form1 cn-font\">\n                <label for=\"username\">帳號</label>\n                <input\n                  value={username}\n                  type=\"email\"\n                  className=\"form-control\"\n                  onChange={(event) => {\n                    setUsername(event.target.value)\n                  }}\n                />\n              </div>\n              <div className=\"form-group u-form1 cn-font\">\n                <label for=\"name\">姓名</label>\n                <input\n                  value={name}\n                  type=\"text\"\n                  className=\"form-control\"\n                  onChange={(event) => {\n                    setName(event.target.value)\n                  }}\n                />\n              </div>\n\n              <div className=\"form-group  u-gender-ckb cn-font\">\n                <label for=\"gender\">性別</label>\n                <br />\n                <FormControl component=\"fieldset\">\n                  <RadioGroup\n                    row\n                    defaultValue={gender}\n                    aria-label=\"gender\"\n                    name=\"customized-radios\"\n                    onChange={(event) => {\n                      setGender(event.target.value)\n                    }}\n                  >\n                    <FormControlLabel\n                      value=\"male\"\n                      control={<StyledRadio />}\n                      label=\"男\"\n                      onChange={(event) => {\n                        setGender(event.target.value)\n                      }}\n                    />\n                    <FormControlLabel\n                      value=\"female\"\n                      control={<StyledRadio />}\n                      label=\"女\"\n                      onChange={(event) => {\n                        setGender(event.target.value)\n                      }}\n                    />\n                    <FormControlLabel\n                      value=\"other\"\n                      control={<StyledRadio />}\n                      label=\"其他\"\n                      onChange={(event) => {\n                        setGender(event.target.value)\n                      }}\n                    />\n                  </RadioGroup>\n                </FormControl>\n              </div>\n              <div className=\"form-group u-form1 cn-font\">\n                <label for=\"tel\">手機</label>\n                <input\n                  value={mobile}\n                  type=\"tel\"\n                  className=\"form-control\"\n                  id=\"tel\"\n                  onChange={(event) => {\n                    setMobile(event.target.value)\n                  }}\n                />\n              </div>\n\n              <div className=\"form-group u-form1 cn-font\">\n                <label for=\"birthday\">生日</label>\n                <input\n                  value={birthday}\n                  type=\"date\"\n                  className=\"form-control\"\n                  id=\"birthday\"\n                  onChange={(event) => {\n                    setBirthday(event.target.value)\n                  }}\n                />\n              </div>\n\n              <div className=\"form-group u-form1 cn-font\">\n                <label for=\"address\">住址</label>\n                <br />\n                <div className=\"u-Select\">\n                  <select\n                    name=\"\"\n                    id=\"\"\n                    className=\"u-sel1\"\n                    value={country}\n                    onChange={(e) => {\n                      setCountry(+e.target.value)\n                      setTownship(-1)\n                    }}\n                  >\n                    <option>請選擇縣市</option>\n                    {countries.map((value, index) => (\n                      <option key={index} value={index}>\n                        {value}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div className=\"u-Select\">\n                  <select\n                    name=\"\"\n                    id=\"\"\n                    className=\"u-sel2 mt-5\"\n                    value={township}\n                    onChange={(e) => {\n                      setTownship(+e.target.value)\n                    }}\n                  >\n                    <options>請選擇區域</options>\n                    {country > -1 &&\n                      townships[country].map(\n                        (value, index) => (\n                          <option key={index} value={index}>\n                            {value}\n                          </option>\n                        )\n                      )}\n                  </select>\n                </div>\n                <input\n                  value={address}\n                  type=\"text\"\n                  className=\"form-control mt-5\"\n                  id=\"address\"\n                  onChange={(event) => {\n                    setAddress(event.target.value)\n                  }}\n                />\n              </div>\n\n              <div className=\"u-editBtn\">\n                <button\n                  className=\"btn btn-outline-dark editBtn\"\n                  onClick={() => {\n                    updateUserToSever()\n                  }}\n                >\n                  修改\n                </button>\n              </div>\n            </form>\n          </Container>\n        </Container>\n      </div>\n    </>\n  )\n\n  return (\n    <>\n      {/* {!userDataIsExist ? userDataNo : ''}\n      {!userid ? useridNo : ''} */}\n      {dataLoading ? loading : display}\n    </>\n  )\n}\n\nexport default withRouter(UserEdit)\n"]},"metadata":{},"sourceType":"module"}