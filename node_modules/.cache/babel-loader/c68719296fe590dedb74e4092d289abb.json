{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/ArtDDICT-react/myapp/src/pages/Auction/AuctionDetail.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './style/auctionDetail.scss';\nimport { withRouter, Link } from 'react-router-dom';\nimport monkey from './images/monkey.jpg';\nimport ArtDDICTLOGbw from \"./images/ArtDDICTLOGbw.svg\";\nimport AuctionDetailcountDown from './components/AuctionDetailcountDown';\nimport useInterval from './components/useInterval';\nimport { Container, Row, Button, Collapse } from 'react-bootstrap';\nimport minusButton from \"./images/minusButton.svg\"; // react icons\n\nimport { IoIosArrowBack, IoIosArrowForward, IoIosArrowRoundDown, IoIosSearch, IoIosHeart, IoMdAdd, IoMdRemove } from 'react-icons/io'; //模擬伺服器端的資料\n\nimport { data } from './data/data.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AuctionDetail(props) {\n  _s();\n\n  //倒數計時器間隔\n  const [delay, setDelay] = useState(500); //倒數計時器停止與否  \n\n  const [isRunning, setIsRunning] = useState(true); //是否要顯示倒數\n\n  const [auctionRunning, setAuctionrunning] = useState(false); //是否還在loading 若loading 會給予空白 loading完成 render在螢幕上\n\n  const [loading, setLoading] = useState(''); //商品描述開關\n\n  const [openOne, setOpenOne] = useState(false);\n  const [openTwo, setOpenTwo] = useState(false);\n  const [openThree, setOpenThree] = useState(false); //預設資料物件\n\n  const [aucProduct, setAucProduct] = useState({\n    aucId: 0,\n    aucName: '',\n    aucPriceNow: 1,\n    deadline: 0\n  });\n  console.log(props); //剩餘時間\n\n  const [auctionDetailcountdown, setAuctionDetailcountdown] = useState([0, 0, 0, -1]); // console.log('delay',delay,'auctionRunning',auctionRunning,'loading',loading,'isRunning',isRunning,'aucProduct',aucProduct)\n  //千分位逗號分隔的api\n\n  const internationalNumberFormat = new Intl.NumberFormat('en-US');\n  let newAucProduct = 0;\n  useEffect(() => {\n    //從資料庫抓取資料\n    const product = data.find((v, i) => {\n      return parseInt(props.match.params.id) === v.aucId;\n    });\n    if (product) setAucProduct(product);\n    newAucProduct = product; // console.log('抓資料', newAucProduct)\n  }, []); //計算剩餘時間 \n\n  function TimeRemaining(deadline) {\n    //截止時間(毫秒)\n    // 將資料拿到資料庫截止日期 從字串轉換成數字\n    const deadlineMin = parseInt(deadline); //現在時間(毫秒)\n\n    const timeRightNowA = new Date();\n    const timeRightNow = timeRightNowA.getTime();\n    const TimeRemaining = deadlineMin - timeRightNow;\n    const seconds = Math.floor(TimeRemaining / 1000 % 60);\n    const minutes = Math.floor(TimeRemaining / 1000 / 60 % 60);\n    const hours = Math.floor(TimeRemaining / (1000 * 60 * 60) % 24);\n    const days = Math.floor(TimeRemaining / (1000 * 60 * 60 * 24)); // console.log(days, \"天\", hours, '小時', minutes, '分鐘', seconds, '秒')\n\n    return [days, hours, minutes, seconds];\n  } // 初始化倒數計時器\n\n\n  useEffect(() => {\n    //第一次計算剩餘時間(不控制)\n    let newAucProductTimeRemaining = TimeRemaining(newAucProduct.deadline); //第一次計算剩餘時間(react資料流)\n    // TimeRemaining(aucProduct.deadline)\n\n    const cc = newAucProductTimeRemaining.reduce((a, b) => a + b);\n\n    if (cc < 0) {\n      // console.log('競標結束')\n      setLoading('競標結束');\n      setIsRunning(false);\n    } else {// console.log('競標繼續')\n    }\n  }, []); //倒時計時器\n\n  useInterval(() => {\n    //設立一個變數來避免 setstate非同步問題\n    let TimeRemainingAA = TimeRemaining(aucProduct.deadline); //更改state狀態\n\n    setAuctionDetailcountdown(TimeRemainingAA); //利用加總來計算時間是否歸0\n\n    const bbb = TimeRemainingAA.reduce((a, b) => a + b); //當時間歸0 競價停止 倒數停止 \n\n    if (bbb < 0) {\n      setAuctionrunning(false);\n      setIsRunning(false);\n      setLoading('競標結束');\n      console.log('bye');\n    } else {\n      // console.log(\"有進來嗎\")\n      setAuctionrunning(true);\n    }\n  }, isRunning ? delay : null); // console.log('--------------------')\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auctionDetailContent\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionDetailleftContent\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_firstpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"auctionDetailLOGO\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: ArtDDICTLOGbw\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailBreadcrumb\",\n            children: \"\\u9996\\u9801/\\u7AF6\\u6A19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_secondpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailTitle\",\n            children: aucProduct.aucName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"currentPrice\",\n            children: [\"\\u76EE\\u524D\\u51FA\\u50F9:NT$\", internationalNumberFormat.format(aucProduct.aucPriceNow)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"\\u6700\\u9AD8\\u51FA\\u50F9\\u8005:\\u8B1D*\\u5FC3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_thirdpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenOne(!openOne),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openOne,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u5546\\u54C1\\u63CF\\u8FF0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openOne,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: \"1889\\u5E749\\u6708\\uFF0C\\u8377\\u862D\\u5F8C\\u5370\\u8C61\\u6D3E\\u756B\\u5BB6\\u6587\\u68EE\\u7279\\xB7\\u68B5\\u8C37\\uFF08Vincent van Gogh\\uFF09\\u5728\\u756B\\u5E03\\u4E0A\\u7528\\u6CB9\\u756B\\u4E86\\u81EA\\u756B\\u50CF\\u3002\\u9019\\u5E45\\u4F5C\\u54C1\\u53EF\\u80FD\\u662F\\u68B5\\u8C37\\u7684\\u6700\\u5F8C\\u4E00\\u5E45\\u81EA\\u756B\\u50CF\\uFF0C\\u662F\\u5728\\u4ED6\\u96E2\\u958B\\u6CD5\\u570B\\u5357\\u90E8\\u8056\\u96F7\\u7C73\\u7684\\u666E\\u7F85\\u65FA\\u65AF\\u4E4B\\u524D\\u4E0D\\u4E45\\u756B\\u7684\\u3002\\u9019\\u5E45\\u756B\\u73FE\\u5728\\u5728\\u5DF4\\u9ECE\\u7684\\u5967\\u8CFD\\u535A\\u7269\\u9928\\uFF08Mus\\xE9ed'Orsay\\uFF09\\u5C55\\u51FA\\u3002\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_forthpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenTwo(!openTwo),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openTwo,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u5546\\u54C1\\u898F\\u683C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openTwo,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: \"aaaa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftContent_fifthpart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailProductswitchTitle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"auc-switch-buttom\",\n              onClick: () => setOpenThree(!openThree),\n              \"aria-controls\": \"example-collapse-text\",\n              \"aria-expanded\": openThree,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-auto\",\n                children: \"\\u51FA\\u50F9\\u7D00\\u9304\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(IoMdRemove, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: openThree,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"example-collapse-text\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auctionDetailProductDesContent\",\n                children: \"aaaa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rightContentFix\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionDetailrightContent\",\n          children: [console.log('render一波'), /*#__PURE__*/_jsxDEV(AuctionDetailcountDown, {\n            aucProduct: aucProduct,\n            setAucProduct: setAucProduct,\n            TimeRemaining: TimeRemaining,\n            auctionDetailcountdown: auctionDetailcountdown,\n            setAuctionDetailcountdown: setAuctionDetailcountdown,\n            auctionRunning: auctionRunning,\n            loading: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), console.log(\"rneder二波\"), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailPicture\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: monkey,\n              alt: \"Background\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auctionDetailcurrentPriceInput\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auctionDetailcurrentPriceAboveInput\",\n              children: [\"\\u76EE\\u524D\\u51FA\\u50F9:NT$\", internationalNumberFormat.format(aucProduct.aucPriceNow)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"priceInput\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"\\u8ACB\\u8F38\\u5165\\u4E0B\\u6A19\\u50F9\\u683C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"auctionDetailButton\",\n            children: \"\\u4E0B\\u6A19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(AuctionDetail, \"MagtpB5bO7fd8tq0eARV8Y9yWWw=\", false, function () {\n  return [useInterval];\n});\n\n_c = AuctionDetail;\nexport default _c2 = withRouter(AuctionDetail);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AuctionDetail\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/ArtDDICT-react/myapp/src/pages/Auction/AuctionDetail.js"],"names":["React","useEffect","useState","withRouter","Link","monkey","AuctionDetailcountDown","useInterval","Container","Row","Button","Collapse","IoIosArrowBack","IoIosArrowForward","IoIosArrowRoundDown","IoIosSearch","IoIosHeart","IoMdAdd","IoMdRemove","data","AuctionDetail","props","delay","setDelay","isRunning","setIsRunning","auctionRunning","setAuctionrunning","loading","setLoading","openOne","setOpenOne","openTwo","setOpenTwo","openThree","setOpenThree","aucProduct","setAucProduct","aucId","aucName","aucPriceNow","deadline","console","log","auctionDetailcountdown","setAuctionDetailcountdown","internationalNumberFormat","Intl","NumberFormat","newAucProduct","product","find","v","i","parseInt","match","params","id","TimeRemaining","deadlineMin","timeRightNowA","Date","timeRightNow","getTime","seconds","Math","floor","minutes","hours","days","newAucProductTimeRemaining","cc","reduce","a","b","TimeRemainingAA","bbb","ArtDDICTLOGbw","format"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './style/auctionDetail.scss';\nimport { withRouter, Link } from 'react-router-dom'\nimport monkey from './images/monkey.jpg'\nimport ArtDDICTLOGbw from './images/ArtDDICTLOGbw.svg'\nimport AuctionDetailcountDown from './components/AuctionDetailcountDown'\nimport useInterval from './components/useInterval'\nimport { Container, Row, Button, Collapse, } from 'react-bootstrap'\nimport minusButton from './images/minusButton.svg'\n// react icons\nimport {\n  IoIosArrowBack,\n  IoIosArrowForward,\n  IoIosArrowRoundDown,\n  IoIosSearch,\n  IoIosHeart,\n  IoMdAdd,\n  IoMdRemove,\n} from 'react-icons/io'\n\n\n//模擬伺服器端的資料\nimport { data } from './data/data.js'\n\nfunction AuctionDetail(props) {\n  //倒數計時器間隔\n  const [delay, setDelay] = useState(500);\n  //倒數計時器停止與否  \n  const [isRunning, setIsRunning] = useState(true);\n\n  //是否要顯示倒數\n  const [auctionRunning, setAuctionrunning] = useState(false)\n  //是否還在loading 若loading 會給予空白 loading完成 render在螢幕上\n  const [loading, setLoading] = useState('')\n\n  //商品描述開關\n  const [openOne, setOpenOne] = useState(false);\n  const [openTwo, setOpenTwo] = useState(false);\n  const [openThree, setOpenThree] = useState(false);\n\n  //預設資料物件\n  const [aucProduct, setAucProduct] = useState(\n    {\n      aucId: 0,\n      aucName: '',\n      aucPriceNow: 1,\n      deadline: 0,\n    }\n  )\n\n  \nconsole.log(props)\n  //剩餘時間\n  const [auctionDetailcountdown, setAuctionDetailcountdown] = useState([0, 0, 0, -1])\n\n  // console.log('delay',delay,'auctionRunning',auctionRunning,'loading',loading,'isRunning',isRunning,'aucProduct',aucProduct)\n  //千分位逗號分隔的api\n  const internationalNumberFormat = new Intl.NumberFormat('en-US')\n\n\n  let newAucProduct = 0;\n  useEffect(() => {\n    //從資料庫抓取資料\n    const product = data.find((v, i) => {\n\n      return parseInt(props.match.params.id) === v.aucId\n    })\n\n    if (product)\n      setAucProduct(product)\n    newAucProduct = product\n    // console.log('抓資料', newAucProduct)\n\n  }, [])\n\n  //計算剩餘時間 \n  function TimeRemaining(deadline) {\n    //截止時間(毫秒)\n    // 將資料拿到資料庫截止日期 從字串轉換成數字\n    const deadlineMin = parseInt(deadline)\n\n    //現在時間(毫秒)\n    const timeRightNowA = new Date()\n    const timeRightNow = timeRightNowA.getTime()\n\n    const TimeRemaining = deadlineMin - timeRightNow\n\n    const seconds = Math.floor((TimeRemaining / 1000) % 60);\n    const minutes = Math.floor((TimeRemaining / 1000 / 60) % 60);\n    const hours = Math.floor((TimeRemaining / (1000 * 60 * 60)) % 24);\n    const days = Math.floor(TimeRemaining / (1000 * 60 * 60 * 24));\n    // console.log(days, \"天\", hours, '小時', minutes, '分鐘', seconds, '秒')\n\n\n    return [days, hours, minutes, seconds]\n\n  }\n\n  // 初始化倒數計時器\n  useEffect(() => {\n    //第一次計算剩餘時間(不控制)\n    let newAucProductTimeRemaining = TimeRemaining(newAucProduct.deadline)\n    //第一次計算剩餘時間(react資料流)\n    // TimeRemaining(aucProduct.deadline)\n    const cc = newAucProductTimeRemaining.reduce((a, b) => a + b)\n    if (cc < 0) {\n      // console.log('競標結束')\n      setLoading('競標結束')\n      setIsRunning(false)\n    } else {\n      // console.log('競標繼續')\n    }\n  }, [])\n\n  //倒時計時器\n  useInterval(() => {\n    //設立一個變數來避免 setstate非同步問題\n    let TimeRemainingAA = TimeRemaining(aucProduct.deadline)\n    //更改state狀態\n    setAuctionDetailcountdown(TimeRemainingAA)\n    //利用加總來計算時間是否歸0\n    const bbb = TimeRemainingAA.reduce((a, b) => a + b)\n    //當時間歸0 競價停止 倒數停止 \n    if (bbb < 0) {\n      setAuctionrunning(false)\n      setIsRunning(false)\n      setLoading('競標結束')\n      console.log('bye')\n    } else {\n      // console.log(\"有進來嗎\")\n      setAuctionrunning(true)\n    }\n  }, isRunning ? delay : null)\n\n\n  // console.log('--------------------')\n  return (\n    <>\n      <div className=\"auctionDetailContent\">\n        <div className=\"auctionDetailleftContent\">\n          <div className=\"leftContent_firstpart\">\n            <div id=\"auctionDetailLOGO\">\n              <img src={ArtDDICTLOGbw} />\n            </div>\n            <div className=\"auctionDetailBreadcrumb\">\n              首頁/競標\n            </div>\n          </div>\n          <div className=\"leftContent_secondpart\">\n            <div className=\"auctionDetailTitle\">\n              {aucProduct.aucName}\n            </div>\n            <div className=\"currentPrice\">\n              目前出價:NT${internationalNumberFormat.format(aucProduct.aucPriceNow)}\n            </div>\n            <div>\n              最高出價者:謝*心\n            </div>\n          </div>\n          <div className=\"leftContent_thirdpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenOne(!openOne)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openOne}\n              >\n                {/* <img src={minusButton} /> */}\n                <span className=\"mr-auto\">商品描述</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openOne}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  1889年9月，荷蘭後印象派畫家文森特·梵谷（Vincent van Gogh）在畫布上用油畫了自畫像。這幅作品可能是梵谷的最後一幅自畫像，是在他離開法國南部聖雷米的普羅旺斯之前不久畫的。這幅畫現在在巴黎的奧賽博物館（Muséed'Orsay）展出。\n                </div>\n              </div>\n            </Collapse>\n          </div>\n          <div className=\"leftContent_forthpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenTwo(!openTwo)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openTwo}\n              >\n                {/* <img src={minusButton} /> */}\n                <span className=\"mr-auto\">商品規格</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openTwo}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  aaaa\n                </div>\n              </div>\n            </Collapse>\n          </div>\n          <div className=\"leftContent_fifthpart\">\n            <div className=\"auctionDetailProductswitchTitle\">\n              <button\n                className=\"auc-switch-buttom\"\n                onClick={() => setOpenThree(!openThree)}\n                aria-controls=\"example-collapse-text\"\n                aria-expanded={openThree}\n              >\n                {/* <img src={minusButton} /> */}\n                <span className=\"mr-auto\">出價紀錄</span>\n                <span>\n                  <IoMdRemove />\n                </span>\n              </button>\n            </div>\n            <Collapse in={openThree}>\n              <div id=\"example-collapse-text\">\n                <div className=\"auctionDetailProductDesContent\">\n                  aaaa\n                </div>\n              </div>\n            </Collapse>\n          </div>\n        </div>\n        {/* <div className=\"auc-vh\"> */}\n        <div className=\"rightContentFix\">\n          <div className=\"auctionDetailrightContent\">\n            {console.log('render一波')}\n            <AuctionDetailcountDown\n              aucProduct={aucProduct}\n              setAucProduct={setAucProduct}\n              TimeRemaining={TimeRemaining}\n              auctionDetailcountdown={auctionDetailcountdown}\n              setAuctionDetailcountdown={setAuctionDetailcountdown}\n              auctionRunning={auctionRunning}\n              loading={loading}\n            />\n            {console.log(\"rneder二波\")}\n            <div className=\"auctionDetailPicture\">\n              <img src={monkey} alt=\"Background\" />\n            </div>\n            <div className=\"auctionDetailcurrentPriceInput\">\n              <div className=\"auctionDetailcurrentPriceAboveInput\">\n                目前出價:NT${internationalNumberFormat.format(aucProduct.aucPriceNow)}\n              </div>\n              <div className=\"priceInput\" >\n                <input placeholder=\"請輸入下標價格\" />\n              </div>\n            </div>\n            <button className=\"auctionDetailButton\">\n              下標\n            </button>\n          </div>\n        </div>\n      {/* </div> */}\n      </div>\n    </>\n  );\n}\n\nexport default withRouter(AuctionDetail);\n\n"]},"metadata":{},"sourceType":"module"}