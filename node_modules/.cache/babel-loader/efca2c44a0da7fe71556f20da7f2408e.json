{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/ArtDDICT-react/myapp/src/pages/Auction/components/AuctionProductCard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport monkey from '../images/monkey.jpg';\nimport { withRouter, Link } from 'react-router-dom';\nimport useInterval from './useInterval';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AuctionProductCard(props) {\n  _s();\n\n  const {\n    aucId,\n    aucName,\n    aucPriceNow,\n    deadline,\n    TimeRemaining\n  } = props;\n  const [delay, setDelay] = useState(1000);\n  const [auctionRunning, setAuctionrunning] = useState(false);\n  const [AuctionProductCard_CountDown, setAuctionProductCard_CountDown] = useState([0, '', 0, '']);\n  const [loading, setLoading] = useState('');\n  const [isRunning, setIsRunning] = useState(true); // 初始化倒數計時器\n\n  useEffect(() => {\n    //第一次計算剩餘時間(不控制)\n    let newAucProductTimeRemaining = TimeRemaining(deadline);\n    console.log(\"我是百變怪\", newAucProductTimeRemaining); //第一次計算剩餘時間(react資料流)\n\n    setAuctionProductCard_CountDown(newAucProductTimeRemaining); // TimeRemaining(deadline)\n\n    console.log(\"判斷是:\", newAucProductTimeRemaining.reduce((a, b) => a + b));\n\n    if (newAucProductTimeRemaining.reduce((a, b) => a + b) < 0) {\n      console.log('競標結束');\n      setLoading('競標結束');\n      setAuctionrunning(false);\n      setIsRunning(false);\n      console.log(aucName, 'loading', loading, 'isRunning', isRunning);\n    } else {\n      setAuctionrunning(true);\n      console.log('競標繼續');\n      if (newAucProductTimeRemaining[0] > 0) setAuctionProductCard_CountDown([newAucProductTimeRemaining[0], '天', newAucProductTimeRemaining[1] + 1, '小時']);\n      if (newAucProductTimeRemaining[0] < 1) setAuctionProductCard_CountDown([newAucProductTimeRemaining[1], '小時', newAucProductTimeRemaining[2] + 1, '分鐘']);\n    }\n  }, []);\n  useInterval(() => {\n    //設立一個變數來避免 setstate非同步問題\n    let TimeRemainingAA = TimeRemaining(deadline);\n    console.log(TimeRemainingAA); //更改state狀態\n    //每秒計算剩餘時間\n\n    setAuctionProductCard_CountDown(TimeRemainingAA);\n    let bbb = TimeRemainingAA.reduce((a, b) => a + b);\n\n    if (bbb < 0) {\n      setAuctionrunning(false);\n      setIsRunning(false);\n      setLoading('競標結束');\n      console.log('bye');\n    } else {\n      if (TimeRemainingAA[0] > 0) setAuctionProductCard_CountDown([TimeRemainingAA[0], '天', TimeRemainingAA[1] + 1, '小時']);\n      if (TimeRemainingAA[0] < 1) setAuctionProductCard_CountDown([TimeRemainingAA[1], '小時', TimeRemainingAA[2] + 1, '分鐘']);\n    }\n  }, isRunning ? delay : null);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-4 auctionProductCard\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionProduct_Picture_time\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/AuctionDetail/${aucId}`,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: monkey,\n            alt: \"Background\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), console.log('loading', loading, 'isRunning', isRunning, 'auctionRunning', auctionRunning), auctionRunning ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionProduct_countdown\",\n          children: [\"\\u622A\\u6A19\\u5012\\u6578 \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: AuctionProductCard_CountDown[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 34\n          }, this), AuctionProductCard_CountDown[1], /*#__PURE__*/_jsxDEV(\"span\", {\n            children: AuctionProductCard_CountDown[2]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 29\n          }, this), AuctionProductCard_CountDown[3]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionProduct_countdown\",\n          children: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionProductionTitle\",\n        children: aucName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionProductCurrentPrice\",\n        children: [\"\\u76EE\\u524D\\u50F9\\u683C: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"NT $\", aucPriceNow]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 67\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(AuctionProductCard, \"3WTR21IalsVDEaCY6jaoWQ5AlEU=\", false, function () {\n  return [useInterval];\n});\n\n_c = AuctionProductCard;\nexport default _c2 = withRouter(AuctionProductCard);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AuctionProductCard\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/ArtDDICT-react/myapp/src/pages/Auction/components/AuctionProductCard.js"],"names":["React","useState","useEffect","monkey","withRouter","Link","useInterval","AuctionProductCard","props","aucId","aucName","aucPriceNow","deadline","TimeRemaining","delay","setDelay","auctionRunning","setAuctionrunning","AuctionProductCard_CountDown","setAuctionProductCard_CountDown","loading","setLoading","isRunning","setIsRunning","newAucProductTimeRemaining","console","log","reduce","a","b","TimeRemainingAA","bbb"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport monkey from '../images/monkey.jpg'\nimport { withRouter, Link } from 'react-router-dom'\nimport useInterval from './useInterval';\n\nfunction AuctionProductCard(props) {\n    const { aucId, aucName, aucPriceNow, deadline, TimeRemaining } = props\n    const [delay, setDelay] = useState(1000);\n    const [auctionRunning, setAuctionrunning] = useState(false)\n    const [AuctionProductCard_CountDown, setAuctionProductCard_CountDown] = useState([0, '', 0, ''])\n    const [loading, setLoading] = useState('')\n    const [isRunning, setIsRunning] = useState(true);\n\n    // 初始化倒數計時器\n    useEffect(() => {\n        //第一次計算剩餘時間(不控制)\n        let newAucProductTimeRemaining = TimeRemaining(deadline)\n        console.log(\"我是百變怪\", newAucProductTimeRemaining)\n        //第一次計算剩餘時間(react資料流)\n        setAuctionProductCard_CountDown(newAucProductTimeRemaining)\n        // TimeRemaining(deadline)\n        console.log(\"判斷是:\", (newAucProductTimeRemaining.reduce((a, b) => a + b)))\n        if ((newAucProductTimeRemaining.reduce((a, b) => a + b) < 0)) {\n            console.log('競標結束')\n            setLoading('競標結束')\n            setAuctionrunning(false)\n            setIsRunning(false)\n            console.log(aucName, 'loading', loading, 'isRunning', isRunning)\n        } else {\n            setAuctionrunning(true)\n            console.log('競標繼續')\n            if (newAucProductTimeRemaining[0] > 0)\n                setAuctionProductCard_CountDown([newAucProductTimeRemaining[0], '天', newAucProductTimeRemaining[1] + 1, '小時'])\n            if (newAucProductTimeRemaining[0] < 1)\n                setAuctionProductCard_CountDown([newAucProductTimeRemaining[1], '小時', newAucProductTimeRemaining[2] + 1, '分鐘'])\n        }\n    }, [])\n\n    useInterval(() => {\n        //設立一個變數來避免 setstate非同步問題\n        let TimeRemainingAA = TimeRemaining(deadline)\n        console.log(TimeRemainingAA)\n        //更改state狀態\n        //每秒計算剩餘時間\n        setAuctionProductCard_CountDown(TimeRemainingAA)\n        let bbb = TimeRemainingAA.reduce((a, b) => a + b)\n        if (bbb < 0) {\n            setAuctionrunning(false)\n            setIsRunning(false)\n            setLoading('競標結束')\n            console.log('bye')\n        } else {\n            if (TimeRemainingAA[0] > 0)\n                setAuctionProductCard_CountDown([TimeRemainingAA[0], '天', TimeRemainingAA[1] + 1, '小時'])\n            if (TimeRemainingAA[0] < 1)\n                setAuctionProductCard_CountDown([TimeRemainingAA[1], '小時', TimeRemainingAA[2] + 1, '分鐘'])\n        }\n    }, isRunning ? delay : null)\n\n    return (\n        <>\n            <div className=\"col-4 auctionProductCard\">\n                <div className=\"auctionProduct_Picture_time\">\n                    <Link to={`/AuctionDetail/${aucId}`}>\n                        <img src={monkey} alt=\"Background\" />\n                    </Link>\n                    {console.log('loading', loading, 'isRunning', isRunning, 'auctionRunning', auctionRunning)}\n                    {auctionRunning ? (\n                        <div className=\"auctionProduct_countdown\">\n                            截標倒數 <span>{AuctionProductCard_CountDown[0]}</span>\n                            {AuctionProductCard_CountDown[1]}\n                            <span>{AuctionProductCard_CountDown[2]}</span>\n                            {AuctionProductCard_CountDown[3]}\n                        </div>\n                    ) : (<div className=\"auctionProduct_countdown\">{loading}</div>)}\n                </div>\n                <div className=\"auctionProductionTitle\">\n                    {aucName}\n                </div>\n                <div className=\"auctionProductCurrentPrice\">目前價格: <span>NT ${aucPriceNow}</span></div>\n            </div>\n        </>\n    );\n}\n\nexport default withRouter(AuctionProductCard);"]},"metadata":{},"sourceType":"module"}