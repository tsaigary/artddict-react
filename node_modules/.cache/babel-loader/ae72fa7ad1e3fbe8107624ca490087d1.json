{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/Auction/components/AuctionProductCard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport monkey from '../images/monkey.jpg';\nimport { withRouter, Link } from 'react-router-dom';\nimport useInterval from './useInterval';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AuctionProductCard(props) {\n  _s();\n\n  const {\n    aucId,\n    aucName,\n    aucPriceNow,\n    deadline,\n    aucImg,\n    TimeRemaining\n  } = props;\n  const [delay, setDelay] = useState(1000);\n  const [auctionRunning, setAuctionrunning] = useState(false);\n  const [AuctionProductCard_CountDown, setAuctionProductCard_CountDown] = useState([0, '', 0, '']);\n  const [loading, setLoading] = useState('');\n  const [isRunning, setIsRunning] = useState(true); // const [deadlineB,setDeadline] = useState()\n  // 初始化倒數計時器\n\n  useEffect(() => {\n    //第一次計算剩餘時間(不控制)\n    let deadlineA = new Date(deadline).getTime(); // setDeadline(deadlineA)\n\n    console.log(deadlineA);\n    let newAucProductTimeRemaining = TimeRemaining(deadlineA); // console.log(\"我是百變怪\", newAucProductTimeRemaining)\n    //第一次計算剩餘時間(react資料流)\n\n    setAuctionProductCard_CountDown(newAucProductTimeRemaining); // TimeRemaining(deadline)\n\n    if (newAucProductTimeRemaining.reduce((a, b) => a + b) < 0) {\n      console.log('競標結束');\n      setLoading('競標結束');\n      setAuctionrunning(false);\n      setIsRunning(false); // console.log(aucName, 'loading', loading, 'isRunning', isRunning)\n    } else {\n      setAuctionrunning(true);\n      console.log('競標繼續');\n      if (newAucProductTimeRemaining[0] > 0) setAuctionProductCard_CountDown([newAucProductTimeRemaining[0], '天', newAucProductTimeRemaining[1] + 1, '小時']);\n      if (newAucProductTimeRemaining[0] < 1) setAuctionProductCard_CountDown([newAucProductTimeRemaining[1], '小時', newAucProductTimeRemaining[2] + 1, '分鐘']);\n    }\n  }, []);\n  useInterval(() => {\n    let deadlineA = new Date(deadline).getTime(); //設立一個變數來避免 setstate非同步問題\n\n    let TimeRemainingAA = TimeRemaining(deadlineA); // console.log(TimeRemainingAA)\n    //更改state狀態\n    //每秒計算剩餘時間\n\n    setAuctionProductCard_CountDown(TimeRemainingAA);\n    let bbb = TimeRemainingAA.reduce((a, b) => a + b);\n\n    if (bbb < 0) {\n      setAuctionrunning(false);\n      setIsRunning(false);\n      setLoading('競標結束');\n      console.log('bye');\n    } else {\n      if (TimeRemainingAA[0] > 0) setAuctionProductCard_CountDown([TimeRemainingAA[0], '天', TimeRemainingAA[1] + 1, '小時']);\n      if (TimeRemainingAA[0] < 1) setAuctionProductCard_CountDown([TimeRemainingAA[1], '小時', TimeRemainingAA[2] + 1, '分鐘']);\n    }\n  }, isRunning ? delay : null);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-4 auctionProductCard\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionProduct_Picture_time\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionProduct_Picture\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: `/AuctionDetail/${aucId}`,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: `http://localhost:6005/aucpics/auc/${aucImg}`,\n              alt: \"Background\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), auctionRunning ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionProduct_countdown\",\n          children: [\"\\u622A\\u6A19\\u5012\\u6578 \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: AuctionProductCard_CountDown[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 34\n          }, this), AuctionProductCard_CountDown[1], /*#__PURE__*/_jsxDEV(\"span\", {\n            children: AuctionProductCard_CountDown[2]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 29\n          }, this), AuctionProductCard_CountDown[3]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctionProduct_countdown auctionOver\",\n          children: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionProductionTitle\",\n        children: aucName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auctionProductCurrentPrice\",\n        children: [\"\\u76EE\\u524D\\u50F9\\u683C: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"NT $\", aucPriceNow]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 67\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(AuctionProductCard, \"3WTR21IalsVDEaCY6jaoWQ5AlEU=\", false, function () {\n  return [useInterval];\n});\n\n_c = AuctionProductCard;\nexport default _c2 = withRouter(AuctionProductCard);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AuctionProductCard\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/Auction/components/AuctionProductCard.js"],"names":["React","useState","useEffect","monkey","withRouter","Link","useInterval","AuctionProductCard","props","aucId","aucName","aucPriceNow","deadline","aucImg","TimeRemaining","delay","setDelay","auctionRunning","setAuctionrunning","AuctionProductCard_CountDown","setAuctionProductCard_CountDown","loading","setLoading","isRunning","setIsRunning","deadlineA","Date","getTime","console","log","newAucProductTimeRemaining","reduce","a","b","TimeRemainingAA","bbb"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport monkey from '../images/monkey.jpg'\nimport { withRouter, Link } from 'react-router-dom'\nimport useInterval from './useInterval';\n\nfunction AuctionProductCard(props) {\n    const { aucId, aucName, aucPriceNow, deadline,aucImg, TimeRemaining } = props\n    const [delay, setDelay] = useState(1000);\n    const [auctionRunning, setAuctionrunning] = useState(false)\n    const [AuctionProductCard_CountDown, setAuctionProductCard_CountDown] = useState([0, '', 0, ''])\n    const [loading, setLoading] = useState('')\n    const [isRunning, setIsRunning] = useState(true);\n    // const [deadlineB,setDeadline] = useState()\n\n    // 初始化倒數計時器\n    useEffect(() => {\n        //第一次計算剩餘時間(不控制)\n        \n        let deadlineA = new Date(deadline).getTime()\n        // setDeadline(deadlineA)\n        console.log(deadlineA)\n        let newAucProductTimeRemaining = TimeRemaining(deadlineA)\n        // console.log(\"我是百變怪\", newAucProductTimeRemaining)\n        //第一次計算剩餘時間(react資料流)\n        setAuctionProductCard_CountDown(newAucProductTimeRemaining)\n        // TimeRemaining(deadline)\n        if ((newAucProductTimeRemaining.reduce((a, b) => a + b) < 0)) {\n            console.log('競標結束')\n            setLoading('競標結束')\n            setAuctionrunning(false)\n            setIsRunning(false)\n            // console.log(aucName, 'loading', loading, 'isRunning', isRunning)\n        } else {\n            setAuctionrunning(true)\n            console.log('競標繼續')\n            if (newAucProductTimeRemaining[0] > 0)\n                setAuctionProductCard_CountDown([newAucProductTimeRemaining[0], '天', newAucProductTimeRemaining[1] + 1, '小時'])\n            if (newAucProductTimeRemaining[0] < 1)\n                setAuctionProductCard_CountDown([newAucProductTimeRemaining[1], '小時', newAucProductTimeRemaining[2] + 1, '分鐘'])\n        }\n    }, [])\n\n    useInterval(() => {\n        \n        let deadlineA = new Date(deadline).getTime()\n        //設立一個變數來避免 setstate非同步問題\n        let TimeRemainingAA = TimeRemaining(deadlineA)\n        // console.log(TimeRemainingAA)\n        //更改state狀態\n        //每秒計算剩餘時間\n        setAuctionProductCard_CountDown(TimeRemainingAA)\n        let bbb = TimeRemainingAA.reduce((a, b) => a + b)\n        if (bbb < 0) {\n            setAuctionrunning(false)\n            setIsRunning(false)\n            setLoading('競標結束')\n            console.log('bye')\n        } else {\n            if (TimeRemainingAA[0] > 0)\n                setAuctionProductCard_CountDown([TimeRemainingAA[0], '天', TimeRemainingAA[1] + 1, '小時'])\n            if (TimeRemainingAA[0] < 1)\n                setAuctionProductCard_CountDown([TimeRemainingAA[1], '小時', TimeRemainingAA[2] + 1, '分鐘'])\n        }\n    }, isRunning ? delay : null)\n\n    return (\n        <>\n            <div className=\"col-4 auctionProductCard\">\n                <div className=\"auctionProduct_Picture_time\">\n                    <div className=\"auctionProduct_Picture\">\n                    <Link to={`/AuctionDetail/${aucId}`}>\n                        <img src={`http://localhost:6005/aucpics/auc/${aucImg}`} alt=\"Background\" />\n                    </Link>\n                    </div>\n                    {auctionRunning ? (\n                        <div className=\"auctionProduct_countdown\">\n                            截標倒數 <span>{AuctionProductCard_CountDown[0]}</span>\n                            {AuctionProductCard_CountDown[1]}\n                            <span>{AuctionProductCard_CountDown[2]}</span>\n                            {AuctionProductCard_CountDown[3]}\n                        </div>\n                    ) : (<div className=\"auctionProduct_countdown auctionOver\">{loading}</div>)}\n                </div>\n                <div className=\"auctionProductionTitle\">\n                    {aucName}\n                </div>\n                <div className=\"auctionProductCurrentPrice\">目前價格: <span>NT ${aucPriceNow}</span></div>\n            </div>\n        </>\n    );\n}\n\nexport default withRouter(AuctionProductCard);"]},"metadata":{},"sourceType":"module"}