{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/cart/components/CartEventFinish.js\",\n    _s = $RefreshSig$();\n\nimport { React, useState, useEffect } from 'react';\nimport { ReactComponent as Logo } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../pics/logo-bk.svg\";\nimport { withRouter } from 'react-router-dom';\nimport '../../../bootstrap/css/bootstrap.css';\nimport '../styles/cart-finish.scss'; // icon\n\nimport { FaLock } from 'react-icons/fa';\nimport { RiArrowRightSLine } from 'react-icons/ri';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction CartEventFinish(props) {\n  _s();\n\n  const orderId = props.sentorder;\n  const orderItems = props.displaycartitems;\n  const discount = props.discount; // 定義要列出的資料\n  // orders內容\n\n  const [orderbyid, setOrderById] = useState('');\n  const [username, setUsername] = useState('');\n  const [address, setAddress] = useState('');\n  const [mobile, setMobile] = useState('');\n  const [shipmethod, setShipMethod] = useState('');\n  const [credittype, setCreditType] = useState('');\n  const [date, setDate] = useState('');\n  const [total, setTotal] = useState(''); // order_details內容\n\n  const [proid, setProId] = useState('');\n  const [proqty, setProQty] = useState(''); // const [orderitems, setOrderItems] = useState([])\n\n  async function getOrdersServer(orderId) {\n    // 取得剛剛父層寫入的訂單 orders\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/orders/' + orderId; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    }); // fetch是呼叫後台api, response=得到的資料\n\n    const response = await fetch(request);\n    console.log(response);\n    const data = await response.json();\n    console.log(data); // 設定資料\n\n    setOrderById(data.orderId);\n    setUsername(data.username);\n    setAddress(data.userAddress);\n    setMobile(data.userPhone);\n    setShipMethod(data.orderShip);\n    setCreditType(data.orderPay);\n    let tempdate = new Date(data.created_at);\n    let newdate = tempdate.getFullYear() + '-' + parseInt(tempdate.getMonth() + 1) + '-' + tempdate.getDate();\n    setDate(newdate);\n    setTotal(data.orderPrice); // 取得order_details\n    // 連接的伺服器資料網址\n\n    const url2 = 'http://localhost:6005/order_details/' + orderId; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request2 = new Request(url2, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    }); // fetch是呼叫後台api, response=得到的資料\n\n    const response2 = await fetch(request2);\n    console.log(response2);\n    const data2 = await response2.json();\n    console.log(data2); // 設定資料\n\n    setProId(data2.eventId);\n    setProQty(data2.orderQty);\n  } // 呼叫剛剛的assync func\n\n\n  useEffect(() => {\n    getOrdersServer(orderId);\n  }, []);\n  const orderItemsDisplay = orderItems.map(orderItems => {\n    return /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"c-td-p1 d-flex align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: `http://localhost:6005/eventpic/event/${orderItems.eventImg}`,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col ml-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"pb-2\",\n            children: orderItems.eventName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"c-fgray\",\n            children: [\"\\u6D3B\\u52D5\\u7DE8\\u865F # \", orderItems.eventId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: orderItems.eventType !== '' ? 'd-none' : 'col'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: orderItems.eventType === '' ? 'd-none' : 'col',\n          children: [\"\\u7968\\u7A2E\\uFF1A\", orderItems.eventType]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"col\",\n          children: [\"\\u6578\\u91CF\\uFF1A\", orderItems.qty]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"col\",\n          children: [\"NT$ \", orderItems.eventPrice * orderItems.qty]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  });\n\n  const orderDisplay = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"c-order\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u8A02\\u55AE\\u660E\\u7D30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"\\u8A02\\u55AE\\u7DE8\\u865F\\uFF1A\", orderbyid]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"c-td-dark\",\n              children: [\"\\u8A02\\u55AE\\u65E5\\u671F\\uFF1A\", date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"\\u6298\\u6263\\u78BC\\uFF1A- NT$ \", discount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"c-td-dark\",\n              children: [\"\\u7E3D\\u50F9\\uFF1ANT$ \", total]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"d-flex flex-column\",\n              children: orderItemsDisplay\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"c-order mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u4ED8\\u6B3E\\u8CC7\\u8A0A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"\\u4FE1\\u7528\\u5361\\u5225\\uFF1A\", credittype]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"c-td-dark\",\n              children: [\"\\u5237\\u5361\\u91D1\\u984D\\uFF1ANT$ \", total]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"c-order mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u6536\\u4EF6\\u8CC7\\u8A0A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"\\u6536\\u4EF6\\u4EBA\\uFF1A\", username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"c-td-dark\",\n              children: [\"\\u6536\\u4EF6\\u5730\\u5740\\uFF1A\", address]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"\\u806F\\u7D61\\u96FB\\u8A71\\uFF1A\", mobile]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"c-td-dark\",\n              children: [\"\\u5BC4\\u9001\\u65B9\\u5F0F\\uFF1A\", shipmethod]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-bg2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-thank\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"h5\",\n          children: \"\\u611F\\u8B1D\\u60A8\\u7684\\u8A02\\u8CFC\\uFF01\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"pt-2\",\n          children: \"\\u60A8\\u7684\\u8A02\\u55AE\\u8CC7\\u8A0A\\u5982\\u4E0B\\uFF0C\\u4E26\\u5DF2\\u540C\\u6B65\\u5BC4\\u5230\\u60A8\\u586B\\u5BEB\\u7684e-mail\\u4FE1\\u7BB1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), orderDisplay, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-finish-bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"##\",\n          className: \"\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"c-finbtn1\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u67E5\\u8A62\\u8A02\\u55AE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"##\",\n          className: \"ml-5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"c-finbtn\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u56DE\\u5230\\u8CE3\\u5834\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-checkout1 pt-3 pb-5 d-flex align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(FaLock, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"c-lock ml-3\",\n          children: [\"\\u66F4\\u591A\\u8CC7\\u8A0A\\u8ACB\\u53C3\\u8003\", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"##\",\n            className: \"c-store pb-0\",\n            children: \"\\u96B1\\u79C1\\u6B0A\\u689D\\u6B3E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(CartEventFinish, \"drmuzNHBrKcmAZXjMXHdj/JgtJw=\");\n\n_c = CartEventFinish;\nexport default _c2 = withRouter(CartEventFinish);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CartEventFinish\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/cart/components/CartEventFinish.js"],"names":["React","useState","useEffect","withRouter","FaLock","RiArrowRightSLine","CartEventFinish","props","orderId","sentorder","orderItems","displaycartitems","discount","orderbyid","setOrderById","username","setUsername","address","setAddress","mobile","setMobile","shipmethod","setShipMethod","credittype","setCreditType","date","setDate","total","setTotal","proid","setProId","proqty","setProQty","getOrdersServer","url","request","Request","method","headers","Headers","Accept","response","fetch","console","log","data","json","userAddress","userPhone","orderShip","orderPay","tempdate","Date","created_at","newdate","getFullYear","parseInt","getMonth","getDate","orderPrice","url2","request2","response2","data2","eventId","orderQty","orderItemsDisplay","map","eventImg","eventName","eventType","qty","eventPrice","orderDisplay"],"mappings":"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","sourcesContent":["import { React, useState, useEffect } from 'react'\nimport { ReactComponent as Logo } from '../../../pics/logo-bk.svg'\nimport { withRouter } from 'react-router-dom'\n\nimport '../../../bootstrap/css/bootstrap.css'\nimport '../styles/cart-finish.scss'\n\n// icon\nimport { FaLock } from 'react-icons/fa'\nimport { RiArrowRightSLine } from 'react-icons/ri'\n\nfunction CartEventFinish(props) {\n  const orderId = props.sentorder\n  const orderItems = props.displaycartitems\n  const discount = props.discount\n\n  // 定義要列出的資料\n  // orders內容\n  const [orderbyid, setOrderById] = useState('')\n  const [username, setUsername] = useState('')\n  const [address, setAddress] = useState('')\n  const [mobile, setMobile] = useState('')\n  const [shipmethod, setShipMethod] = useState('')\n  const [credittype, setCreditType] = useState('')\n  const [date, setDate] = useState('')\n  const [total, setTotal] = useState('')\n  // order_details內容\n  const [proid, setProId] = useState('')\n  const [proqty, setProQty] = useState('')\n\n  // const [orderitems, setOrderItems] = useState([])\n\n  async function getOrdersServer(orderId) {\n    // 取得剛剛父層寫入的訂單 orders\n    // 連接的伺服器資料網址\n    const url = 'http://localhost:6005/orders/' + orderId\n\n    // 注意header資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n\n    // fetch是呼叫後台api, response=得到的資料\n    const response = await fetch(request)\n    console.log(response)\n    const data = await response.json()\n    console.log(data)\n\n    // 設定資料\n    setOrderById(data.orderId)\n    setUsername(data.username)\n    setAddress(data.userAddress)\n    setMobile(data.userPhone)\n    setShipMethod(data.orderShip)\n    setCreditType(data.orderPay)\n    let tempdate = new Date(data.created_at)\n    let newdate =\n      tempdate.getFullYear() +\n      '-' +\n      parseInt(tempdate.getMonth() + 1) +\n      '-' +\n      tempdate.getDate()\n    setDate(newdate)\n    setTotal(data.orderPrice)\n\n    // 取得order_details\n    // 連接的伺服器資料網址\n    const url2 =\n      'http://localhost:6005/order_details/' + orderId\n\n    // 注意header資料格式要設定，伺服器才知道是json格式\n    const request2 = new Request(url2, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n\n    // fetch是呼叫後台api, response=得到的資料\n    const response2 = await fetch(request2)\n    console.log(response2)\n    const data2 = await response2.json()\n    console.log(data2)\n\n    // 設定資料\n    setProId(data2.eventId)\n    setProQty(data2.orderQty)\n  }\n\n  // 呼叫剛剛的assync func\n  useEffect(() => {\n    getOrdersServer(orderId)\n  }, [])\n\n  const orderItemsDisplay = orderItems.map((orderItems) => {\n    return (\n      <td>\n        <div class=\"c-td-p1 d-flex align-items-center\">\n          <img\n            src={`http://localhost:6005/eventpic/event/${orderItems.eventImg}`}\n            alt=\"\"\n          />\n          <div className=\"col ml-4\">\n            <p className=\"pb-2\">{orderItems.eventName}</p>\n            <p className=\"c-fgray\">\n              活動編號 # {orderItems.eventId}\n            </p>\n          </div>\n          <p\n            className={\n              orderItems.eventType !== '' ? 'd-none' : 'col'\n            }\n          ></p>\n          <p\n            className={\n              orderItems.eventType === '' ? 'd-none' : 'col'\n            }\n          >\n            票種：{orderItems.eventType}\n          </p>\n          <p className=\"col\">數量：{orderItems.qty}</p>\n          <p className=\"col\">\n            NT$ {orderItems.eventPrice * orderItems.qty}\n          </p>\n        </div>\n      </td>\n    )\n  })\n\n  const orderDisplay = (\n    <>\n      <div>\n        <table className=\"c-order\">\n          <thead>\n            <th>訂單明細</th>\n          </thead>\n          <tbody>\n            <tr>\n              <td>訂單編號：{orderbyid}</td>\n            </tr>\n\n            <tr>\n              <td className=\"c-td-dark\">\n                訂單日期：{date}\n              </td>\n            </tr>\n            {/* <tr>\n                <td>商品小計：NT$ 1,560</td>\n              </tr>\n              <tr>\n                <td className=\"c-td-dark\">\n                  運費小計：NT$ 80\n                </td>\n              </tr>\n               */}\n            <tr>\n              <td>折扣碼：- NT$ {discount}</td>\n            </tr>\n            <tr>\n              <td className=\"c-td-dark\">\n                總價：NT$ {total}\n              </td>\n            </tr>\n            <tr>\n              <td className=\"d-flex flex-column\">\n                {orderItemsDisplay}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <table className=\"c-order mt-5\">\n          <thead>\n            <th>付款資訊</th>\n          </thead>\n          <tbody>\n            <tr>\n              <td>信用卡別：{credittype}</td>\n            </tr>\n            {/* <tr>\n                <td className=\"c-td-dark\">\n                  信用卡號：XXXX-XXXX-XXXX-2348\n                </td>\n              </tr>\n              <tr>\n                <td>有效期限：XX-2025</td>\n              </tr> */}\n            <tr>\n              <td className=\"c-td-dark\">\n                刷卡金額：NT$ {total}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <table className=\"c-order mt-5\">\n          <thead>\n            <th>收件資訊</th>\n          </thead>\n          <tbody>\n            <tr>\n              <td>收件人：{username}</td>\n            </tr>\n            <tr>\n              <td className=\"c-td-dark\">\n                收件地址：{address}\n              </td>\n            </tr>\n            <tr>\n              <td>聯絡電話：{mobile}</td>\n            </tr>\n            <tr>\n              <td className=\"c-td-dark\">\n                寄送方式：{shipmethod}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </>\n  )\n\n  return (\n    <>\n      <div className=\"c-bg2\">\n        <div className=\"c-thank\">\n          <p className=\"h5\">感謝您的訂購！</p>\n          <p className=\"pt-2\">\n            您的訂單資訊如下，並已同步寄到您填寫的e-mail信箱\n          </p>\n        </div>\n\n        {/* 訂單資訊 */}\n        {orderDisplay}\n\n        <div className=\"c-finish-bottom\">\n          <a href=\"##\" className=\"\">\n            <div className=\"c-finbtn1\">\n              <p>查詢訂單</p>\n            </div>\n          </a>\n          <a href=\"##\" className=\"ml-5\">\n            <div className=\"c-finbtn\">\n              <p>回到賣場</p>\n            </div>\n          </a>\n        </div>\n        <div className=\"c-checkout1 pt-3 pb-5 d-flex align-items-center\">\n          <FaLock size={20} />\n          <p className=\"c-lock ml-3\">\n            更多資訊請參考\n            <a href=\"##\" className=\"c-store pb-0\">\n              隱私權條款\n            </a>\n          </p>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default withRouter(CartEventFinish)\n"]},"metadata":{},"sourceType":"module"}