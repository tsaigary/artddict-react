{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/cart/CartProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { ReactComponent as Logo } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../pics/logo-bk.svg\";\nimport { Link } from 'react-router-dom';\nimport { Nav } from 'react-bootstrap';\nimport '../../bootstrap/css/bootstrap.css';\nimport './styles/cart-product.scss';\nimport Cookies from 'universal-cookie'; // demo\n\nimport BasketProduct from './components/BasketProduct';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction CartEvent() {\n  _s();\n\n  // const { products } = fakedata\n  const [cartItems, setCartItems] = useState([]);\n  const cookies = new Cookies();\n\n  async function getEventServer() {\n    const url = 'http://localhost:6005/product/'; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    }); // fetch是呼叫後台api, response=得到的資料\n\n    const response = await fetch(request);\n    console.log(response);\n    const data = await response.json();\n    console.log(data);\n  } // 呼叫剛剛的assync func\n\n\n  useEffect(() => {\n    getEventServer();\n  }, []);\n  /**\n   * 當頁面Load時，讀取Cookie值並更新至cartItems\n   */\n\n  useEffect(() => {\n    let tempArr = [];\n    let cookieProductArr = cookies.get('product'); // get Cookies\n\n    if (cookieProductArr) {\n      for (let i = 0; i < cookieProductArr.length; i++) {\n        let product = cookieProductArr[i];\n        tempArr.push(product);\n      }\n\n      setCartItems(tempArr);\n    }\n  }, []);\n  /**\n   * 更新 event Cookie\n   *\n   * @param {Object} event 欲改變的目標 event.\n   * @param {number} quantityNum 欲更新event.qty到的數字.\n   * @param {string} type 根據不同type，event.qty 更新方法不同\n   *\n   *\n   */\n\n  const onCookie = (event, quantityNum, type) => {\n    let updateCookie = [];\n    let cookieEvent = cookies.get('product'); // 取得 event cookie\n\n    if (cookieEvent) {\n      // 如果有已存在的 event cookie\n      // 查看cookie裡面的 event id\n      const idSet = new Set();\n\n      for (let i in cookieEvent) {\n        idSet.add(cookieEvent[i].id);\n      } // 如果被改變的 event 在 event cookie 中\n\n\n      if (idSet.has(event.id)) {\n        for (let i in cookieEvent) {\n          if (cookieEvent[i].id == event.id) {\n            if (type == 'add') // 如果event是從AddToCart,數量+1\n              cookieEvent[i].qty += 1;else {\n              // 如果event是從Input,數量直接到指定數字\n              cookieEvent[i].qty = Number(quantityNum);\n            }\n          }\n        }\n      } else {\n        // 如果被改變的product 不在 product cookie 中\n        // 初始數量為1\n        event.qty = 1;\n        cookieEvent.push(event);\n      } // 如果被改變後的product數量>0，加入在cookie 中\n\n\n      for (let i in cookieEvent) {\n        if (cookieEvent[i].qty > 0) {\n          updateCookie.push(cookieEvent[i]);\n        }\n      }\n    } else {\n      // 如果沒有已存在的 product cookie\n      // 初始數量為1\n      event.qty = 1;\n      updateCookie.push(event);\n    }\n\n    cookies.set('product', updateCookie); //更新Cookie\n  };\n  /**\n   * 加進購物車\n   *\n   * @param {Object} product 欲改變的目標 product.\n   * @param {number} quantityNum 欲更新product.qty到的數字.\n   *\n   */\n\n\n  const onAddToCart = (event, quantityNum) => {\n    onCookie(event, quantityNum, 'add');\n    const exist = cartItems.find(x => x.id === event.id);\n\n    if (exist) {\n      setCartItems(cartItems.map(x => x.id === event.id ? { ...exist,\n        qty: exist.qty + 1\n      } : x));\n    } else {\n      setCartItems([...cartItems, { ...event,\n        qty: 1\n      }]);\n    }\n  };\n  /**\n   * 更新購物車數量\n   *\n   * @param {Object} event 欲改變的目標 event\n   * @param {number} quantityNum event.qty到的數字.\n   *\n   */\n\n\n  const onCartNumChange = (event, quantityNum) => {\n    console.log(event);\n    console.log(quantityNum);\n    const exist = cartItems.find(x => x.id === event.id);\n    onCookie(event, quantityNum, 'set');\n\n    if (quantityNum <= 0) {\n      setCartItems(cartItems.filter(x => x.id !== event.id));\n    } else {\n      setCartItems(cartItems.map(x => x.id === event.id ? { ...exist,\n        qty: Number(quantityNum)\n      } : x));\n    }\n  };\n  /**\n   * 移出購物車\n   *\n   * @param {Object} event 欲改變的目標 event.\n   *\n   */\n\n\n  const onDelete = event => {\n    onCookie(event, 0, 'set');\n    const exist = cartItems.find(x => x.id === event.id);\n\n    if (exist.qty >= 1) {\n      setCartItems(cartItems.filter(x => x.id !== event.id));\n    }\n  };\n\n  const [cartItems2, setCartItems2] = useState([]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-bg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-header\",\n        children: [/*#__PURE__*/_jsxDEV(Logo, {\n          className: \"c-logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Hello JoJo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-crumbs\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u9996\\u9801\\xA0/\\xA0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u8CFC\\u7269\\u8ECA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c-tab-product\",\n          children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n            as: Link,\n            to: \"/cart-product\",\n            children: \"\\u7F8E\\u8853\\u9928\\u5546\\u54C1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c-tab-event\",\n          children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n            as: Link,\n            to: \"/cart-event\",\n            children: \"\\u6D3B\\u52D5\\u7968\\u5377\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c-tab-auction\",\n          children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n            as: Link,\n            to: \"/cart-auction\",\n            children: \"\\u5F97\\u6A19\\u5546\\u54C1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BasketProduct, {\n        cartItems: cartItems,\n        onAddToCart: onAddToCart,\n        onCartNumChange: onCartNumChange,\n        onDelete: onDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(CartEvent, \"Db3ZnJhGVApeo920t7EB2wb6SrM=\");\n\n_c = CartEvent;\nexport default CartEvent;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartEvent\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/cart/CartProduct.js"],"names":["React","useState","useEffect","Link","Nav","Cookies","BasketProduct","CartEvent","cartItems","setCartItems","cookies","getEventServer","url","request","Request","method","headers","Headers","Accept","response","fetch","console","log","data","json","tempArr","cookieProductArr","get","i","length","product","push","onCookie","event","quantityNum","type","updateCookie","cookieEvent","idSet","Set","add","id","has","qty","Number","set","onAddToCart","exist","find","x","map","onCartNumChange","filter","onDelete","cartItems2","setCartItems2"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { ReactComponent as Logo } from '../../pics/logo-bk.svg'\nimport { Link } from 'react-router-dom'\nimport { Nav } from 'react-bootstrap'\nimport '../../bootstrap/css/bootstrap.css'\nimport './styles/cart-product.scss'\nimport Cookies from 'universal-cookie'\n\n// demo\nimport BasketProduct from './components/BasketProduct'\n\nfunction CartEvent() {\n  // const { products } = fakedata\n  const [cartItems, setCartItems] = useState([])\n  const cookies = new Cookies()\n\n  async function getEventServer() {\n    const url = 'http://localhost:6005/product/'\n\n    // 注意header資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n    // fetch是呼叫後台api, response=得到的資料\n    const response = await fetch(request)\n    console.log(response)\n    const data = await response.json()\n    console.log(data)\n  }\n\n  // 呼叫剛剛的assync func\n  useEffect(() => {\n    getEventServer()\n  }, [])\n\n  /**\n   * 當頁面Load時，讀取Cookie值並更新至cartItems\n   */\n  useEffect(() => {\n    let tempArr = []\n    let cookieProductArr = cookies.get('product') // get Cookies\n    if (cookieProductArr) {\n      for (let i = 0; i < cookieProductArr.length; i++) {\n        let product = cookieProductArr[i]\n        tempArr.push(product)\n      }\n      setCartItems(tempArr)\n    }\n  }, [])\n\n  /**\n   * 更新 event Cookie\n   *\n   * @param {Object} event 欲改變的目標 event.\n   * @param {number} quantityNum 欲更新event.qty到的數字.\n   * @param {string} type 根據不同type，event.qty 更新方法不同\n   *\n   *\n   */\n  const onCookie = (event, quantityNum, type) => {\n    let updateCookie = []\n    let cookieEvent = cookies.get('product') // 取得 event cookie\n    if (cookieEvent) {\n      // 如果有已存在的 event cookie\n      // 查看cookie裡面的 event id\n      const idSet = new Set()\n      for (let i in cookieEvent) {\n        idSet.add(cookieEvent[i].id)\n      }\n      // 如果被改變的 event 在 event cookie 中\n      if (idSet.has(event.id)) {\n        for (let i in cookieEvent) {\n          if (cookieEvent[i].id == event.id) {\n            if (type == 'add')\n              // 如果event是從AddToCart,數量+1\n              cookieEvent[i].qty += 1\n            else {\n              // 如果event是從Input,數量直接到指定數字\n              cookieEvent[i].qty = Number(quantityNum)\n            }\n          }\n        }\n      } else {\n        // 如果被改變的product 不在 product cookie 中\n        // 初始數量為1\n        event.qty = 1\n        cookieEvent.push(event)\n      }\n      // 如果被改變後的product數量>0，加入在cookie 中\n      for (let i in cookieEvent) {\n        if (cookieEvent[i].qty > 0) {\n          updateCookie.push(cookieEvent[i])\n        }\n      }\n    } else {\n      // 如果沒有已存在的 product cookie\n      // 初始數量為1\n      event.qty = 1\n      updateCookie.push(event)\n    }\n    cookies.set('product', updateCookie) //更新Cookie\n  }\n\n  /**\n   * 加進購物車\n   *\n   * @param {Object} product 欲改變的目標 product.\n   * @param {number} quantityNum 欲更新product.qty到的數字.\n   *\n   */\n  const onAddToCart = (event, quantityNum) => {\n    onCookie(event, quantityNum, 'add')\n    const exist = cartItems.find((x) => x.id === event.id)\n    if (exist) {\n      setCartItems(\n        cartItems.map((x) =>\n          x.id === event.id\n            ? { ...exist, qty: exist.qty + 1 }\n            : x\n        )\n      )\n    } else {\n      setCartItems([...cartItems, { ...event, qty: 1 }])\n    }\n  }\n\n  /**\n   * 更新購物車數量\n   *\n   * @param {Object} event 欲改變的目標 event\n   * @param {number} quantityNum event.qty到的數字.\n   *\n   */\n  const onCartNumChange = (event, quantityNum) => {\n    console.log(event)\n    console.log(quantityNum)\n    const exist = cartItems.find((x) => x.id === event.id)\n    onCookie(event, quantityNum, 'set')\n    if (quantityNum <= 0) {\n      setCartItems(\n        cartItems.filter((x) => x.id !== event.id)\n      )\n    } else {\n      setCartItems(\n        cartItems.map((x) =>\n          x.id === event.id\n            ? { ...exist, qty: Number(quantityNum) }\n            : x\n        )\n      )\n    }\n  }\n\n  /**\n   * 移出購物車\n   *\n   * @param {Object} event 欲改變的目標 event.\n   *\n   */\n  const onDelete = (event) => {\n    onCookie(event, 0, 'set')\n    const exist = cartItems.find((x) => x.id === event.id)\n    if (exist.qty >= 1) {\n      setCartItems(\n        cartItems.filter((x) => x.id !== event.id)\n      )\n    }\n  }\n\n  const [cartItems2, setCartItems2] = useState([])\n\n  return (\n    <>\n      <div className=\"c-bg\">\n        <div className=\"c-header\">\n          <Logo className=\"c-logo\" />\n          <p>Hello JoJo</p>\n        </div>\n        <div className=\"c-crumbs\">\n          <p>首頁&nbsp;/&nbsp;</p>\n          <p>購物車</p>\n        </div>\n        <div className=\"c-tabs\">\n          <div className=\"c-tab-product\">\n            <Nav.Link as={Link} to=\"/cart-product\">\n              美術館商品\n            </Nav.Link>\n          </div>\n          <div className=\"c-tab-event\">\n            <Nav.Link as={Link} to=\"/cart-event\">\n              活動票卷\n            </Nav.Link>\n          </div>\n          <div className=\"c-tab-auction\">\n            <Nav.Link as={Link} to=\"/cart-auction\">\n              得標商品\n            </Nav.Link>\n          </div>\n        </div>\n        <BasketProduct\n          cartItems={cartItems}\n          onAddToCart={onAddToCart}\n          onCartNumChange={onCartNumChange}\n          onDelete={onDelete}\n        ></BasketProduct>\n      </div>\n    </>\n  )\n}\n\nexport default CartEvent\n"]},"metadata":{},"sourceType":"module"}