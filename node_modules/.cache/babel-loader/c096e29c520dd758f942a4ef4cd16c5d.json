{"ast":null,"code":"var _jsxFileName = \"/Users/Gary 1/Desktop/Code stuff/\\u8CC7\\u7B56\\u6703/\\u5C08\\u984C/\\u5927\\u5C08/artddict-react/src/pages/cart/CartProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { ReactComponent as Logo } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../pics/logo-bk.svg\";\nimport { Link } from 'react-router-dom';\nimport { Nav } from 'react-bootstrap';\nimport '../../bootstrap/css/bootstrap.css';\nimport './styles/cart-product.scss';\nimport Cookies from 'universal-cookie'; // demo\n\nimport BasketProduct from './components/BasketProduct';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction CartEvent() {\n  _s();\n\n  const [membername, setMemberName] = useState(''); //驗證身分\n\n  async function getjwtvertifyFromServer() {\n    const token = localStorage.getItem('token');\n    const response = await fetch('http://localhost:6005/users/checklogin', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        token\n      })\n    });\n    const data = await response.json();\n    console.log(data);\n    setMemberName(data.name);\n  }\n\n  useEffect(() => {\n    //驗證身分\n    getjwtvertifyFromServer();\n  }, []); // const { products } = fakedata\n\n  const [cartItems, setCartItems] = useState([]);\n  const cookies = new Cookies();\n\n  async function getEventServer() {\n    const url = 'http://localhost:6005/product/'; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    }); // fetch是呼叫後台api, response=得到的資料\n\n    const response = await fetch(request);\n    console.log(response);\n    const data = await response.json();\n    console.log(data);\n  } // 呼叫剛剛的assync func\n\n\n  useEffect(() => {\n    getEventServer();\n  }, []);\n  /**\n   * 當頁面Load時，讀取Cookie值並更新至cartItems\n   */\n\n  useEffect(() => {\n    let tempArr = [];\n    let cookieProductArr = cookies.get('product'); // get Cookies\n\n    if (cookieProductArr) {\n      for (let i = 0; i < cookieProductArr.length; i++) {\n        let product = cookieProductArr[i];\n        tempArr.push(product);\n      }\n\n      setCartItems(tempArr);\n    }\n  }, []);\n  const [cartItems2, setCartItems2] = useState([]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-bg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-header\",\n        children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n          as: Link,\n          to: \"/\",\n          className: \"p-0\",\n          children: /*#__PURE__*/_jsxDEV(Logo, {\n            className: \"c-logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: !membername ? 'd-none' : 'd-block',\n          children: [\"Hello \", membername]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-crumbs\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"./\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u9996\\u9801\\xA0/\\xA0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"./cart-product\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u8CFC\\u7269\\u8ECA\\xA0/\\xA0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c-tab-product\",\n          children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n            as: Link,\n            to: \"/cart-product\",\n            children: \"\\u7F8E\\u8853\\u9928\\u5546\\u54C1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c-tab-event\",\n          children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n            as: Link,\n            to: \"/cart-event\",\n            children: \"\\u6D3B\\u52D5\\u7968\\u5377\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c-tab-auction\",\n          children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n            as: Link,\n            to: \"/cart-auction\",\n            children: \"\\u5F97\\u6A19\\u5546\\u54C1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BasketProduct, {\n        cartItems: cartItems\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(CartEvent, \"ewh4iUyk4mPdFGcQXYAO61WZJ+E=\");\n\n_c = CartEvent;\nexport default CartEvent;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartEvent\");","map":{"version":3,"sources":["/Users/Gary 1/Desktop/Code stuff/資策會/專題/大專/artddict-react/src/pages/cart/CartProduct.js"],"names":["React","useState","useEffect","Link","Nav","Cookies","BasketProduct","CartEvent","membername","setMemberName","getjwtvertifyFromServer","token","localStorage","getItem","response","fetch","method","headers","body","JSON","stringify","data","json","console","log","name","cartItems","setCartItems","cookies","getEventServer","url","request","Request","Headers","Accept","tempArr","cookieProductArr","get","i","length","product","push","cartItems2","setCartItems2"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { ReactComponent as Logo } from '../../pics/logo-bk.svg'\nimport { Link } from 'react-router-dom'\nimport { Nav } from 'react-bootstrap'\nimport '../../bootstrap/css/bootstrap.css'\nimport './styles/cart-product.scss'\nimport Cookies from 'universal-cookie'\n\n// demo\nimport BasketProduct from './components/BasketProduct'\n\nfunction CartEvent() {\n  const [membername, setMemberName] = useState('')\n\n  //驗證身分\n  async function getjwtvertifyFromServer() {\n    const token = localStorage.getItem('token')\n\n    const response = await fetch(\n      'http://localhost:6005/users/checklogin',\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          token,\n        }),\n      }\n    )\n    const data = await response.json()\n    console.log(data)\n    setMemberName(data.name)\n  }\n\n  useEffect(() => {\n    //驗證身分\n    getjwtvertifyFromServer()\n  }, [])\n\n  // const { products } = fakedata\n  const [cartItems, setCartItems] = useState([])\n  const cookies = new Cookies()\n\n  async function getEventServer() {\n    const url = 'http://localhost:6005/product/'\n\n    // 注意header資料格式要設定，伺服器才知道是json格式\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n    // fetch是呼叫後台api, response=得到的資料\n    const response = await fetch(request)\n    console.log(response)\n    const data = await response.json()\n    console.log(data)\n  }\n\n  // 呼叫剛剛的assync func\n  useEffect(() => {\n    getEventServer()\n  }, [])\n\n  /**\n   * 當頁面Load時，讀取Cookie值並更新至cartItems\n   */\n  useEffect(() => {\n    let tempArr = []\n    let cookieProductArr = cookies.get('product') // get Cookies\n    if (cookieProductArr) {\n      for (let i = 0; i < cookieProductArr.length; i++) {\n        let product = cookieProductArr[i]\n        tempArr.push(product)\n      }\n      setCartItems(tempArr)\n    }\n  }, [])\n\n  const [cartItems2, setCartItems2] = useState([])\n\n  return (\n    <>\n      <div className=\"c-bg\">\n        <div className=\"c-header\">\n          <Nav.Link as={Link} to=\"/\" className=\"p-0\">\n            <Logo className=\"c-logo\" />\n          </Nav.Link>\n          <p className={!membername ? 'd-none' : 'd-block'}>\n            Hello {membername}\n          </p>\n        </div>\n        <div className=\"c-crumbs\">\n          <a href=\"./\">\n            <p>首頁&nbsp;/&nbsp;</p>\n          </a>\n          <a href=\"./cart-product\">\n            <p>購物車&nbsp;/&nbsp;</p>\n          </a>\n        </div>\n        <div className=\"c-tabs\">\n          <div className=\"c-tab-product\">\n            <Nav.Link as={Link} to=\"/cart-product\">\n              美術館商品\n            </Nav.Link>\n          </div>\n          <div className=\"c-tab-event\">\n            <Nav.Link as={Link} to=\"/cart-event\">\n              活動票卷\n            </Nav.Link>\n          </div>\n          <div className=\"c-tab-auction\">\n            <Nav.Link as={Link} to=\"/cart-auction\">\n              得標商品\n            </Nav.Link>\n          </div>\n        </div>\n        <BasketProduct\n          cartItems={cartItems}\n        ></BasketProduct>\n      </div>\n    </>\n  )\n}\n\nexport default CartEvent\n"]},"metadata":{},"sourceType":"module"}